<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
            "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<title>Clui.Grid</title>
	<style type='text/css'>
        body {font-family: verdana}
        .error {border: solid 1px red;}
        .error_text { color: red; font-size: 10px;}
        td {padding: 3px;}

		body {
			padding: 0px;
			margin: 0px;
		}
		#wrapper {
			width: 800px;
			height: 400px;
			padding: 10px;
			border: solid 1px black;
			overflow: auto;
		}
		.disabled {
			color: gray;
			text-decoration: none;
		}
    </style>
</head>
<body>
	<div id='wrapper'>
		<div id='grid'></div>
	<div>
	<a href='javascript://' id='prev'>previous</a>
	<a href='javascript://' id='next'>next</a>
	
	
	<script type='text/ejs' id='rowEjs'>
		<td><%= id %></td>
		<td><%= assetTitle %></td>
		<td><%= assetCollectionTitle %></td>
		<td><%= type %></td>
	</script>
	<script type='text/javascript' 
            src='../../steal/steal.js'>   
    </script>
	<script type='text/javascript'>
		steal.plugins('jquery/dom/fixture', 'clui/grid').then(function(){
		
		//want this as simple as possible
		//provide it titles and 
		// table contents
			var params = new Mxui.Data({limit : 30})
			
			$.Model('Asset')
			$.fixture.make('asset', 1000, function(i){
				return {
					id: i,
					type: "Audio",
					assetCollectionTitle : "Baby Panda "+i,
					assetTitle: "Baby Monkey "+i
				}
			})
			//{"_id":{"$oid":"4d2288b11cbde2dcce2713ce"},"assetId":"glossary_audio_test_4","bookId":"0324589999","chapter":"10","fileServer":"file_server","url":"economics\/mankiw_9780324589993\/glossary_audio\/test.mp3","assetCollectionId":"glossary_audio","assetCollectionTitle":"","assetCollectionTitleOnPage":"","type":"audio_inline","figureLabel":"","figureNumber":"","assetTitle":"","showAssetTitle":true,"assetDescription":"","showAssetDescription":true,"creditByline":"","creditSource":"","available":true}
			
			
			$("#grid").clui_grid({
				model : Asset,
				params : params,
				columns: {
					id: "Geyser Id",
					assetTitle: "Available Assets",
					assetCollectionTitle: "Collection",
					type: "Media Type"
				},
				row : "rowEjs"
			})
				
			
			$('#next').click(function(){
				params.next();
			});
			
			$('#prev').click(function(){
				params.prev();
			})
			
			params.bind("updated.attr", function(){
				if(!this.canMoveNext()){
					$('#next').addClass('disabled')
				}else{
					$('#next').removeClass('disabled')
				}
				if(!this.canMovePrev()){
					$('#prev').addClass('disabled')
				}else{
					$('#prev').removeClass('disabled')
				}
			})
		}).start();
	</script>
</body>
</html>