<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
		"http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head><script type="text/javascript" src="http://localhost:5555?[]&amp;_=0.5830835297238082"></script>
	<title>Listening To Events</title>
	<link rel="stylesheet" type="text/css" href="../documentjs/jmvcdoc/style.css">
	<link rel="shortcut icon" href="../documentjs/jmvcdoc/images/favicon.ico">
	<script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxxx-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<link rel="stylesheet" href="file:////Users/alexisabril/Projects/javascriptmvc-site/javascriptmvc/documentjs/jmvcdoc/style.css" type="text/css"></head><body>
<div id="documentation">
	<div id="top">
		<div class="topCorner">
			<div class="right"></div>
			<div class="left"></div>
		</div>
		<div class="content">
			<div id="searchRoundCorners">
				<div class="jmvcdoc_search"><input id="search" type="input"><span title="clear term" class="remove"></span></div>
			</div>
			<div id="defaults">
				<ul id="menu" class="ui-menu">
					<li class="ui-menu-item">
						<a class="menuLink" href="#favorites"><span class="menuSpan">Favorites</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../follow.html" title="Follow"><span class="menuSpan red">Follow</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../contribute.html" title="Contribute"><span class="menuSpan red">Contribute</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../code.html" title="Code"><span class="menuSpan red">Code</span></a>
					</li>
				</ul>
			</div>
			<div class="logo-text"><a href="http://javascriptmvc.com"><img src="../documentjs/jmvcdoc/images/logo80x30.png" class="logo-image"></a></div>
		</div>
		<div class="bottomCorner">
			<div>&nbsp;</div>
		</div>
	</div>
	<div id="bottom">
		<div id="nav" class="jmvcdoc_nav">


	<div id="selected">
		    
				
		<div class="content">
			    <a href="#!" class="selected choice page" style="padding-left: 20px">
			    	
					JavaScriptMVC
					
				</a>
				
		</div>
			
		<div class="spacer"><div>&nbsp;</div></div>
			
			
				
		<div class="content">
			    <a href="#!jquerymx" class="selected choice page" style="padding-left: 20px">
			    	
						<span class="remove" title="close"></span>
					
					jQueryMX
					
				</a>
				
		</div>
			
		<div class="spacer"><div>&nbsp;</div></div>
			
			
				
		<div class="content">
			    <a href="#!jQuery.Controller" class="selected choice class" style="padding-left: 20px">
			    	
						<span class="remove" title="close"></span>
					
					$.Controller
					
				</a>
				
		</div>
			
			
	</div>

<div id="results" style="display: block">
	<div class="content">
	    
			
		    <a href="#!jquery.controller.listening" class="result choice page open" style="padding-left: 20px">
		    	Listening To Events
			</a>
			
		
			
		    <a href="#!jquery.controller.plugin" class="result choice page" style="padding-left: 20px">
		    	The generated jQuery plugin
			</a>
			
		
			
		    <a href="javascript://" class="result choice prototype" style="padding-left: 20px">
		    	$.Controller.prototype
			</a>
			
		
			
		    <a href="#!jQuery.Controller.prototype.bind" class="result choice function" style="padding-left: 60px">
		    	bind
			</a>
			
		
			
			
		    <a href="#!jQuery.Controller.prototype.delegate" class="result choice function" style="padding-left: 60px">
		    	delegate
			</a>
			
		
			
		    <a href="#!jQuery.Controller.prototype.destroy" class="result choice function" style="padding-left: 60px">
		    	destroy
			</a>
			
		
			
		    <a href="#!jQuery.Controller.prototype.element" class="result choice attribute" style="padding-left: 60px">
		    	element
			</a>
			
		
			
		    <a href="#!jQuery.Controller.prototype.find" class="result choice function" style="padding-left: 60px">
		    	find
			</a>
			
		
			
		    <a href="#!jQuery.Controller.prototype.options" class="result choice attribute" style="padding-left: 60px">
		    	options
			</a>
			
		
			
			
		    <a href="#!jQuery.Controller.prototype.setup" class="result choice function" style="padding-left: 60px">
		    	setup
			</a>
			
		
			
		    <a href="#!jQuery.Controller.prototype.update" class="result choice function" style="padding-left: 60px">
		    	update
			</a>
			
		
			
		    <a href="#!jQuery.Controller.prototype.view" class="result choice function" style="padding-left: 60px">
		    	view
			</a>
			
		
			
		    <a href="javascript://" class="result choice static" style="padding-left: 40px">
		    	static
			</a>
			
		
			
			
			
		    <a href="#!jQuery.Controller.static.defaults" class="result choice attribute" style="padding-left: 60px">
		    	defaults
			</a>
			
		
			
		    <a href="#!jQuery.Controller.static.listensTo" class="result choice attribute" style="padding-left: 60px">
		    	listensTo
			</a>
			
		
			
		    <a href="#!jQuery.Controller.static.pluginName" class="result choice attribute" style="padding-left: 60px">
		    	pluginName
			</a>
			
		
			
		    <a href="#!jQuery.Controller.static.processors" class="result choice attribute" style="padding-left: 60px">
		    	processors
			</a>
			
		
			
		    <a href="#!jQuery.Controller.static.setup" class="result choice function" style="padding-left: 60px">
		    	setup
			</a>
			
		
	</div>
</div>


</div>
		<div id="doc_container">
			<div id="doc" class="jmvcdoc_content">
<div class="top">
	<div class="content">
	    <h1>Listening To Events&nbsp;
	    	<span class="page type"><span class="typeEnd">page</span></span>&nbsp;
	    	<span class="favorite favoriteoff">&nbsp;&nbsp;&nbsp;</span></h1>
	    
	    
	    
		
		
		
	</div>	
</div>


<p>Controllers make creating and tearing down event handlers extremely
easy.  The tearingdown of event handlers is especially important
in preventing memory leaks in long lived applications.</p>

<h2>Automatic Binding</h2>

<p>When a <a href="#!jQuery.Controller.prototype.setup">new controller is created</a>,
contoller checks its prototype methods for functions that are named like 
event handlers.  It binds these functions to the 
controller's <a href="#!jQuery.Controller.prototype.element">element</a> with 
event delegation.  When
the controller is destroyed (or it's element is removed from the page), controller
will unbind its event handlers automatically.</p>

<p>For example, each of the following controller's functions will automatically
bound:</p>

<pre><code class=" javascript">$.Controller(<span class="string">"Crazy"</span>,{

  <span class="comment">// listens to all clicks on this element</span>
  <span class="string">"click"</span> : <span class="function"><span class="keyword">function</span><span class="params">(el, ev)</span>{</span>},

  <span class="comment">// listens to all mouseovers on </span>
  <span class="comment">// li elements withing this controller</span>
  <span class="string">"li mouseover"</span> : <span class="function"><span class="keyword">function</span><span class="params">(el, ev)</span>{</span>}

  <span class="comment">// listens to the window being resized</span>
  <span class="string">"{window} resize"</span> : <span class="function"><span class="keyword">function</span><span class="params">(window, ev)</span>{</span>}
})
</code></pre>

<p>Controller will bind function names with spaces, standard DOM events, and 
event names in $.event.special.</p>

<p>In general, Controller will know automatically when to bind event handler functions except for 
one case - event names without selectors that are not in $.event.special.</p>

<p>But to correct for this, you just need to add the 
function to the <a href="#!jQuery.Controller.static.listensTo">listensTo</a> 
property.  Here's how:</p>

<pre><code class=" javascript"> $.Controller(<span class="string">"MyShow"</span>,{
   listensTo: [<span class="string">"show"</span>]
 },{
   show: <span class="function"><span class="keyword">function</span><span class="params">( el, ev )</span> {</span>
     el.show();
   }
 })
 $(<span class="string">'.show'</span>).my_show().trigger(<span class="string">"show"</span>);
</code></pre>

<h2>Callback parameters</h2>

<p>Event handlers bound with controller are called back with the element and the event 
as parameters.  <b>this</b> refers to the controller instance.  For example:</p>

<pre><code class=" javascript">$.Controller(<span class="string">"Tabs"</span>,{

  <span class="comment">// li - the list element that was clicked</span>
  <span class="comment">// ev - the click event</span>
  <span class="string">"li click"</span> : <span class="function"><span class="keyword">function</span><span class="params">(li, ev)</span>{</span>
     <span class="keyword">this</span>.tab(li).hide()
  },
  tab : <span class="function"><span class="keyword">function</span><span class="params">(li)</span>{</span>
    <span class="keyword">return</span> $(li.find(<span class="string">"a"</span>).attr(<span class="string">"href"</span>))
  }
})
</code></pre>

<h2>Templated Event Bindings</h2>

<p>One of Controller's most powerful features is templated event 
handlers.  You can parameterize the event name,
the selector, or event the root element.</p>

<h3>Templating event names and selectors:</h3>

<p>Often, you want to make a widget's behavior 
configurable. A common example is configuring which event
a menu should show a sub-menu (ex: on click or mouseenter).  The 
following controller lets you configure when a menu should show 
sub-menus:</p>

<p>The following makes two buttons.  One says hello on click, 
the other on a 'tap' event.</p>

<pre><code class=" javascript">$.Controller(<span class="string">"Menu"</span>,{
  <span class="string">"li {showEvent}"</span> : <span class="function"><span class="keyword">function</span><span class="params">(el)</span>{</span>
    el.children(<span class="string">'ul'</span>).show()
  }
})

$(<span class="string">"#clickMe"</span>).menu({showEvent : <span class="string">"click"</span>});
$(<span class="string">"#touchMe"</span>).menu({showEvent : <span class="string">"mouseenter"</span>});
</code></pre>

<p>$.Controller replaces value in <code>{}</code> with 
values in a 
controller's <a href="#!jQuery.Controller.prototype.options">options</a>. This means
we can easily provide a default <code>showEvent</code> value and create
a menu without providing a value like:</p>

<pre><code class=" javascript">$.Controller(<span class="string">"Menu"</span>,
{
  defaults : {
    showEvent : <span class="string">"click"</span>
  }
},
{
  <span class="string">"li {showEvent}"</span> : <span class="function"><span class="keyword">function</span><span class="params">(el)</span>{</span>
    el.children(<span class="string">'ul'</span>).show()
  }
});

$(<span class="string">"#clickMe"</span>).menu(); <span class="comment">//defaults to using click</span>
</code></pre>

<p>Sometimes, we might might want to configure our widget to 
use different elements.  The following makes the menu widget's
<code>button</code> elements configurable:</p>

<pre><code class=" javascript">$.Controller(<span class="string">"Menu"</span>,{
  <span class="string">"{button} {showEvent}"</span> : <span class="function"><span class="keyword">function</span><span class="params">(el)</span>{</span>
    el.children(<span class="string">'ul'</span>).show()
  }
})

$(<span class="string">'#buttonMenu'</span>).menu({button: <span class="string">"button"</span>});
</code></pre>

<h3>Templating the root element.</h3>

<p>Finally, controller lets you bind to objects outside 
of the <a href="#!jQuery.Controller.prototype.element">controller's element</a>.</p>

<p>The following listens to clicks on the window:</p>

<pre><code class=" javascript">$.Controller(<span class="string">"HideOnClick"</span>,{
  <span class="string">"{window} click"</span> : <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    <span class="keyword">this</span>.element.hide()
  }
})
</code></pre>

<p>The following listens to Todos being created:</p>

<pre><code class=" javascript">$.Controller(<span class="string">"NewTodos"</span>,{
  <span class="string">"{App.Models.Todo} created"</span> : <span class="function"><span class="keyword">function</span><span class="params">(Todo, ev, newTodo)</span>{</span>
    <span class="keyword">this</span>.element.append(<span class="string">"newTodos.ejs"</span>, newTodo)
  }
});
</code></pre>

<p>But instead of making NewTodos only work with the Todo model,
we can make it configurable:</p>

<pre><code class=" javascript">$.Controller(<span class="string">"Newbie"</span>,{
  <span class="string">"{model} created"</span> : <span class="function"><span class="keyword">function</span><span class="params">(Model, ev, newItem)</span>{</span>
    <span class="keyword">this</span>.element.append(<span class="keyword">this</span>.options.view, newItem)
  }
});

$(<span class="string">'#newItems'</span>).newbie({
  model: App.Models.Todo,
  view: <span class="string">"newTodos.ejs"</span>
})
</code></pre>

<h3>How Templated events work</h3>

<p>When looking up a value to replace <code>{}</code>,
controller first looks up the item in the options, then it looks
up the value in the window object.  It does not use eval to look up the
object.  Instead it uses <a href="#!jQuery.String.getObject">jQuery.String.getObject</a>.</p>

<h2>Subscribing to OpenAjax messages and custom bindings</h2>

<p>The jquery/controller/subscribe plugin allows controllers to listen
to OpenAjax.hub messages like:</p>

<pre><code class=" javascript">$.Controller(<span class="string">"Listener"</span>,{
  <span class="string">"something.updated subscribe"</span> : <span class="function"><span class="keyword">function</span><span class="params">(called, data)</span>{</span>

  }
})
</code></pre>

<p>You can create your own binders by adding to <a href="#!jQuery.Controller.static.processors">jQuery.Controller.processors</a>.</p>

<h2>Manually binding to events.</h2>

<p>The <a href="#!jQuery.Controller.prototype.bind">jQuery.Controller.bind</a> and <a href="#!jQuery.Controller.prototype.delegate">jQuery.Controller.delegate</a>
methods let you listen to events on other elements.  These event handlers will
be unbound when the controller instance is destroyed.</p></div>
			<div id="disqus_thread" style="display: none; "></div>
		</div>
	</div>
</div>
<div id="low">
	<a href="http://jupiterit.com">� Jupiter Consulting - JavaScriptMVC Training and Support</a>
	<a class="api_links" href="http://javascriptmvc.com/docs/api.html#&amp;who=api"></a>
</div>
<script type="text/javascript">
	DOCS_SRC_MAP = {
		'funcunit' : 'https://github.com/jupiterjs/funcunit',
		'jquery' : 'https://github.com/jupiterjs/jquerymx',
		'steal' : 'https://github.com/jupiterjs/steal',
		'documentjs' : 'https://github.com/jupiterjs/documentjs'
	};
	DOCS_LOCATION = "docs/" //adds searchData to this
	JMVCDOC_TIMESTAMP = 264302280
	COMMENTS_LOCATION = 'http://jmvcs3.disqus.com/embed.js';
</script>
<script type="text/javascript" src="../steal/steal.js?documentjs/jmvcdoc">
</script>

<style type="text/css">
  body > iframe { width: 0;} 
  #dsq-content #dsq-form-area .dsq-attach-media-container iframe { height: 13px; padding: 0;}
</style>
	

</body>
</html>