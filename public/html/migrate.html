<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head><script type="text/javascript" src="http://localhost:5555?[]&amp;_=0.9956871024332941"></script>
	<title>Upgrading to 3.2</title>
	<link rel="stylesheet" type="text/css" href="../documentjs/jmvcdoc/style.css">
	<link rel="shortcut icon" href="../documentjs/jmvcdoc/images/favicon.ico">
	<script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxxx-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<link rel="stylesheet" href="file:////Users/bmoschel/tools/workspace/javascriptmvc/documentjs/jmvcdoc/style.css" type="text/css"><script src="http://jmvcs3.disqus.com/thread.js?url=file:////Users/bmoschel/tools/workspace/javascriptmvc/jmvc/docs.html?steal%5Bbrowser%5D=phantomjs&steal%5BstartFiles%5D=steal/browser/phantomjs/client.js#!jQuery.Controller&amp;title=&amp;sort=&amp;per_page&amp;category_id=&amp;developer=0&amp;identifier=#!jQuery.Controller&amp;disqus_version=1318904734&amp;1318979590940" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="http://mediacdn.disqus.com/1318904734/build/system//defaults.css"><script src="http://mediacdn.disqus.com/1318904734/build/system/disqus.js?" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="http://mediacdn.disqus.com/1318904734/build/themes/t_c4ca4238a0b923820dcc509a6f75849b.css?1"></head><body>
<div id="documentation">
	<div id="top">
		<div class="topCorner">
			<div class="right"></div>
			<div class="left"></div>
		</div>
		<div class="content">
			<div id="searchRoundCorners">
				<div class="jmvcdoc_search"><input id="search" type="input"><span title="clear term" class="remove"></span></div>
			</div>
			<div id="defaults">
				<ul id="menu" class="ui-menu">
					<li class="ui-menu-item">
						<a class="menuLink" href="#favorites"><span class="menuSpan">Favorites</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../follow.html" title="Follow"><span class="menuSpan red">Follow</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../contribute.html" title="Contribute"><span class="menuSpan red">Contribute</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../code.html" title="Code"><span class="menuSpan red">Code</span></a>
					</li>
				</ul>
			</div>
			<div class="logo-text"><a href="http://javascriptmvc.com"><img src="../documentjs/jmvcdoc/images/logo80x30.png" class="logo-image"></a></div>
		</div>
		<div class="bottomCorner">
			<div>&nbsp;</div>
		</div>
	</div>
	<div id="bottom">
		<div id="nav" class="jmvcdoc_nav">


	<div id="selected">
		    
				
		<div class="content">
			    <a href="#!" class="selected choice page" style="padding-left: 20px">
			    	
					JavaScriptMVC
					
				</a>
				
		</div>
			
		<div class="spacer"><div>&nbsp;</div></div>
			
			
				
		<div class="content">
			    <a href="#!tutorials" class="selected choice page" style="padding-left: 20px">
			    	
						<span class="remove" title="close"></span>
					
					Tutorials
					
				</a>
				
		</div>
			
			
	</div>

<div id="results" style="display: block">
	<div class="content">
	    
			
		    <a href="#!installing" class="result choice page" style="padding-left: 20px">
		    	Installing JavaScriptMVC
			</a>
			
		
			
		    <a href="#!getstarted" class="result choice page" style="padding-left: 20px">
		    	Get Started with JavaScriptMVC
			</a>
			
		
			
		    <a href="#!mvc" class="result choice page" style="padding-left: 20px">
		    	Get Started with jQueryMX
			</a>
			
		
			
		    <a href="#!tutorials.steal" class="result choice page" style="padding-left: 20px">
		    	Get Started With StealJS
			</a>
			
		
			
		    <a href="#!funcunit.getstarted" class="result choice page" style="padding-left: 20px">
		    	Get Started with FuncUnit
			</a>
			
		
			
		    <a href="#!organizing" class="result choice page" style="padding-left: 20px">
		    	Organizing Your App
			</a>
			
		
			
		    <a href="#!ajaxy" class="result choice page" style="padding-left: 20px">
		    	Searchable Ajax Apps
			</a>
			
		
			
		    <a href="#!services" class="result choice page" style="padding-left: 20px">
		    	Ajax Service Guidelines
			</a>
			
		
			
		    <a href="#!migrate" class="result choice page open" style="padding-left: 20px">
		    	Upgrading to 3.2
			</a>
			
		
	</div>
</div>


</div>
		<div id="doc_container">
			<div id="doc" class="jmvcdoc_content">
<div class="top">
	<div class="content">
	    <h1>Upgrading to 3.2&nbsp;
	    	<span class="page type"><span class="typeEnd">page</span></span>&nbsp;
	    	<span class="favorite favoriteoff">&nbsp;&nbsp;&nbsp;</span></h1>
	    
	    
	    
		
		
	</div>	
</div>


<p>There are many new feature in JavaScriptMVC 3.2 that help you build great JavaScript applications.
Although 3.2 is not strictly backwards compatible it is possible to upgrade from
and earlier version. This guide outlines the things you have to look at when upgrading from
version 3.0 or 3.1.</p>

<h2>Steal</h2>

<p><a href="#!stealjs">Steal</a> has experienced a major improvement, making it even easier to manage your dependencies.
Instead of defining what you want to steal like <em>steal.plugins</em>, <em>steal.controllers</em> or <em>steal.views</em> you
just steal the file and Steal will figure out what to do with it based on the extension.
So if your code used to look like this:</p>

<pre><code class=" javascript">steal(<span class="string">'helper'</span>).plugins(<span class="string">'jquery/controller'</span>, <span class="string">'jquery/view/ejs'</span>, <span class="string">'jquery/controller/view'</span>).views(<span class="string">'init.ejs'</span>)
    .css(<span class="string">'style'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">($)</span> {</span>
    $.Controller(<span class="string">'Test.Controller'</span>, {}, {
        init : <span class="function"><span class="keyword">function</span><span class="params">(el, ops)</span>
        {</span>
            <span class="keyword">this</span>.element.html(<span class="keyword">this</span>.view());
        }
    });
});
</code></pre>

<p>The new Steal looks like this:</p>

<pre><code class=" javascript">steal(<span class="string">'./helper.js'</span>, <span class="string">'jquery/controller'</span>, <span class="string">'jquery/view/ejs'</span>, <span class="string">'./views/init.ejs'</span>, <span class="string">'./style.css'</span>, <span class="function"><span class="keyword">function</span><span class="params">($)</span> {</span>
    $.Controller(<span class="string">'Test.Controller'</span>, {}, {
        init : <span class="function"><span class="keyword">function</span><span class="params">(el, ops)</span>
        {</span>
            <span class="keyword">this</span>.element.html(<span class="keyword">this</span>.view());
        }
    });
});
</code></pre>

<p>The rules when stealing a file:</p>

<ul>
<li>./ refers to the path of the current file</li>
<li>When stealing something without extension like <em>jquery/controller</em> Steal will first look for the plugin
file <em>jquery/controller/controller.js</em> and if not found <em>jquery/controller.js</em> based on your applications
root path</li>
<li>./helper.js loads helper.js in the folder of the current file</li>
<li>./views/init.ejs loads the init.ejs <a href="#!jQuery.EJS">EJS view</a> from views subfolder in the current folder</li>
<li>./style.css loads the style.css file in the current folder</li>
</ul>

<p>Note that the new Steal runs asynchronously so you might have to be more careful using <em>steal.then()</em>
if there are dependencies that have to be loaded before another. This is also important when putting code
outside of steal. Because jQuery hasn't been loaded you can not use the jQuery object. So instead of
$(document).ready use this:</p>

<pre><code class=" javascript">steal.then(<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    $(<span class="string">'body'</span>).my_plugin();
});
</code></pre>

<h2>Organizing your application</h2>

<p>Starting with version 3.1 and fully encouraged in 3.2 JavaScriptMVC follows a new approach in organizing your application structure.
Read the complete guide on <a href="#!organizing">organizing your app</a> to get an idea. For migrating from the old structure
the following things are important:</p>

<ul>
<li>The use of the <em>controllers</em> folder is discouraged. You still can use it but organizing each controller in
their own folder with a views subfolder is the preferred way as it is a lot more obvious how your application
is split up and easier to test.</li>
<li>Models reside in their own folder as they might be application wide and not controller specific
(e.g. a recipe model will be used in a recipe_edit and a recipe_list controller)</li>
</ul>

<h2>Document controllers</h2>

<p>There are no document controllers in 3.2 anymore (controllers that used have the default option <em>{ onDocument : true }</em>).
Instead initialize your controllers like any <a href="#!jquery.controller.plugin">jQuery plugin</a> in the application file.
For document wide controllers initialize them on the document itself. 
An example how your main application file may look like:</p>

<pre><code class=" javascript">steal(<span class="string">'my/controller'</span>, <span class="string">'my/global/controller'</span>, <span class="function"><span class="keyword">function</span><span class="params">($)</span> {</span>
    $(document).ready(<span class="function"><span class="keyword">function</span><span class="params">($)</span> {</span>
        $(document).global_controller();
        $(<span class="string">'.thing'</span>).my_controlller();
    });
});
</code></pre>

<p>Note that unlike the old document controllers a global controller will not listen to a specific id.</p>

<h2>Listening to model changes</h2>

<p>The notifications via OpenAJAX have been dropped in favor of the <a href="#!jQuery.Observe">Observable</a> mechanism.
Check out the documentation on <a href="#!jquery.model.events">Model events</a> for detailed information on how use it for Models. </p>

<h2>Controller History</h2>

<p>Controller history using OpenAjax has been removed in 3.2. Use <a href="#!jQuery.route">jQuery.route</a> for full history and routing support.</p></div>
			<div id="disqus_thread"><div id="dsq-content-stub"><img width="71" height="17" alt="DISQUS" src="data:image/png;base64,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"><img width="16" height="11" alt="..." src="data:image/gif;base64,R0lGODlhEAALAPQAAP///z2LqeLt8dvp7u7090GNqz2LqV+fuJ/F1IW2ycrf51aatHWswaXJ14i4ys3h6FmctUCMqniuw+vz9eHs8fb5+meku+Tu8vT4+cfd5bbT3tbm7PH2+AAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA" style="margin:0 0 3px 5px"></div><div id="dsq-content" style="display: none; "></div></div>
      <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
		</div>
	</div>
</div>
<div id="low">
	<a href="http://jupiterit.com">� Jupiter Consulting - JavaScriptMVC Training and Support</a>
	<a class="api_links" href="http://javascriptmvc.com/docs/api.html#&amp;who=api"></a>
</div>
<script type="text/javascript">
	DOCS_LOCATION = "docs/" //adds searchData to this
	JMVCDOC_TIMESTAMP = 263793756
</script>
<script type="text/javascript" src="../steal/steal.js?documentjs/jmvcdoc">
</script>
<script type="text/javascript">
  window.disqus_identifier = window.location.hash;
  window.disqus_url = window.location.toString();
  steal('jquery/dom/route', 'http://jmvcs3.disqus.com/embed.js').then(function(){
    $.route.delegate('who', 'change', function(ev, attr, how, newVal, oldVal) {
		if (window.location.protocol !== "file:") { // avoid this for crawl script
			  DISQUS.reset({
			    reload: true,
			    config: function () {  
			      this.page.identifier = window.location.hash;  
			      this.page.url = window.location.toString();
			    }
			  });
	     }
    })
  });
</script>
<style type="text/css">
  body > iframe { width: 0;} 
  #dsq-content #dsq-form-area .dsq-attach-media-container iframe { height: 13px; padding: 0;}
</style>
	

</body>
</html>