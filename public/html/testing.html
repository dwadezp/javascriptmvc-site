<head><script type="text/javascript" src="http://localhost:5555?[]&amp;_=0.9008395199198276"></script>
	<title>JavaScriptMVC</title>
	<link rel="stylesheet" type="text/css" href="../documentjs/jmvcdoc/style.css">
	<link rel="shortcut icon" href="../documentjs/jmvcdoc/images/favicon.ico">
<link rel="stylesheet" href="file:////Users/alexisabril/Projects/javascriptmvc/documentjs/jmvcdoc/style.css" type="text/css"><script src="http://jmvcs3.disqus.com/thread.js?url=file:////Users/alexisabril/Projects/javascriptmvc/jmvc/docs.html?steal%5Bbrowser%5D=phantomjs&steal%5BstartFiles%5D=steal/browser/phantomjs/client.js#!jQuery.Range.static.current&amp;title=&amp;sort=&amp;per_page&amp;category_id=&amp;developer=0&amp;identifier=#!jQuery.Range.static.current&amp;disqus_version=1318875915&amp;1318909410847" charset="UTF-8"></script><link rel="stylesheet" type="text/css" href="http://mediacdn.disqus.com/1318875915/build/system//defaults.css"><script src="http://mediacdn.disqus.com/1318875915/build/system/disqus.js?" charset="UTF-8"></script></head><body>
<div id="documentation">
	<div id="top">
		<div class="topCorner">
			<div class="right"></div>
			<div class="left"></div>
		</div>
		<div class="content">
			<div id="searchRoundCorners">
				<div class="jmvcdoc_search"><input id="search" type="input"><span title="clear term" class="remove"></span></div>
			</div>
			<div id="defaults">
				<ul id="menu" class="ui-menu">
					<li class="ui-menu-item">
						<a class="menuLink" href="#favorites"><span class="menuSpan">Favorites</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../follow.html" title="Follow"><span class="menuSpan red">Follow</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../contribute.html" title="Contribute"><span class="menuSpan red">Contribute</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../code.html" title="Code"><span class="menuSpan red">Code</span></a>
					</li>
				</ul>
			</div>
			<div class="logo-text"><a href="http://javascriptmvc.com"><img src="../documentjs/jmvcdoc/images/logo80x30.png" class="logo-image"></a></div>
		</div>
		<div class="bottomCorner">
			<div>&nbsp;</div>
		</div>
	</div>
	<div id="bottom">
		<div id="nav" class="jmvcdoc_nav">


	<div id="selected">
		    
				
		<div class="content">
			    <a href="#!" class="selected choice page" style="padding-left: 20px">
			    	
					JavaScriptMVC
					
				</a>
				
		</div>
			
		<div class="spacer"><div>&nbsp;</div></div>
			
			
				
		<div class="content">
			    <a href="#!tutorials" class="selected choice page" style="padding-left: 20px">
			    	
						<span class="remove" title="close"></span>
					
					Tutorials
					
				</a>
				
		</div>
			
		<div class="spacer"><div>&nbsp;</div></div>
			
			
				
		<div class="content">
			    <a href="#!getstarted" class="selected choice page" style="padding-left: 20px">
			    	
						<span class="remove" title="close"></span>
					
					Get Started with JavaScriptMVC
					
				</a>
				
		</div>
			
			
	</div>

<div id="results" style="display: block">
	<div class="content">
	    
			
		    <a href="#!creating" class="result choice page" style="padding-left: 20px">
		    	Creating Cookbook
			</a>
			
		
			
		    <a href="#!testing" class="result choice page open" style="padding-left: 20px">
		    	Testing Cookbook
			</a>
			
		
			
		    <a href="#!compressing" class="result choice page" style="padding-left: 20px">
		    	Compressing Cookbook
			</a>
			
		
			
		    <a href="#!documenting" class="result choice page" style="padding-left: 20px">
		    	Documenting Cookbook
			</a>
			
		
	</div>
</div>


</div>
		<div id="doc_container">
			<div id="doc" class="jmvcdoc_content">
<div class="top">
	<div class="content">
	    <h1>Testing Cookbook&nbsp;
	    	<span class="page type"><span class="typeEnd">page</span></span>&nbsp;
	    	<span class="favorite favoriteoff">&nbsp;&nbsp;&nbsp;</span></h1>
	    
	    
	    
		
		
	</div>	
</div>


<p>JavaScriptMVC puts a tremendous emphasis on 
testing. It uses <a href="#!FuncUnit">FuncUnit</a> to provide easy to write functional and
unit tests that can be run in the browser or automated!</p>

<p>When you scaffolded recipe, it created tests for you.  This guide will show you how to:</p>

<ul>
<li>Run unit tests.</li>
<li>Understand the unit tests.</li>
<li>Run functional tests.</li>
<li>Understand the functional tests.</li>
<li>Test isTasty functionality.</li>
</ul>

<h2>Run Unit Tests</h2>

<p>FuncUnit uses QUnit unit test things like models and basic plugins.  You can run these
tests in the browser or Envjs (and now PhantomJS with a little extra work).</p>

<h3>Run Unit Tests in the Browser</h3>

<p>Open <code>cookbook/qunit.html</code>.  You should see something like:</p>

<p><img class="image_tag" src="file:////Users/alexisabril/Projects/javascriptmvc/jmvc/images/test_cookbook_example.png"></p>

<p>We'll see how this works in a second.  First, lets run the unit tests
in Envjs.</p>

<h3>Run Unit Tests in Envjs</h3>

<p>Envjs is a JavaScript-based browser for Rhino.  FuncUnit
can run your tests in this simulated environment.  </p>

<p>In a command window type:</p>

<pre><code class="javascript">&gt; js funcunit/run envjs cookbook/qunit.html</code></pre>

<p>This runs qunit.html in a simulated 
browser environment.  The output should look like:</p>

<p><img src="http://wiki.javascriptmvc.com/wiki/images/2/24/Qunit-envjs.png" width="500px"></p>

<h2>Understanding the Unit Tests</h2>

<p>FuncUnit uses <a href="http://docs.jquery.com/QUnit">QUnit</a> for assertions and
organizing them into tests and modules.  The best place to start understanding the
unit tests is to read through <a href="http://docs.jquery.com/QUnit">QUnit's documentation</a>.</p>

<p><strong>cookbook/qunit.html</strong> loads <a href="#!steal">steal</a> and tells it to load
<code>cookbook/test/qunit/qunit.js</code> which loads your unit tests:</p>

<ul>
<li><code>cookbook/test/qunit/cookbook_test.js</code></li>
<li><code>cookbook/test/qunit/recipe_test.js</code></li>
</ul>

<p>These files steal <code>funcunit/qunit</code> then 
declare tests that get run once 
all scripts have loaded.</p>

<p>Open <strong>cookbook/test/qunit/recipe_test.js</strong>, 
and lets see how the <strong>findAll</strong> test works:</p>

<pre><code class=" javascript"><span class="comment">//creates a test</span>
test(<span class="string">"findAll"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
  <span class="comment">//prevents the next test from running</span>
  stop(<span class="number">2000</span>);

  <span class="comment">//requests recipes</span>
  Cookbook.Models.Recipe.findAll({}, <span class="function"><span class="keyword">function</span><span class="params">(recipes)</span>{</span>

    <span class="comment">//makes sure we have something</span>
    ok(recipes)

    <span class="comment">//makes sure we have at least 1 recipe</span>
    ok(recipes.length)

    <span class="comment">//makes sure a recipe looks right</span>
    ok(recipes[<span class="number">0</span>].name)
    ok(recipes[<span class="number">0</span>].description)

    <span class="comment">//allows the next test to start</span>
    start()
  });
})
</code></pre>

<h2>Run Functional Tests</h2>

<p>Functional tests are used to test things 
that require user interaction like widgets that listen for 
clicks and key events.</p>

<p>Cookbook's functional tests test the recipe create and recipe lists widgets.</p>

<h3>Run Functional Tests in the Browser</h3>

<p>Open <code>cookbook/funcunit.html</code>.  You should see something like:</p>

<p><img src="http://wiki.javascriptmvc.com/wiki/images/b/b6/Funcunit.png"></p>

<h3>Run Functional Tests in Selenium</h3>

<p><a href="http://seleniumhq.org/">Selenium</a> can automate launching browsers and is packaged
with FuncUnit.</p>

<p>In a command window type:</p>

<pre><code class="javascript">&gt; js funcunit\run selenium cookbook\funcunit.html</code></pre>

<p>This should open Firefox and IE if you are using Windows.  The results of the
test should look like:</p>

<p><img src="http://wiki.javascriptmvc.com/wiki/images/a/a7/Funcunit-envjs.png" width="500px"></p>

<div class="whisper">
    If Selenium is unable to open your browsers, it's likely you have them in an
    unusual location.  Read [FuncUnit.static.browsers] for information on how to configure browsers
    so selenium can find them.
</div>

<p>If you are having trouble running the tests in Internet Explorer, you need to change a 
few settings in the browser.  Please see the <a href="#!FuncUnit">FuncUnit documentation</a> for troubleshooting help.</p>

<h2>Understanding FuncUnit Tests</h2>

<p>FuncUnit adds to QUnit the ability to open another page, in this case
<code>cookbook/cookbook.html</code>, perform actions on it, and
get information from it.</p>

<p>The <code>cookbook/funcunit.html</code>  page
works just like <code>qunit.html</code> except the 'funcunit' plugin is loaded which 
provides <a href="#!FuncUnit">FuncUnit</a>.  FuncUnit is aliased to "<b>S</b>" to highlight the similarity between its API
and jQuery's API.</p>

<p>Let take a quick look at a FuncUnit test:</p>

<pre><code class="javascript">test(<span class="string">"create recipes"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>

  <span class="comment">//type Ice in the name field</span>
  S(<span class="string">"[name=name]"</span>).type(<span class="string">"Ice"</span>)

  <span class="comment">//type Cold Water in the description field</span>
  S(<span class="string">"[name=description]"</span>).type(<span class="string">"Cold Water"</span>)

  <span class="comment">//click the submit button</span>
  S(<span class="string">"[type=submit]"</span>).click()

  <span class="comment">//wait until the 2nd recipe exists</span>
  S(<span class="string">'.recipe:nth-child(2)'</span>).exists()

  <span class="comment">//Gets the text of the first td</span>
  S(<span class="string">'.recipe:nth-child(2) td:first'</span>).text(<span class="function"><span class="keyword">function</span><span class="params">(text)</span>{</span>

    <span class="comment">//checks taht it has ice</span>
    ok(text.match(<span class="regexp">/Ice/</span>), <span class="string">"Typed Ice"</span>);
  });

})</code></pre>

<p>Functional tests are largely many asynchronous actions 
(clicks and keypresses)
with relatively few checks/assertions. <br>
FuncUnit's goal is to provide as readable and linear syntax as possible.
FuncUnit statements are actually stored and then run asynchronously.  This requires that
getting a value from the page happens in a callback function.</p>

<p>For more information on FuncUnit, read its <a href="#!FuncUnit">documentation</a></p></div>
			<div id="disqus_thread">We were unable to load Disqus. If you are a moderator please see our <a href="http://docs.disqus.com/help/83/">documentation on identifier and urls</a>.</div>
      <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
		</div>
	</div>
</div>
<div id="low">
	<a href="http://jupiterit.com">� Jupiter IT - JavaScriptMVC Training and Support</a>
	<a class="api_links" href="http://javascriptmvc.com/docs/api.html#&amp;who=api"></a>
</div>
<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("<script src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'></script>"));
	GOOGLE_ANALYTICS_TRACKER_ID = "UA-xxxxxxxx-x";
</script><script src="http://www.google-analytics.com/ga.js" type="text/javascript"></script>
<script type="text/javascript">
	DOCS_LOCATION = "docs/" //adds searchData to this
	JMVCDOC_TIMESTAMP = 263779778
</script>
<script type="text/javascript" src="../steal/steal.js?documentjs/jmvcdoc">
</script>
<script type="text/javascript">
  window.disqus_identifier = window.location.hash;
  window.disqus_url = window.location.toString();
  steal('jquery/dom/route', 'http://jmvcs3.disqus.com/embed.js').then(function(){
    $.route.delegate('who', 'change', function(ev, attr, how, newVal, oldVal) {
	if (window.location.protocol !== "file:") { // avoid this for crawl script
		DISQUS.reset({
			reload: true,
			config: function(){
				this.page.identifier = window.location.hash;
				this.page.url = window.location.toString();
			}
		});
	}
    })
  });
</script>
<style type="text/css">
  body > iframe { width: 0;} 
  #dsq-content #dsq-form-area .dsq-attach-media-container iframe { height: 13px; padding: 0;}
</style>
	

</body>