<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
		"http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head><script type="text/javascript" src="http://localhost:5555?[]&amp;_=0.8273568612057716"></script>
	<title>View</title>
	<link rel="stylesheet" type="text/css" href="../documentjs/jmvcdoc/style.css">
	<link rel="shortcut icon" href="../documentjs/jmvcdoc/images/favicon.ico">
	<script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxxx-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<link rel="stylesheet" href="file:////Users/alexisabril/Projects/javascriptmvc-site/javascriptmvc/documentjs/jmvcdoc/style.css" type="text/css"></head><body>
<div id="documentation">
	<div id="top">
		<div class="topCorner">
			<div class="right"></div>
			<div class="left"></div>
		</div>
		<div class="content">
			<div id="searchRoundCorners">
				<div class="jmvcdoc_search"><input id="search" type="input"><span title="clear term" class="remove"></span></div>
			</div>
			<div id="defaults">
				<ul id="menu" class="ui-menu">
					<li class="ui-menu-item">
						<a class="menuLink" href="#favorites"><span class="menuSpan">Favorites</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../follow.html" title="Follow"><span class="menuSpan red">Follow</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../contribute.html" title="Contribute"><span class="menuSpan red">Contribute</span></a>
					</li>
					<li class="ui-menu-item">
						<a class="menuLink" href="../code.html" title="Code"><span class="menuSpan red">Code</span></a>
					</li>
				</ul>
			</div>
			<div class="logo-text"><a href="http://javascriptmvc.com"><img src="../documentjs/jmvcdoc/images/logo80x30.png" class="logo-image"></a></div>
		</div>
		<div class="bottomCorner">
			<div>&nbsp;</div>
		</div>
	</div>
	<div id="bottom">
		<div id="nav" class="jmvcdoc_nav">


	<div id="selected">
		    
				
		<div class="content">
			    <a href="#!" class="selected choice page" style="padding-left: 20px">
			    	
					JavaScriptMVC
					
				</a>
				
		</div>
			
		<div class="spacer"><div>&nbsp;</div></div>
			
			
				
		<div class="content">
			    <a href="#!tutorials" class="selected choice page" style="padding-left: 20px">
			    	
						<span class="remove" title="close"></span>
					
					Tutorials
					
				</a>
				
		</div>
			
		<div class="spacer"><div>&nbsp;</div></div>
			
			
				
		<div class="content">
			    <a href="#!mvc" class="selected choice page" style="padding-left: 20px">
			    	
						<span class="remove" title="close"></span>
					
					Get Started with jQueryMX
					
				</a>
				
		</div>
			
			
	</div>

<div id="results" style="display: block">
	<div class="content">
	    
			
		    <a href="#!mvc.class" class="result choice page" style="padding-left: 20px">
		    	Class
			</a>
			
		
			
		    <a href="#!mvc.model" class="result choice page" style="padding-left: 20px">
		    	Model
			</a>
			
		
			
		    <a href="#!mvc.view" class="result choice page open" style="padding-left: 20px">
		    	View
			</a>
			
		
			
		    <a href="#!mvc.controller" class="result choice page" style="padding-left: 20px">
		    	Controller
			</a>
			
		
	</div>
</div>


</div>
		<div id="doc_container">
			<div id="doc" class="jmvcdoc_content">
<div class="top">
	<div class="content">
	    <h1>View&nbsp;
	    	<span class="page type"><span class="typeEnd">page</span></span>&nbsp;
	    	<span class="favorite favoriteoff">&nbsp;&nbsp;&nbsp;</span></h1>
	    
	    
	    
		
		
		
	</div>	
</div>


<p>JavaScriptMVC's views are really just client side templates. Client side templates take data and return a string.  Typically, the strings are HTML intended to be inserted into the DOM. </p>

<p>$.View is a templating interface that takes care of complexities using templates:</p>

<ul>
<li>Convenient and uniform syntax</li>
<li>Template loading from html elements or external files</li>
<li>Synchronous or asynchronous template loading</li>
<li>Template preloading</li>
<li>Caching of processed templates</li>
<li>Bundling of processed templates in production builds</li>
<li>$.Deferred support</li>
</ul>

<p>JavaScriptMVC comes pre-packaged with 4 different template engines:</p>

<ul>
<li>EJS</li>
<li>JAML</li>
<li>Micro</li>
<li>Tmpl</li>
</ul>

<p>This tutorial uses EJS templates, but all the following techniques will work with any template engine with minor syntax differences.</p>

<h3>Basic Use</h3>

<p>When using views, you almost always want to insert the results of a rendered template into the page. jQuery.View overwrites the jQuery modifiers so using a view is as easy as:</p>

<pre><code class=" javascript">$(<span class="string">"#foo"</span>).html(<span class="string">'mytemplate.ejs'</span>,{message: <span class="string">'hello world'</span>})
</code></pre>

<p>This code:</p>

<ol>
<li><p>Loads the template in file 'mytemplate.ejs'. It might look like:</p>

<pre><code class=" javascript">&lt;h2&gt;&lt;%= message %&gt;&lt;/h2&gt;
</code></pre></li>
<li><p>Renders it with {message: 'hello world'}, resulting in:</p>

<pre><code class=" javascript">&lt;h2&gt;hello world&lt;/h2&gt;
</code></pre></li>
<li><p>Inserts the result into the foo element. Foo might look like:</p>

<pre><code class=" javascript">&lt;div id=<span class="string">'foo'</span>&gt;&lt;h2&gt;hello world&lt;<span class="regexp">/h2&gt;&lt;/</span>div&gt;
</code></pre></li>
</ol>

<h3>jQuery Modifiers</h3>

<p>You can use a template with the following jQuery modifier methods:</p>

<pre><code class=" javascript">$(<span class="string">'#bar'</span>).after(<span class="string">'temp.ejs'</span>,{});
$(<span class="string">'#bar'</span>).append(<span class="string">'temp.ejs'</span>,{});
$(<span class="string">'#bar'</span>).before(<span class="string">'temp.ejs'</span>,{});
$(<span class="string">'#bar'</span>).html(<span class="string">'temp.ejs'</span>,{});
$(<span class="string">'#bar'</span>).prepend(<span class="string">'temp.ejs'</span>,{});
$(<span class="string">'#bar'</span>).replaceWith(<span class="string">'temp.ejs'</span>,{});
$(<span class="string">'#bar'</span>).text(<span class="string">'temp.ejs'</span>,{});
</code></pre>

<h3>Loading from a script tag</h3>

<p>View can load from script tags or from files. To load from a script tag, create a script tag with a type attribute set to the template type (<code>text/ejs</code>) and an id to label the template:</p>

<pre><code class=" javascript">&lt;script type=<span class="string">'text/ejs'</span> id=<span class="string">'recipesEJS'</span>&gt;
&lt;% <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; recipes.length; i++){ %&gt;
  &lt;li&gt;&lt;%=recipes[i].name %&gt;&lt;/li&gt;
&lt;%} %&gt;
&lt;/script&gt;
</code></pre>

<p>Render with this template like:</p>

<pre><code class=" javascript">$(<span class="string">"#foo"</span>).html(<span class="string">'recipesEJS'</span>, recipeData)
</code></pre>

<p>Notice we passed the id of the element we want to render.</p>

<h3>$.View and Sub-templates</h3>

<p>Sometimes, you simply want the rendered string.  In this case, you can use <code>$.View(TEMPLATE , data )</code> directly.  Pass $.View the path to the template and the data you want to render:</p>

<pre><code class=" javascript"><span class="keyword">var</span> html = $.View(<span class="string">"template/items.ejs"</span>, items );
</code></pre>

<p>The most common use case is sub templates.  It's common practice to separate out an individual item's template from the items template.  We'll make <code>template/items.ejs</code> render an <code>&lt;LI&gt;</code> for each item, but use the template in <code>template/item.ejs</code> for the content of each item.</p>

<pre><code class=" javascript">&lt;% <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++){ %&gt;
  &lt;li&gt;
    &lt;%= $.View(<span class="string">"template/item.ejs"</span>, <span class="keyword">this</span>[i]);  
  &lt;/li&gt;
&lt; % } %&gt;
</code></pre>

<p>Notice, in the template <code>this</code> refers to the data passed to the template. In the case of <code>template/items.ejs</code>, <code>this</code> is the array of items.  In <code>template/item.ejs</code> it will be the individual item.</p>

<h3>Deferreds</h3>

<p>It's extremely common behavior to make an Ajax request and use a template to render the result.  Using the Task model from the previous $.Model section, we could render tasks like:</p>

<pre><code class=" javascript">Task.findAll({}, <span class="function"><span class="keyword">function</span><span class="params">(tasks)</span>{</span>
  $(<span class="string">'#tasks'</span>).html(<span class="string">"views/tasks.ejs"</span> , tasks )
})
</code></pre>

<p>$.View supports <a href="http://api.jquery.com/category/deferred-object/">$.Deferred</a> allowing very powerful, terse, and high performance syntax.  If a deferred is found in the render data passed to $.View or the jQuery modifiers, $.View will load the template asynchronously and wait until all deferreds and the template are loaded before rendering the template.</p>

<p>The Model methods <code>findAll</code>, <code>findOne</code>, <code>save</code> or <code>destroy</code> return deferreds.  This allows us to rewrite the rendering of tasks into a one liner!</p>

<pre><code class=" javascript">$(<span class="string">'#tasks'</span>).html(<span class="string">"views/tasks.ejs"</span> , Task.findAll() )
</code></pre>

<p>This works with multiple deferreds too:</p>

<pre><code class=" javascript">$(<span class="string">'#app'</span>).html(<span class="string">"views/app.ejs"</span> , {
  tasks: Task.findAll(),
  users: User.findAll()
})
</code></pre>

<h3>Packaging, Preloading, and Performance</h3>

<p>By default, $.View loads templates synchronously.  This is because it's expected that you are either:</p>

<ul>
<li>Putting templates in script tags,</li>
<li>Packaging templates with your JavaScript build, or</li>
<li>Preloading templates</li>
</ul>

<p>JavaScriptMVC does not recommend putting templates in script tags.  Script tag templates make it hard to reuse templates across different JavaScript applications.  They can also reduce load performance if your app doesn't need the templates immediately.</p>

<p>JavaScriptMVC recommends packaging initially used templates with your application's JavaScript and preloading templates that will be used later.</p>

<p>StealJS, JavaScriptMVC's build system, can process and package templates, adding them to a minified production build.  Simply point <code>steal.views(PATH, ...)</code> to your template.  </p>

<pre><code class=" javascript">steal.views(<span class="string">'tasks.ejs'</span>,<span class="string">'task.ejs'</span>);
</code></pre>

<p>Later, when $.View looks for that template it will use a cached copy, saving an extra Ajax request.</p>

<p>For templates that are not used immediately, preload and cache template them with <code>jQuery.get</code>.  Simply provide the url to the template and provide a dataType of 'view'.  It's best to do this a short time after the inital page has loaded:</p>

<pre><code class=" javascript">$(window).load(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
  setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>
    $.get(<span class="string">'users.ejs'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>},<span class="string">'view'</span>);
    $.get(<span class="string">'user.ejs'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span>},<span class="string">'view'</span>);
  },<span class="number">500</span>)
})
</code></pre>

<p>Please continue to <a href="#!mvc.controller">Controller</a>.</p></div>
			<div id="disqus_thread" style="display: none; "></div>
		</div>
	</div>
</div>
<div id="low">
	<a href="http://jupiterit.com">� Jupiter Consulting - JavaScriptMVC Training and Support</a>
	<a class="api_links" href="http://javascriptmvc.com/docs/api.html#&amp;who=api"></a>
</div>
<script type="text/javascript">
	DOCS_SRC_MAP = {
		'funcunit' : 'https://github.com/jupiterjs/funcunit',
		'jquery' : 'https://github.com/jupiterjs/jquerymx',
		'steal' : 'https://github.com/jupiterjs/steal',
		'documentjs' : 'https://github.com/jupiterjs/documentjs'
	};
	DOCS_LOCATION = "docs/" //adds searchData to this
	JMVCDOC_TIMESTAMP = 264302280
	COMMENTS_LOCATION = 'http://jmvcs3.disqus.com/embed.js';
</script>
<script type="text/javascript" src="../steal/steal.js?documentjs/jmvcdoc">
</script>

<style type="text/css">
  body > iframe { width: 0;} 
  #dsq-content #dsq-form-area .dsq-attach-media-container iframe { height: 13px; padding: 0;}
</style>
	

</body>
</html>