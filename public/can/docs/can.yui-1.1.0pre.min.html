<!DOCTYPE html>  <html> <head>   <title>can.yui-1.1.0pre.min.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="amd.html">                 amd.js               </a>                                           <a class="source" href="construct.html">                 construct.js               </a>                                           <a class="source" href="proxy.html">                 proxy.js               </a>                                           <a class="source" href="super.html">                 super.js               </a>                                           <a class="source" href="control.html">                 control.js               </a>                                           <a class="source" href="plugin.html">                 plugin.js               </a>                                           <a class="source" href="view.html">                 view.js               </a>                                           <a class="source" href="model.html">                 model.js               </a>                                           <a class="source" href="observe.html">                 observe.js               </a>                                           <a class="source" href="attributes.html">                 attributes.js               </a>                                           <a class="source" href="backup.html">                 backup.js               </a>                                           <a class="source" href="compute.html">                 compute.js               </a>                                           <a class="source" href="delegate.html">                 delegate.js               </a>                                           <a class="source" href="setter.html">                 setter.js               </a>                                           <a class="source" href="validations.html">                 validations.js               </a>                                           <a class="source" href="route.html">                 route.js               </a>                                           <a class="source" href="each.html">                 each.js               </a>                                           <a class="source" href="can.html">                 can.js               </a>                                           <a class="source" href="deferred.html">                 deferred.js               </a>                                           <a class="source" href="dojo.html">                 dojo.js               </a>                                           <a class="source" href="event.html">                 event.js               </a>                                           <a class="source" href="fragment.html">                 fragment.js               </a>                                           <a class="source" href="jquery.html">                 jquery.js               </a>                                           <a class="source" href="mootools.html">                 mootools.js               </a>                                           <a class="source" href="object.html">                 object.js               </a>                                           <a class="source" href="extend.html">                 extend.js               </a>                                           <a class="source" href="isplain.html">                 isplain.js               </a>                                           <a class="source" href="string.html">                 string.js               </a>                                           <a class="source" href="deparam.html">                 deparam.js               </a>                                           <a class="source" href="yui.html">                 yui.js               </a>                                           <a class="source" href="zepto.html">                 zepto.js               </a>                                           <a class="source" href="data.html">                 data.js               </a>                                           <a class="source" href="view.html">                 view.js               </a>                                           <a class="source" href="ejs.html">                 ejs.js               </a>                                           <a class="source" href="modifiers.html">                 modifiers.js               </a>                                           <a class="source" href="render.html">                 render.js               </a>                                           <a class="source" href="scanner.html">                 scanner.js               </a>                                           <a class="source" href="can.dojo-1.1.0pre.html">                 can.dojo-1.1.0pre.js               </a>                                           <a class="source" href="can.dojo-1.1.0pre.min.html">                 can.dojo-1.1.0pre.min.js               </a>                                           <a class="source" href="can.jquery-1.1.0pre.html">                 can.jquery-1.1.0pre.js               </a>                                           <a class="source" href="can.jquery-1.1.0pre.min.html">                 can.jquery-1.1.0pre.min.js               </a>                                           <a class="source" href="can.mootools-1.1.0pre.html">                 can.mootools-1.1.0pre.js               </a>                                           <a class="source" href="can.mootools-1.1.0pre.min.html">                 can.mootools-1.1.0pre.min.js               </a>                                           <a class="source" href="can.yui-1.1.0pre.html">                 can.yui-1.1.0pre.js               </a>                                           <a class="source" href="can.yui-1.1.0pre.min.html">                 can.yui-1.1.0pre.min.js               </a>                                           <a class="source" href="can.zepto-1.1.0pre.html">                 can.zepto-1.1.0pre.js               </a>                                           <a class="source" href="can.zepto-1.1.0pre.min.html">                 can.zepto-1.1.0pre.min.js               </a>                                           <a class="source" href="can.construct.proxy-1.1.0pre.html">                 can.construct.proxy-1.1.0pre.js               </a>                                           <a class="source" href="can.construct.super-1.1.0pre.html">                 can.construct.super-1.1.0pre.js               </a>                                           <a class="source" href="can.control.plugin-1.1.0pre.html">                 can.control.plugin-1.1.0pre.js               </a>                                           <a class="source" href="can.control.view-1.1.0pre.html">                 can.control.view-1.1.0pre.js               </a>                                           <a class="source" href="can.fixture-1.1.0pre.html">                 can.fixture-1.1.0pre.js               </a>                                           <a class="source" href="can.observe.attributes-1.1.0pre.html">                 can.observe.attributes-1.1.0pre.js               </a>                                           <a class="source" href="can.observe.backup-1.1.0pre.html">                 can.observe.backup-1.1.0pre.js               </a>                                           <a class="source" href="can.observe.delegate-1.1.0pre.html">                 can.observe.delegate-1.1.0pre.js               </a>                                           <a class="source" href="can.observe.setter-1.1.0pre.html">                 can.observe.setter-1.1.0pre.js               </a>                                           <a class="source" href="can.observe.validations-1.1.0pre.html">                 can.observe.validations-1.1.0pre.js               </a>                                           <a class="source" href="can.view.modifiers-1.1.0pre.html">                 can.view.modifiers-1.1.0pre.js               </a>                                           <a class="source" href="can.view.mustache-1.1.0pre.html">                 can.view.mustache-1.1.0pre.js               </a>                                           <a class="source" href="qunit.html">                 qunit.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               can.yui-1.1.0pre.min.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">can</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;undefined&quot;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">GLOBALCAN</span> <span class="o">||</span> <span class="o">!</span><span class="mi">1</span> <span class="o">!==</span> <span class="nx">GLOBALCAN</span><span class="p">)</span> <span class="nx">o</span><span class="p">.</span><span class="nx">can</span> <span class="o">=</span> <span class="nx">c</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">isDeferred</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">then</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">pipe</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">addEvent</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">__bindEvents</span> <span class="o">||</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">__bindEvents</span> <span class="o">=</span> <span class="p">{});</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">__bindEvents</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">__bindEvents</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">__bindEvents</span><span class="p">[</span><span class="nx">d</span><span class="p">].</span><span class="nx">push</span><span class="p">({</span>
      <span class="nx">handler</span><span class="o">:</span> <span class="nx">b</span><span class="p">,</span>
      <span class="nx">name</span><span class="o">:</span> <span class="nx">a</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="k">this</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">removeEvent</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">__bindEvents</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__bindEvents</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]],</span> <span class="nx">f</span><span class="p">;</span> <span class="nx">d</span> <span class="o">&lt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;)</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">f</span><span class="p">.</span><span class="nx">handler</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">||</span> <span class="o">!</span><span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">f</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">a</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d</span><span class="o">++</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">dispatch</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">__bindEvents</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">__bindEvents</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="nx">d</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">[]);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="nx">b</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span>
      <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">Sa</span> <span class="o">=</span> <span class="sr">/^\s*&lt;(\w+)[^&gt;]*&gt;/</span><span class="p">,</span>
    <span class="nx">Ta</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">b</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">Sa</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">RegExp</span><span class="p">.</span><span class="nx">$1</span><span class="p">);</span>
      <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/gi</span><span class="p">,</span> <span class="s2">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span><span class="p">));</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
      <span class="s2">&quot;tbody&quot;</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">||</span> <span class="s2">&quot;tfoot&quot;</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">||</span> <span class="s2">&quot;thead&quot;</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">?</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;table&gt;&quot;</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">===</span> <span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">e</span><span class="p">.</span><span class="nx">lastChild</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;tr&quot;</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">?</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&quot;</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">===</span> <span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">e</span><span class="p">.</span><span class="nx">lastChild</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;td&quot;</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">||</span> <span class="s2">&quot;th&quot;</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">?</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&quot;</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">===</span> <span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">e</span><span class="p">.</span><span class="nx">lastChild</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;option&quot;</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">?</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;select&gt;&quot;</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot;&lt;/select&gt;&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">===</span> <span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">e</span><span class="p">.</span><span class="nx">lastChild</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">;</span>
      <span class="nx">e</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="nx">d</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">f</span> <span class="o">&lt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">f</span><span class="o">++</span><span class="p">)</span> <span class="nx">e</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="nx">f</span><span class="p">];</span>
      <span class="k">return</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">buildFragment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">Ta</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/@@!!@@/g</span><span class="p">);</span>
    <span class="nx">frag</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="kc">null</span> <span class="o">===</span> <span class="nx">a</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">frag</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">});</span>
    <span class="mi">0</span> <span class="o">&lt;</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">frag</span><span class="p">.</span><span class="nx">lastChild</span> <span class="o">&amp;&amp;</span> <span class="mi">3</span> <span class="o">===</span> <span class="nx">frag</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">&amp;&amp;</span> <span class="nx">frag</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="nx">frag</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">textContent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;@@!!@@&quot;</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">frag</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">frag</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">textContent</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">frag</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">textContent</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="nx">frag</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">textContent</span><span class="p">.</span><span class="nx">length</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">frag</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">each</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">f</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;number&quot;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">pop</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">attr</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="mi">1</span> <span class="o">!==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span> <span class="o">||</span> <span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span> <span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span> <span class="nx">c</span><span class="o">++</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="nx">f</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="mi">1</span> <span class="o">===</span> <span class="nx">b</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">d</span> <span class="o">||</span> <span class="nx">a</span><span class="p">[</span><span class="nx">f</span><span class="p">],</span> <span class="nx">a</span><span class="p">[</span><span class="nx">f</span><span class="p">],</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">a</span><span class="p">))</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">a</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">Q</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">isPlainObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">a</span> <span class="o">||</span> <span class="s2">&quot;object&quot;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">||</span> <span class="kc">null</span> <span class="o">!=</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">==</span> <span class="nx">a</span><span class="p">.</span><span class="nb">window</span><span class="p">)</span> <span class="k">return</span> <span class="o">!</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">Q</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;constructor&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">Q</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">&quot;isPrototypeOf&quot;</span><span class="p">))</span> <span class="k">return</span> <span class="o">!</span><span class="mi">1</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="mi">1</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="k">in</span> <span class="nx">a</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">||</span> <span class="nx">Q</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Y</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Y</span> <span class="o">||</span> <span class="nx">YUI</span><span class="p">().</span><span class="nx">use</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">);</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">trim</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">a</span> <span class="o">?</span> <span class="p">[]</span> <span class="o">:</span> <span class="nx">m</span><span class="p">.</span><span class="nb">Array</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isArray</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">inArray</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">b</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="nx">m</span><span class="p">.</span><span class="nb">Array</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">map</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nb">Array</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">a</span> <span class="o">||</span> <span class="p">[]),</span> <span class="nx">b</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="o">!</span><span class="mi">0</span> <span class="o">===</span> <span class="nx">a</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">b</span><span class="p">],</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">f</span><span class="p">;</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span> <span class="nx">c</span><span class="o">++</span><span class="p">)</span> <span class="nx">m</span><span class="p">.</span><span class="nx">mix</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="o">!</span><span class="mi">0</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="o">!!</span> <span class="nx">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">param</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">QueryString</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">arrayKey</span><span class="o">:</span> <span class="o">!</span><span class="mi">0</span>
    <span class="p">})</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">isEmptyObject</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">proxy</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">isFunction</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">la</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">()</span>
    <span class="p">});</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">size</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">a</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">o</span> <span class="o">?</span> <span class="nx">o</span> <span class="o">:</span> <span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">m</span><span class="p">.</span><span class="nx">NodeList</span> <span class="o">?</span> <span class="nx">la</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;object&quot;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">a</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">getDOMNode</span> <span class="o">?</span> <span class="nx">a</span> <span class="o">:</span> <span class="nx">la</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">get</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_nodes</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">append</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="s2">&quot;string&quot;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">buildFragment</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">));</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
    <span class="p">})</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">addClass</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">getData</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">setData</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">remove</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">destroy</span><span class="p">()</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">_yNodeDestroy</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">_yNodeDestroy</span> <span class="o">||</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span><span class="p">;</span>
  <span class="nx">m</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="o">!</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">_yNodeDestroy</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">m</span><span class="p">.</span><span class="nx">NodeList</span><span class="p">.</span><span class="nx">addMethod</span><span class="p">(</span><span class="s2">&quot;destroy&quot;</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">destroy</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">ma</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;method&quot;</span><span class="p">,</span>
    <span class="nx">success</span><span class="o">:</span> <span class="nx">j</span><span class="p">,</span>
    <span class="nx">error</span><span class="o">:</span> <span class="nx">j</span>
  <span class="p">},</span>
    <span class="nx">R</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">io</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">io</span><span class="p">,</span>
          <span class="nx">c</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">c</span> <span class="k">in</span> <span class="nx">d</span><span class="p">)</span> <span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;function&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span> <span class="o">?</span>
        <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
          <span class="nx">d</span><span class="p">[</span><span class="nx">c</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
        <span class="p">}</span> <span class="o">:</span> <span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">ajax</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(),</span>
      <span class="nx">d</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">a</span><span class="p">),</span>
      <span class="nx">e</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">e</span> <span class="k">in</span> <span class="nx">ma</span><span class="p">)</span> <span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">j</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">ma</span><span class="p">[</span><span class="nx">e</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span> <span class="k">delete</span> <span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]);</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">sync</span> <span class="o">=</span> <span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">async</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">success</span><span class="p">,</span>
      <span class="nx">h</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">error</span><span class="p">;</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>
        <span class="s2">&quot;json&quot;</span> <span class="o">===</span> <span class="nx">a</span><span class="p">.</span><span class="nx">dataType</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="nx">e</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">));</span>
        <span class="nx">R</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
        <span class="nx">b</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
        <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="nx">f</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="nx">g</span><span class="p">)</span>
      <span class="p">},</span>
      <span class="nx">failure</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">R</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
        <span class="nx">b</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">);</span>
        <span class="nx">h</span> <span class="o">&amp;&amp;</span> <span class="nx">h</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">io</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
    <span class="nx">R</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">b</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">na</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">oa</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">m</span><span class="p">.</span><span class="nx">NodeList</span> <span class="o">||</span> <span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">on</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">)</span> <span class="nx">a</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span><span class="p">),</span>
          <span class="nx">i</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
        <span class="nx">f</span> <span class="o">||</span> <span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span><span class="p">,</span> <span class="nx">f</span> <span class="o">=</span> <span class="p">{});</span>
        <span class="nx">f</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{});</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span> <span class="o">=</span> <span class="nx">na</span><span class="o">++</span><span class="p">);</span>
        <span class="nx">f</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">delegate</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">__canEvents</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">__canEvents</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="nx">f</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="p">{});</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span> <span class="o">=</span> <span class="nx">na</span><span class="o">++</span><span class="p">);</span>
        <span class="nx">f</span><span class="p">[</span><span class="nx">d</span><span class="p">][</span><span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">pa</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">m</span><span class="p">.</span><span class="nx">NodeList</span> <span class="o">||</span> <span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">on</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">)</span> <span class="nx">a</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
          <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span><span class="p">),</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">d</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">b</span><span class="p">];</span>
        <span class="nx">f</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span><span class="p">].</span><span class="nx">detach</span><span class="p">();</span>
        <span class="k">delete</span> <span class="nx">f</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span><span class="p">];</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">delete</span> <span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">];</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">__canEvents</span> <span class="o">||</span> <span class="p">{},</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">];</span>
        <span class="nx">f</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span><span class="p">].</span><span class="nx">detach</span><span class="p">();</span>
        <span class="k">delete</span> <span class="nx">f</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">__bindingsIds</span><span class="p">];</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">delete</span> <span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">];</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">bind</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">bind</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">bind</span> <span class="o">!==</span> <span class="nx">c</span><span class="p">.</span><span class="nx">bind</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">on</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">oa</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">unbind</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unbind</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">unbind</span> <span class="o">!==</span> <span class="nx">c</span><span class="p">.</span><span class="nx">unbind</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">on</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">pa</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">trigger</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">m</span><span class="p">.</span><span class="nx">NodeList</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">getDOMNode</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">());</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Node</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="mi">1</span> <span class="o">===</span> <span class="nx">e</span><span class="p">)</span> <span class="nx">a</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">stopPropagation</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">cancelBubble</span> <span class="o">=</span> <span class="o">!</span><span class="mi">0</span><span class="p">;</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">_stopper</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_stopper</span><span class="p">()</span>
      <span class="p">});</span>
      <span class="nx">Ua</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">getDOMNode</span><span class="p">(),</span> <span class="nx">b</span><span class="p">,</span> <span class="p">{})</span>
    <span class="p">}</span> <span class="k">else</span> <span class="s2">&quot;string&quot;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">b</span>
    <span class="p">}),</span> <span class="nx">b</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">target</span> <span class="o">||</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">m</span><span class="p">.</span><span class="nx">mix</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">DOM_EVENTS</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">destroyed</span><span class="o">:</span> <span class="o">!</span><span class="mi">0</span><span class="p">,</span>
    <span class="nx">foo</span><span class="o">:</span> <span class="o">!</span><span class="mi">0</span>
  <span class="p">});</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">delegate</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">on</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">oa</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">delegate</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">delegate</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">undelegate</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">on</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">pa</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">undelegate</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">undelegate</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">Va</span> <span class="o">=</span> <span class="sr">/mouse(enter|leave)/</span><span class="p">,</span>
    <span class="nx">Wa</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;mouse&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;enter&quot;</span> <span class="o">==</span> <span class="nx">b</span> <span class="o">?</span> <span class="s2">&quot;over&quot;</span> <span class="o">:</span> <span class="s2">&quot;out&quot;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">Ua</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createEvent</span> <span class="o">?</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createEvent</span><span class="p">(</span><span class="s2">&quot;HTMLEvents&quot;</span><span class="p">),</span>
        <span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">Va</span><span class="p">,</span> <span class="nx">Wa</span><span class="p">);</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">initEvent</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="o">!</span><span class="mi">0</span><span class="p">,</span> <span class="o">!</span><span class="mi">0</span><span class="p">);</span>
      <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
    <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">b</span><span class="p">,</span>
        <span class="nx">f</span> <span class="o">=</span> <span class="o">!</span><span class="mi">1</span><span class="p">;</span>
      <span class="nx">b</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
          <span class="nx">type</span><span class="o">:</span> <span class="nx">b</span><span class="p">,</span>
          <span class="nx">target</span><span class="o">:</span> <span class="nx">a</span><span class="p">,</span>
          <span class="nx">faux</span><span class="o">:</span> <span class="o">!</span><span class="mi">0</span><span class="p">,</span>
          <span class="nx">_stopper</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">f</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cancelBubble</span>
          <span class="p">}</span>
        <span class="p">},</span> <span class="nx">d</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">qa</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span> <span class="o">!</span><span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">!==</span> <span class="nb">document</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;)</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">qa</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">qa</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Node</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Y</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">getListeners</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">_yuid</span><span class="p">,</span> <span class="nx">b</span><span class="p">))</span> <span class="k">for</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">a</span><span class="o">++</span><span class="p">)</span> <span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">fire</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">z</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">z</span><span class="p">))</span> <span class="k">return</span> <span class="k">new</span> <span class="nx">z</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_doneFuncs</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_failFuncs</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_resultArgs</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_status</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">Deferred</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">when</span> <span class="o">=</span> <span class="nx">z</span><span class="p">.</span><span class="nx">when</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="mi">2</span> <span class="o">&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">isResolved</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">isRejected</span><span class="p">)</span> <span class="o">?</span> <span class="nx">b</span> <span class="o">:</span> <span class="nx">z</span><span class="p">().</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">z</span><span class="p">(),</span>
      <span class="nx">e</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">f</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">b</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">f</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">arguments</span><span class="p">;</span>
        <span class="o">++</span><span class="nx">e</span> <span class="o">==</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">resolve</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
      <span class="p">}).</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span>
      <span class="p">})</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">d</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">ra</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_resultArgs</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">a</span><span class="p">],</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">},</span>
    <span class="nx">sa</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">c</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Array</span> <span class="o">?</span> <span class="nx">h</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">_status</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">_resultArgs</span> <span class="o">||</span> <span class="p">[]),</span> <span class="nx">d</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">c</span><span class="p">)))</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="k">this</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">z</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">pipe</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">))</span>
      <span class="p">});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">b</span> <span class="o">?</span> <span class="nx">d</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">))</span> <span class="o">:</span> <span class="nx">d</span><span class="p">.</span><span class="nx">reject</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">d</span>
    <span class="p">},</span>
    <span class="nx">resolveWith</span><span class="o">:</span> <span class="nx">ra</span><span class="p">(</span><span class="s2">&quot;_doneFuncs&quot;</span><span class="p">,</span> <span class="s2">&quot;rs&quot;</span><span class="p">),</span>
    <span class="nx">rejectWith</span><span class="o">:</span> <span class="nx">ra</span><span class="p">(</span><span class="s2">&quot;_failFuncs&quot;</span><span class="p">,</span> <span class="s2">&quot;rj&quot;</span><span class="p">),</span>
    <span class="nx">done</span><span class="o">:</span> <span class="nx">sa</span><span class="p">(</span><span class="s2">&quot;_doneFuncs&quot;</span><span class="p">,</span> <span class="s2">&quot;rs&quot;</span><span class="p">),</span>
    <span class="nx">fail</span><span class="o">:</span> <span class="nx">sa</span><span class="p">(</span><span class="s2">&quot;_failFuncs&quot;</span><span class="p">,</span> <span class="s2">&quot;rj&quot;</span><span class="p">),</span>
    <span class="nx">always</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">fail</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="k">return</span> <span class="k">this</span>
    <span class="p">},</span>
    <span class="nx">then</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
      <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="k">return</span> <span class="k">this</span>
    <span class="p">},</span>
    <span class="nx">state</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">switch</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_status</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s2">&quot;rs&quot;</span><span class="o">:</span>
        <span class="k">return</span> <span class="s2">&quot;resolved&quot;</span><span class="p">;</span>
      <span class="k">case</span> <span class="s2">&quot;rj&quot;</span><span class="o">:</span>
        <span class="k">return</span> <span class="s2">&quot;rejected&quot;</span><span class="p">;</span>
      <span class="k">default</span><span class="o">:</span>
        <span class="k">return</span> <span class="s2">&quot;pending&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">isResolved</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;rs&quot;</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">_status</span>
    <span class="p">},</span>
    <span class="nx">isRejected</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;rj&quot;</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">_status</span>
    <span class="p">},</span>
    <span class="nx">reject</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">rejectWith</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">resolve</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">exec</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">_status</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_status</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">b</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="k">this</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">Xa</span> <span class="o">=</span> <span class="sr">/\=\=/</span><span class="p">,</span>
    <span class="nx">Ya</span> <span class="o">=</span> <span class="sr">/([A-Z]+)([A-Z][a-z])/g</span><span class="p">,</span>
    <span class="nx">Za</span> <span class="o">=</span> <span class="sr">/([a-z\d])([A-Z])/g</span><span class="p">,</span>
    <span class="nx">$a</span> <span class="o">=</span> <span class="sr">/([a-z\d])([A-Z])/g</span><span class="p">,</span>
    <span class="nx">ta</span> <span class="o">=</span> <span class="sr">/\{([^\}]+)\}/g</span><span class="p">,</span>
    <span class="nx">w</span> <span class="o">=</span> <span class="sr">/&quot;/g</span><span class="p">,</span>
    <span class="nx">ab</span> <span class="o">=</span> <span class="sr">/&#39;/g</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">esc</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="kc">null</span> <span class="o">===</span> <span class="nx">a</span> <span class="o">||</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;NaN&quot;</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">a</span><span class="p">)).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;lt;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;gt;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s2">&quot;&amp;#34;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">ab</span><span class="p">,</span> <span class="s2">&quot;&amp;#39;&quot;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">getObject</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="p">[],</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="nx">f</span><span class="p">,</span> <span class="nx">h</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">g</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">?</span> <span class="nx">b</span> <span class="o">:</span> <span class="p">[</span><span class="nx">b</span> <span class="o">||</span> <span class="nx">o</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">e</span><span class="p">)</span> <span class="k">return</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="k">for</span> <span class="p">(;</span> <span class="nx">b</span><span class="p">[</span><span class="nx">h</span><span class="p">];)</span> <span class="p">{</span>
        <span class="nx">f</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="nx">h</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">e</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="sr">/^f|^o/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">f</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="k">in</span> <span class="nx">f</span> <span class="o">?</span> <span class="nx">f</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">:</span> <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{});</span>
        <span class="k">if</span> <span class="p">(</span><span class="sr">/^f|^o/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">g</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="k">in</span> <span class="nx">f</span> <span class="o">?</span> <span class="nx">f</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">:</span> <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}),</span> <span class="nx">g</span> <span class="o">!==</span> <span class="nx">j</span><span class="p">))</span> <span class="k">return</span> <span class="o">!</span><span class="mi">1</span> <span class="o">===</span> <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="k">delete</span> <span class="nx">f</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]],</span> <span class="nx">g</span><span class="p">;</span>
        <span class="nx">h</span><span class="o">++</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">capitalize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">underscore</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">Xa</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">Ya</span><span class="p">,</span> <span class="s2">&quot;$1_$2&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">Za</span><span class="p">,</span> <span class="s2">&quot;$1_$2&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">$a</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()</span>
    <span class="p">},</span>
    <span class="nx">sub</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">ta</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getObject</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">?</span> <span class="nx">d</span> <span class="o">:</span> <span class="o">!</span><span class="nx">d</span><span class="p">);</span>
        <span class="k">return</span> <span class="sr">/^f|^o/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">g</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">g</span><span class="p">),</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">g</span>
      <span class="p">}));</span>
      <span class="k">return</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">e</span>
    <span class="p">},</span>
    <span class="nx">replacer</span><span class="o">:</span> <span class="nx">ta</span><span class="p">,</span>
    <span class="nx">undHash</span><span class="o">:</span> <span class="sr">/_|-/</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">S</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">.</span><span class="nx">extend</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">newInstance</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">instance</span><span class="p">(),</span>
        <span class="nx">b</span><span class="p">;</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">setup</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">));</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">init</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">init</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">||</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">a</span>
    <span class="p">},</span>
    <span class="nx">_inherit</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">d</span> <span class="o">||</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">a</span> <span class="o">||</span> <span class="p">{})</span>
    <span class="p">},</span>
    <span class="nx">_overwrite</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">c</span>
    <span class="p">},</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">defaults</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="o">!</span><span class="mi">0</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">a</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">defaults</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">instance</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">S</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="k">this</span><span class="p">;</span>
      <span class="nx">S</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">a</span>
    <span class="p">},</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">function</span> <span class="nx">e</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">S</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">extend</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">newInstance</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="s2">&quot;string&quot;</span> <span class="o">!=</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="kc">null</span><span class="p">);</span>
      <span class="nx">d</span> <span class="o">||</span> <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="kc">null</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">||</span> <span class="p">{},</span>
        <span class="nx">f</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span>
        <span class="nx">h</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">E</span><span class="p">;</span>
      <span class="nx">E</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">instance</span><span class="p">();</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">.</span><span class="nx">_inherit</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">E</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">h</span> <span class="k">in</span> <span class="k">this</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">h</span><span class="p">]);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">.</span><span class="nx">_inherit</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
        <span class="nx">g</span> <span class="o">=</span> <span class="nx">i</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getObject</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span> <span class="nx">o</span><span class="p">,</span> <span class="o">!</span><span class="mi">0</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">underscore</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\./g</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)),</span>
          <span class="nx">bb</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">underscore</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
        <span class="nx">f</span><span class="p">[</span><span class="nx">g</span><span class="p">]</span> <span class="o">=</span> <span class="nx">e</span>
      <span class="p">}</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">constructor</span><span class="o">:</span> <span class="nx">e</span><span class="p">,</span>
        <span class="nx">prototype</span><span class="o">:</span> <span class="nx">E</span><span class="p">,</span>
        <span class="nx">namespace</span><span class="o">:</span> <span class="nx">i</span><span class="p">,</span>
        <span class="nx">shortName</span><span class="o">:</span> <span class="nx">g</span><span class="p">,</span>
        <span class="nx">_shortName</span><span class="o">:</span> <span class="nx">bb</span><span class="p">,</span>
        <span class="nx">fullName</span><span class="o">:</span> <span class="nx">a</span><span class="p">,</span>
        <span class="nx">_fullName</span><span class="o">:</span> <span class="nx">j</span>
      <span class="p">});</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
      <span class="nx">g</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">));</span>
      <span class="nx">E</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">g</span><span class="p">);</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">init</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">init</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">E</span> <span class="o">||</span> <span class="nx">g</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">e</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">u</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">||</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">||</span> <span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">)</span>
  <span class="p">},</span>
    <span class="nx">L</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">unbind</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;change&quot;</span> <span class="o">+</span> <span class="nx">b</span><span class="p">)</span>
      <span class="p">})</span>
    <span class="p">},</span>
    <span class="nx">T</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">||</span> <span class="nx">k</span><span class="p">;</span>
      <span class="nx">f</span> <span class="o">=</span> <span class="nx">f</span> <span class="o">||</span> <span class="nx">k</span><span class="p">.</span><span class="nx">List</span><span class="p">;</span>
      <span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">k</span> <span class="o">?</span> <span class="nx">L</span><span class="p">([</span><span class="nx">a</span><span class="p">],</span> <span class="nx">d</span><span class="p">.</span><span class="nx">_cid</span><span class="p">)</span> <span class="o">:</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;change&quot;</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">_cid</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">),</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
        <span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">===</span> <span class="nx">b</span> <span class="o">?</span> <span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">:</span> <span class="p">[</span><span class="nx">b</span><span class="p">,</span> <span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]]).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
        <span class="nx">f</span><span class="p">.</span><span class="nx">triggeredNS</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">triggeredNS</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="nx">f</span><span class="p">.</span><span class="nx">triggeredNS</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">_cid</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">triggeredNS</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">_cid</span><span class="p">]</span> <span class="o">=</span> <span class="o">!</span><span class="mi">0</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">e</span><span class="p">))</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">a</span>
    <span class="p">},</span>
    <span class="nx">M</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span> <span class="o">=</span> <span class="nx">u</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">])</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]()</span> <span class="o">:</span> <span class="nx">a</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">d</span>
    <span class="p">},</span>
    <span class="nx">ua</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">F</span> <span class="o">=</span> <span class="nx">ua</span><span class="p">(</span><span class="s2">&quot;addEvent&quot;</span><span class="p">),</span>
    <span class="nx">va</span> <span class="o">=</span> <span class="nx">ua</span><span class="p">(</span><span class="s2">&quot;removeEvent&quot;</span><span class="p">),</span>
    <span class="nx">U</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">?</span> <span class="nx">a</span> <span class="o">:</span> <span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">wa</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">G</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">V</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">W</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">cb</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">cid</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_cid</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_cid</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_cid</span> <span class="o">=</span> <span class="p">(</span><span class="nx">b</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="o">++</span><span class="nx">cb</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">({</span>
    <span class="nx">bind</span><span class="o">:</span> <span class="nx">F</span><span class="p">,</span>
    <span class="nx">unbind</span><span class="o">:</span> <span class="nx">va</span><span class="p">,</span>
    <span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span>
    <span class="nx">canMakeObserve</span><span class="o">:</span> <span class="nx">u</span><span class="p">,</span>
    <span class="nx">startBatch</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">G</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">W</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">stopBatch</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span> <span class="o">?</span> <span class="nx">G</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">G</span><span class="o">--</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">G</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">V</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
          <span class="nx">e</span> <span class="o">=</span> <span class="nx">W</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="nx">V</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">W</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">wa</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">startBatch</span><span class="p">();</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">c</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
        <span class="p">});</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">a</span>
        <span class="p">})</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">triggerBatch</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">_init</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">G</span><span class="p">)</span> <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
        <span class="nx">V</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">a</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="nx">type</span><span class="o">:</span> <span class="nx">b</span><span class="p">,</span>
          <span class="nx">batchNum</span><span class="o">:</span> <span class="nx">wa</span>
        <span class="p">},</span>
        <span class="nx">d</span><span class="p">])</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">keys</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">k</span><span class="p">.</span><span class="nx">__reading</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span><span class="p">.</span><span class="nx">__reading</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;__keys&quot;</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="k">in</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_data</span><span class="p">)</span> <span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">b</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_data</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">cid</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;.observe&quot;</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_init</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;change&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cid</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_changes</span><span class="p">,</span> <span class="k">this</span><span class="p">));</span>
      <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_init</span>
    <span class="p">},</span>
    <span class="nx">_changes</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">b</span><span class="p">,</span>
        <span class="nx">batchNum</span><span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">batchNum</span>
      <span class="p">},</span> <span class="p">[</span><span class="nx">c</span><span class="p">,</span> <span class="nx">f</span><span class="p">])</span>
    <span class="p">},</span>
    <span class="nx">attr</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">a</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;string&quot;</span> <span class="o">!==</span> <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;number&quot;</span> <span class="o">!==</span> <span class="nx">d</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_attrs</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">===</span> <span class="nx">j</span><span class="p">)</span> <span class="k">return</span> <span class="nx">k</span><span class="p">.</span><span class="nx">__reading</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span><span class="p">.</span><span class="nx">__reading</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_set</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span>
    <span class="p">},</span>
    <span class="nx">each</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">k</span><span class="p">.</span><span class="nx">__reading</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span><span class="p">.</span><span class="nx">__reading</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;__keys&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">__get</span><span class="p">()].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)))</span>
    <span class="p">},</span>
    <span class="nx">removeAttr</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">U</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
        <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span>
        <span class="nx">d</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">b</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">_data</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">[</span><span class="nx">b</span><span class="p">],</span> <span class="nx">b</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">||</span> <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">b</span><span class="p">],</span> <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;__keys&quot;</span><span class="p">,</span> <span class="nx">j</span><span class="p">),</span> <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">b</span><span class="p">,</span> <span class="s2">&quot;remove&quot;</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">d</span><span class="p">]),</span> <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="p">[</span><span class="nx">j</span><span class="p">,</span> <span class="nx">d</span><span class="p">]));</span>
      <span class="k">return</span> <span class="nx">d</span>
    <span class="p">},</span>
    <span class="nx">_get</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">U</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
        <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__get</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">());</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">b</span> <span class="o">?</span> <span class="nx">b</span><span class="p">.</span><span class="nx">_get</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">:</span> <span class="nx">j</span> <span class="o">:</span> <span class="nx">b</span>
    <span class="p">},</span>
    <span class="nx">__get</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_data</span>
    <span class="p">},</span>
    <span class="nx">_set</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">U</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
        <span class="nx">c</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span>
        <span class="nx">f</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__get</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">u</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">f</span><span class="p">.</span><span class="nx">_set</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;can.Observe: Object does not exist&quot;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">__convert</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__convert</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">b</span><span class="p">));</span>
        <span class="nx">f</span> <span class="o">||</span> <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;__keys&quot;</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">__set</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">__set</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">!==</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">__get</span><span class="p">().</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;set&quot;</span> <span class="o">:</span> <span class="s2">&quot;add&quot;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">___set</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">u</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">?</span> <span class="nx">T</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span> <span class="o">:</span> <span class="nx">b</span><span class="p">);</span>
        <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">]);</span>
        <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="nx">L</span><span class="p">([</span><span class="nx">d</span><span class="p">],</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cid</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">___set</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="nx">a</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">||</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">bind</span><span class="o">:</span> <span class="nx">F</span><span class="p">,</span>
    <span class="nx">unbind</span><span class="o">:</span> <span class="nx">va</span><span class="p">,</span>
    <span class="nx">serialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">M</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;serialize&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="p">},</span>
    <span class="nx">_attrs</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">===</span> <span class="nx">j</span><span class="p">)</span> <span class="k">return</span> <span class="nx">M</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;attr&quot;</span><span class="p">,</span> <span class="p">{});</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="o">!</span><span class="mi">0</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">a</span><span class="p">),</span>
        <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">f</span><span class="p">;</span>
      <span class="nx">k</span><span class="p">.</span><span class="nx">startBatch</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">g</span><span class="p">];</span>
        <span class="nx">f</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">?</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">__convert</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">f</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">__convert</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">f</span><span class="p">)),</span> <span class="nx">d</span> <span class="o">!==</span> <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span> <span class="k">instanceof</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span> <span class="o">&amp;&amp;</span> <span class="nx">f</span> <span class="k">instanceof</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span> <span class="o">&amp;&amp;</span> <span class="nx">L</span><span class="p">([</span><span class="nx">d</span><span class="p">],</span> <span class="nx">e</span><span class="p">.</span><span class="nx">_cid</span><span class="p">),</span> <span class="nx">f</span> <span class="k">instanceof</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span> <span class="o">?</span> <span class="nx">e</span><span class="p">.</span><span class="nx">_set</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="o">:</span> <span class="nx">u</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">u</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">?</span> <span class="nx">d</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d</span> <span class="o">!=</span> <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">_set</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">f</span><span class="p">)),</span> <span class="k">delete</span> <span class="nx">a</span><span class="p">[</span><span class="nx">g</span><span class="p">])</span>
      <span class="p">});</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">d</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span> <span class="k">this</span><span class="p">.</span><span class="nx">_set</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">f</span><span class="p">);</span>
      <span class="nx">k</span><span class="p">.</span><span class="nx">stopBatch</span><span class="p">();</span>
      <span class="k">return</span> <span class="k">this</span>
    <span class="p">}</span>
  <span class="p">}),</span>
    <span class="nx">db</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">splice</span><span class="p">,</span>
    <span class="nx">N</span> <span class="o">=</span> <span class="nx">k</span><span class="p">({</span>
      <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">cid</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;.observe&quot;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_init</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">a</span> <span class="o">||</span> <span class="p">[]));</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;change&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cid</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_changes</span><span class="p">,</span> <span class="k">this</span><span class="p">));</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">_init</span>
      <span class="p">},</span>
      <span class="nx">_changes</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span><span class="o">~</span><span class="nx">b</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="s2">&quot;add&quot;</span> <span class="o">===</span> <span class="nx">d</span> <span class="o">?</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="p">[</span><span class="nx">c</span><span class="p">,</span> <span class="o">+</span><span class="nx">b</span><span class="p">]),</span> <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">]))</span> <span class="o">:</span> <span class="s2">&quot;remove&quot;</span> <span class="o">===</span> <span class="nx">d</span> <span class="o">?</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="p">[</span><span class="nx">f</span><span class="p">,</span> <span class="o">+</span><span class="nx">b</span><span class="p">]),</span> <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">]))</span> <span class="o">:</span> <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="p">[</span><span class="nx">c</span><span class="p">,</span> <span class="o">+</span><span class="nx">b</span><span class="p">]));</span>
        <span class="nx">k</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_changes</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
      <span class="p">},</span>
      <span class="nx">__get</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">:</span> <span class="k">this</span>
      <span class="p">},</span>
      <span class="nx">___set</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="o">+</span><span class="nx">a</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
      <span class="p">},</span>
      <span class="nx">serialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">M</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;serialize&quot;</span><span class="p">,</span> <span class="p">[])</span>
      <span class="p">},</span>
      <span class="nx">splice</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">),</span>
          <span class="nx">e</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">e</span> <span class="o">&lt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">e</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">];</span>
          <span class="nx">u</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span> <span class="o">=</span> <span class="nx">T</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">))</span>
        <span class="p">}</span>
        <span class="nx">b</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">a</span><span class="p">);</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
        <span class="mi">0</span> <span class="o">&lt;</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;remove&quot;</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">e</span><span class="p">]),</span> <span class="nx">L</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cid</span><span class="p">));</span>
        <span class="mi">2</span> <span class="o">&lt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nx">e</span><span class="p">]);</span>
        <span class="k">return</span> <span class="nx">e</span>
      <span class="p">},</span>
      <span class="nx">_attrs</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">===</span> <span class="nx">j</span><span class="p">)</span> <span class="k">return</span> <span class="nx">M</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;attr&quot;</span><span class="p">,</span> <span class="p">[]);</span>
        <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
        <span class="nx">k</span><span class="p">.</span><span class="nx">startBatch</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_updateAttrs</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
        <span class="nx">k</span><span class="p">.</span><span class="nx">stopBatch</span><span class="p">()</span>
      <span class="p">},</span>
      <span class="nx">_updateAttrs</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">d</span><span class="p">;</span> <span class="nx">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span>
            <span class="nx">h</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span>
          <span class="nx">u</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">u</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="o">?</span> <span class="nx">f</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">f</span> <span class="o">!=</span> <span class="nx">h</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_set</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">h</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
    <span class="nx">push</span><span class="o">:</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span>
    <span class="nx">unshift</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">N</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">?</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">),</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">f</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">f</span> <span class="o">&lt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">f</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="nx">f</span><span class="p">];</span>
        <span class="nx">u</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span> <span class="o">=</span> <span class="nx">T</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">Observe</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">))</span>
      <span class="p">}</span>
      <span class="nx">f</span> <span class="o">=</span> <span class="p">[][</span><span class="nx">b</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
      <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">comparator</span> <span class="o">||</span> <span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">,</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">j</span><span class="p">]);</span>
      <span class="k">return</span> <span class="nx">f</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
    <span class="nx">pop</span><span class="o">:</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span>
    <span class="nx">shift</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">N</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">=</span>

    <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">?</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">),</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">d</span> <span class="o">=</span> <span class="p">[][</span><span class="nx">b</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
      <span class="nx">k</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">,</span> <span class="s2">&quot;remove&quot;</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="p">[</span><span class="nx">d</span><span class="p">]]);</span>
      <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">unbind</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;change&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cid</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">d</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">N</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">indexOf</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">join</span><span class="o">:</span> <span class="p">[].</span><span class="nx">join</span><span class="p">,</span>
    <span class="nx">slice</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">))</span>
    <span class="p">},</span>
    <span class="nx">concat</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span> <span class="k">instanceof</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">List</span> <span class="o">?</span> <span class="nx">b</span><span class="p">.</span><span class="nx">serialize</span><span class="p">()</span> <span class="o">:</span> <span class="nx">b</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="k">new</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">concat</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">serialize</span><span class="p">(),</span> <span class="nx">a</span><span class="p">))</span>
    <span class="p">},</span>
    <span class="nx">forEach</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">||</span> <span class="k">this</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">k</span><span class="p">.</span><span class="nx">List</span> <span class="o">=</span> <span class="nx">N</span><span class="p">;</span>
  <span class="nx">k</span><span class="p">.</span><span class="nx">setup</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">List</span> <span class="o">=</span> <span class="nx">k</span><span class="p">.</span><span class="nx">List</span><span class="p">({</span>
      <span class="nx">Observe</span><span class="o">:</span> <span class="k">this</span>
    <span class="p">},</span> <span class="p">{})</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">eb</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">;</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
      <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">](</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
    <span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">rejectWith</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">e</span>
  <span class="p">},</span>
    <span class="nx">fb</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">xa</span> <span class="o">=</span> <span class="sr">/change.observe\d+/</span><span class="p">,</span>
    <span class="nx">H</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">__reading</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">__reading</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">__get</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">ya</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">h</span><span class="p">;</span>
      <span class="nx">h</span> <span class="o">=</span> <span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">serialize</span><span class="p">()];</span>
      <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span>
        <span class="nx">i</span><span class="p">;</span>
      <span class="s2">&quot;destroy&quot;</span> <span class="o">==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">h</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="s2">&quot;create&quot;</span> <span class="o">!==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">h</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">H</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="nx">g</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">h</span><span class="p">);</span>
      <span class="nx">h</span> <span class="o">=</span> <span class="nx">i</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">a</span><span class="p">[</span><span class="nx">f</span> <span class="o">||</span> <span class="nx">b</span> <span class="o">+</span> <span class="s2">&quot;d&quot;</span><span class="p">](</span><span class="nx">c</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">a</span>
      <span class="p">});</span>
      <span class="nx">i</span><span class="p">.</span><span class="nx">abort</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">abort</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">i</span><span class="p">.</span><span class="nx">abort</span><span class="p">()</span>
      <span class="p">});</span>
      <span class="nx">h</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">h</span>
    <span class="p">},</span>
    <span class="nx">gb</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">create</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;_shortName&quot;</span><span class="p">,</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;post&quot;</span>
      <span class="p">},</span>
      <span class="nx">update</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">||</span> <span class="p">{},</span>
            <span class="nx">d</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
          <span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="s2">&quot;new&quot;</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">capitalize</span><span class="p">(</span><span class="nx">a</span><span class="p">)]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span> <span class="k">delete</span> <span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">]);</span>
          <span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">b</span>
        <span class="p">},</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;put&quot;</span>
      <span class="p">},</span>
      <span class="nx">destroy</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;delete&quot;</span><span class="p">,</span>
        <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{};</span>
          <span class="nx">b</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">b</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nx">findAll</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;_shortName&quot;</span>
      <span class="p">},</span>
      <span class="nx">findOne</span><span class="o">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="nx">za</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">data</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d</span><span class="p">,</span>
          <span class="nx">e</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">||</span> <span class="k">this</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">url</span> <span class="o">||</span> <span class="s2">&quot;_url&quot;</span><span class="p">],</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">d</span><span class="p">,</span>
          <span class="nx">h</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span>
          <span class="nx">g</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="s2">&quot;string&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">e</span> <span class="o">?</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s/</span><span class="p">),</span> <span class="nx">g</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span> <span class="nx">e</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">pop</span><span class="p">()))</span> <span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
        <span class="nx">g</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="s2">&quot;object&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">{},</span> <span class="nx">f</span><span class="p">)</span> <span class="o">:</span> <span class="nx">f</span><span class="p">;</span>
        <span class="nx">g</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">sub</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">g</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="o">!</span><span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
          <span class="nx">type</span><span class="o">:</span> <span class="nx">h</span> <span class="o">||</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span>
          <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
          <span class="nx">success</span><span class="o">:</span> <span class="k">void</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">error</span><span class="o">:</span> <span class="k">void</span> <span class="mi">0</span>
        <span class="p">},</span> <span class="nx">g</span><span class="p">))</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">Model</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">({</span>
    <span class="nx">fullName</span><span class="o">:</span> <span class="s2">&quot;can.Model&quot;</span><span class="p">,</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">store</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">Model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">List</span> <span class="o">=</span> <span class="nx">X</span><span class="p">({</span>
          <span class="nx">Observe</span><span class="o">:</span> <span class="k">this</span>
        <span class="p">},</span> <span class="p">{});</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
          <span class="nx">d</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_clean</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">gb</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">c</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">f</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span> <span class="o">=</span> <span class="nx">za</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">b</span><span class="p">[</span><span class="nx">f</span><span class="p">]));</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="s2">&quot;make&quot;</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">capitalize</span><span class="p">(</span><span class="nx">f</span><span class="p">)])</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="s2">&quot;make&quot;</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">capitalize</span><span class="p">(</span><span class="nx">f</span><span class="p">)](</span><span class="nx">b</span><span class="p">[</span><span class="nx">f</span><span class="p">]);</span>
            <span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">.</span><span class="nx">_overwrite</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">_reqs</span><span class="o">++</span><span class="p">;</span>
              <span class="k">return</span> <span class="nx">h</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
            <span class="p">})</span>
          <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;can.Model&quot;</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">fullName</span> <span class="o">||</span> <span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">fullName</span><span class="p">)</span> <span class="nx">b</span><span class="p">.</span><span class="nx">fullName</span> <span class="o">=</span> <span class="s2">&quot;Model&quot;</span> <span class="o">+</span> <span class="o">++</span><span class="nx">fb</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_reqs</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_url</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_shortName</span> <span class="o">+</span> <span class="s2">&quot;/{&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;}&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">_ajax</span><span class="o">:</span> <span class="nx">za</span><span class="p">,</span>
    <span class="nx">_clean</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_reqs</span><span class="o">--</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_reqs</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">b</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">_bindings</span> <span class="o">||</span> <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">a</span>
    <span class="p">},</span>
    <span class="nx">models</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="k">this</span><span class="p">.</span><span class="nx">List</span><span class="p">)</span> <span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
          <span class="nx">d</span> <span class="o">=</span> <span class="k">new</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">List</span> <span class="o">||</span> <span class="nx">X</span><span class="p">),</span>
          <span class="nx">e</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">X</span><span class="p">,</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">?</span> <span class="nx">a</span> <span class="o">:</span> <span class="nx">f</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">serialize</span><span class="p">()</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
        <span class="p">});</span>
        <span class="nx">e</span> <span class="o">||</span> <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
          <span class="s2">&quot;data&quot;</span> <span class="o">!==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">d</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">model</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">a</span> <span class="k">instanceof</span> <span class="k">this</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">serialize</span><span class="p">());</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">],</span>
          <span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">attr</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="k">this</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_reqs</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">b</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">isNew</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">H</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
      <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="nx">a</span> <span class="o">||</span> <span class="mi">0</span> <span class="o">===</span> <span class="nx">a</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">save</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">ya</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">isNew</span><span class="p">()</span> <span class="o">?</span> <span class="s2">&quot;create&quot;</span> <span class="o">:</span> <span class="s2">&quot;update&quot;</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">ya</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;destroy&quot;</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">bind</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">xa</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span> <span class="o">||</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">store</span><span class="p">[</span><span class="nx">H</span><span class="p">(</span><span class="k">this</span><span class="p">)]</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span> <span class="o">=</span> <span class="mi">0</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span><span class="o">++</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">unbind</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">xa</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span><span class="o">--</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span> <span class="o">||</span> <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">store</span><span class="p">[</span><span class="nx">H</span><span class="p">(</span><span class="k">this</span><span class="p">)]);</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">unbind</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">___set</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">___set</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
      <span class="nx">a</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">store</span><span class="p">[</span><span class="nx">H</span><span class="p">(</span><span class="k">this</span><span class="p">)]</span> <span class="o">=</span> <span class="k">this</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
    <span class="nx">makeFindAll</span><span class="o">:</span> <span class="s2">&quot;models&quot;</span><span class="p">,</span>
    <span class="nx">makeFindOne</span><span class="o">:</span> <span class="s2">&quot;model&quot;</span>
  <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">Model</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">eb</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">c</span><span class="p">),</span> <span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">h</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span><span class="s2">&quot;created&quot;</span><span class="p">,</span> <span class="s2">&quot;updated&quot;</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">;</span>
      <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;object&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">attr</span> <span class="o">?</span> <span class="nx">b</span><span class="p">.</span><span class="nx">attr</span><span class="p">()</span> <span class="o">:</span> <span class="nx">b</span><span class="p">);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">X</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">List</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">List</span><span class="p">({</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">List</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="sr">/\w+\.destroyed/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">c</span><span class="p">))</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">!=</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}),</span>
    <span class="nx">hb</span> <span class="o">=</span> <span class="sr">/^\d+$/</span><span class="p">,</span>
    <span class="nx">ib</span> <span class="o">=</span> <span class="sr">/([^\[\]]+)|(\[\])/g</span><span class="p">,</span>
    <span class="nx">jb</span> <span class="o">=</span> <span class="sr">/([^?#]*)(#.*)?$/</span><span class="p">,</span>
    <span class="nx">Aa</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\+/g</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">))</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">deparam</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">d</span><span class="p">;</span>
      <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">jb</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">),</span> <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">),</span>
          <span class="nx">c</span> <span class="o">=</span> <span class="nx">Aa</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">()),</span>
          <span class="nx">h</span> <span class="o">=</span> <span class="nx">Aa</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">));</span>
        <span class="nx">current</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">ib</span><span class="p">),</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">g</span><span class="p">;</span> <span class="nx">c</span><span class="o">++</span><span class="p">)</span> <span class="nx">current</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">current</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">hb</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">||</span> <span class="s2">&quot;[]&quot;</span> <span class="o">==</span> <span class="nx">a</span><span class="p">[</span><span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">?</span> <span class="p">[]</span> <span class="o">:</span> <span class="p">{}),</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">current</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]];</span>
        <span class="nx">d</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="s2">&quot;[]&quot;</span> <span class="o">==</span> <span class="nx">d</span> <span class="o">?</span> <span class="nx">current</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="o">:</span> <span class="nx">current</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">h</span>
      <span class="p">}));</span>
      <span class="k">return</span> <span class="nx">b</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">Ba</span> <span class="o">=</span> <span class="sr">/\:([\w\.]+)/g</span><span class="p">,</span>
    <span class="nx">kb</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="s2">&quot;className&quot;</span> <span class="o">===</span> <span class="nx">e</span> <span class="o">?</span> <span class="s2">&quot;class&quot;</span> <span class="o">:</span> <span class="nx">e</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;href&quot;</span> <span class="o">===</span> <span class="nx">e</span> <span class="o">?</span> <span class="nx">a</span> <span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">esc</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">Ca</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">f</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">h</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">h</span> <span class="k">in</span> <span class="nx">a</span><span class="p">.</span><span class="nx">defaults</span><span class="p">)</span> <span class="nx">a</span><span class="p">.</span><span class="nx">defaults</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span> <span class="o">===</span> <span class="nx">b</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">c</span><span class="o">++</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(;</span> <span class="nx">e</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">names</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">e</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">names</span><span class="p">[</span><span class="nx">e</span><span class="p">]))</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="nx">f</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">names</span><span class="p">[</span><span class="nx">e</span><span class="p">]]</span> <span class="o">||</span> <span class="nx">c</span><span class="o">++</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">c</span>
    <span class="p">},</span>
    <span class="nx">Da</span> <span class="o">=</span> <span class="o">!</span><span class="mi">0</span><span class="p">,</span>
    <span class="nx">Y</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span>
    <span class="nx">x</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">,</span>
    <span class="nx">p</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">route</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">||</span> <span class="p">{},</span>
      <span class="nx">d</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">e</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">Ba</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">h</span><span class="p">,</span> <span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">h</span><span class="p">);</span>
        <span class="k">return</span> <span class="s2">&quot;([^\\&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">g</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_querySeparator</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;*&quot;</span> <span class="o">:</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
      <span class="p">});</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">routes</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">test</span><span class="o">:</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;^&quot;</span> <span class="o">+</span> <span class="nx">e</span> <span class="o">+</span> <span class="s2">&quot;($|&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_querySeparator</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/([.?*+\^$\[\]\\(){}|\-])/g</span><span class="p">,</span> <span class="s2">&quot;\\$1&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">),</span>
      <span class="nx">route</span><span class="o">:</span> <span class="nx">a</span><span class="p">,</span>
      <span class="nx">names</span><span class="o">:</span> <span class="nx">d</span><span class="p">,</span>
      <span class="nx">defaults</span><span class="o">:</span> <span class="nx">b</span><span class="p">,</span>
      <span class="nx">length</span><span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">).</span><span class="nx">length</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span>
  <span class="p">};</span>
  <span class="nx">p</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">_querySeparator</span><span class="o">:</span> <span class="s2">&quot;&amp;&quot;</span><span class="p">,</span>
    <span class="nx">_paramsMatcher</span><span class="o">:</span> <span class="sr">/^(?:&amp;[^=]+=[^&amp;]*)+/</span><span class="p">,</span>
    <span class="nx">param</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">f</span><span class="p">,</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">route</span><span class="p">,</span>
        <span class="nx">g</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">delete</span> <span class="nx">a</span><span class="p">.</span><span class="nx">route</span><span class="p">;</span>
      <span class="nx">x</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">g</span><span class="o">++</span>
      <span class="p">});</span>
      <span class="nx">x</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">routes</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">f</span> <span class="o">=</span> <span class="nx">Ca</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>
        <span class="nx">f</span> <span class="o">&gt;</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">f</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">f</span> <span class="o">&gt;=</span> <span class="nx">g</span><span class="p">)</span> <span class="k">return</span> <span class="o">!</span><span class="mi">1</span>
      <span class="p">});</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">routes</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">Ca</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">routes</span><span class="p">[</span><span class="nx">h</span><span class="p">],</span> <span class="nx">a</span><span class="p">)</span> <span class="o">===</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">routes</span><span class="p">[</span><span class="nx">h</span><span class="p">]);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">p</span><span class="p">({},</span> <span class="nx">a</span><span class="p">),</span>
          <span class="nx">h</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">Ba</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">delete</span> <span class="nx">i</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span> <span class="o">===</span> <span class="nx">d</span><span class="p">.</span><span class="nx">defaults</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span>
          <span class="p">}),</span>
          <span class="nx">j</span><span class="p">;</span>
        <span class="nx">x</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">i</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">===</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="k">delete</span> <span class="nx">i</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span>
        <span class="p">});</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
        <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;route&quot;</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">route</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">h</span> <span class="o">+</span> <span class="p">(</span><span class="nx">j</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_querySeparator</span> <span class="o">+</span> <span class="nx">j</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_querySeparator</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">deparam</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">length</span><span class="o">:</span> <span class="o">-</span><span class="mi">1</span>
      <span class="p">};</span>
      <span class="nx">x</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">routes</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">test</span><span class="p">),</span>
          <span class="nx">e</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_querySeparator</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)))</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_paramsMatcher</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">deparam</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">:</span> <span class="p">{},</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">p</span><span class="p">(</span><span class="o">!</span><span class="mi">0</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">b</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span> <span class="nx">f</span><span class="p">);</span>
        <span class="nx">x</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">!==</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_querySeparator</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">b</span><span class="p">.</span><span class="nx">names</span><span class="p">[</span><span class="nx">d</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
        <span class="p">});</span>
        <span class="nx">f</span><span class="p">.</span><span class="nx">route</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">route</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">f</span>
      <span class="p">}</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_querySeparator</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_querySeparator</span> <span class="o">+</span> <span class="nx">a</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_paramsMatcher</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">deparam</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="nx">data</span><span class="o">:</span> <span class="k">new</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">({}),</span>
    <span class="nx">routes</span><span class="o">:</span> <span class="p">{},</span>
    <span class="nx">ready</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="o">!</span><span class="mi">1</span> <span class="o">===</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">Da</span> <span class="o">=</span> <span class="nx">a</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="mi">0</span> <span class="o">===</span> <span class="nx">a</span> <span class="o">||</span> <span class="o">!</span><span class="mi">0</span> <span class="o">===</span> <span class="nx">Da</span><span class="p">)</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_setup</span><span class="p">(),</span> <span class="nx">Ea</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span>
    <span class="p">},</span>
    <span class="nx">url</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">p</span><span class="p">({},</span> <span class="nx">Z</span><span class="p">,</span> <span class="nx">a</span><span class="p">));</span>
      <span class="k">return</span> <span class="s2">&quot;#!&quot;</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;&lt;a &quot;</span> <span class="o">+</span> <span class="nx">kb</span><span class="p">(</span><span class="nx">p</span><span class="p">({</span>
        <span class="nx">href</span><span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span>
      <span class="p">},</span> <span class="nx">d</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot;&lt;/a&gt;&quot;</span>
    <span class="p">},</span>
    <span class="nx">current</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">hash</span> <span class="o">==</span> <span class="s2">&quot;#!&quot;</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">_setup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s2">&quot;hashchange&quot;</span><span class="p">,</span> <span class="nx">Ea</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">_getHash</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/#!?/</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="nx">_setHash</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="o">!</span><span class="mi">0</span><span class="p">);</span>
      <span class="nx">Y</span><span class="p">.</span><span class="nx">hash</span> <span class="o">=</span> <span class="s2">&quot;#!&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">a</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">x</span><span class="p">(</span><span class="s2">&quot;bind unbind delegate undelegate attr removeAttr&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">Fa</span><span class="p">,</span> <span class="nx">Z</span><span class="p">,</span> <span class="nx">Ea</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">setState</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_getHash</span><span class="p">();</span>
    <span class="nx">Z</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">deparam</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="p">(</span><span class="o">!</span><span class="nx">$</span> <span class="o">||</span> <span class="nx">a</span> <span class="o">!==</span> <span class="nx">Ga</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">Z</span><span class="p">,</span> <span class="o">!</span><span class="mi">0</span><span class="p">)</span>
  <span class="p">},</span>
    <span class="nx">Ga</span><span class="p">,</span> <span class="nx">$</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">Fa</span><span class="p">);</span>
    <span class="nx">Fa</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">serialize</span><span class="p">();</span>
      <span class="nx">Ga</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">_setHash</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">},</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">});</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="s2">&quot;ready&quot;</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">ready</span><span class="p">);</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">canMakeObserve</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">canMakeObserve</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">F</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
    <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">unbind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">},</span>
    <span class="nx">C</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">,</span>
    <span class="nx">p</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">,</span>
    <span class="nx">x</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">,</span>
    <span class="nx">lb</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">,</span>
    <span class="nx">Ha</span> <span class="o">=</span> <span class="sr">/\{([^\}]+)\}/g</span><span class="p">,</span>
    <span class="nx">mb</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getObject</span><span class="p">(</span><span class="s2">&quot;$.event.special&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="p">{},</span>
    <span class="nx">Ia</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">delegate</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">undelegate</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">aa</span><span class="p">;</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">Control</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">({</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">Construct</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">Control</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">actions</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">a</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isAction</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">actions</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_action</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">_shifter</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="s2">&quot;string&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">b</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">:</span> <span class="nx">b</span><span class="p">;</span>
      <span class="nx">C</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]);</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">called</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">lb</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">_isAction</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">a</span><span class="p">],</span>
        <span class="nx">c</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">b</span><span class="p">;</span>
      <span class="k">return</span> <span class="s2">&quot;constructor&quot;</span> <span class="o">!==</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="s2">&quot;function&quot;</span> <span class="o">==</span> <span class="nx">c</span> <span class="o">||</span> <span class="s2">&quot;string&quot;</span> <span class="o">==</span> <span class="nx">c</span> <span class="o">&amp;&amp;</span> <span class="nx">C</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">b</span><span class="p">]))</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="o">!</span><span class="nx">mb</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ba</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="sr">/[^\w]/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
    <span class="p">},</span>
    <span class="nx">_action</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Ha</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">||</span> <span class="o">!</span><span class="nx">Ha</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">sub</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="p">[</span><span class="nx">b</span><span class="p">,</span> <span class="nx">o</span><span class="p">])</span> <span class="o">:</span> <span class="nx">a</span><span class="p">,</span>
          <span class="nx">e</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">?</span> <span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">d</span><span class="p">,</span>
          <span class="nx">h</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s+/g</span><span class="p">),</span>
          <span class="nx">g</span> <span class="o">=</span> <span class="nx">h</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="nx">processor</span><span class="o">:</span> <span class="nx">ba</span><span class="p">[</span><span class="nx">g</span><span class="p">]</span> <span class="o">||</span> <span class="nx">aa</span><span class="p">,</span>
          <span class="nx">parts</span><span class="o">:</span> <span class="p">[</span><span class="nx">f</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="nx">g</span><span class="p">],</span>
          <span class="nx">delegate</span><span class="o">:</span> <span class="nx">e</span> <span class="o">?</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">j</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">processors</span><span class="o">:</span> <span class="p">{},</span>
    <span class="nx">defaults</span><span class="o">:</span> <span class="p">{}</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">pluginName</span> <span class="o">||</span> <span class="nx">d</span><span class="p">.</span><span class="nx">_fullName</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;can_control&quot;</span> <span class="o">!==</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;controls&quot;</span><span class="p">))</span> <span class="o">||</span> <span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;controls&quot;</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">p</span><span class="p">({},</span> <span class="nx">d</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">();</span>
      <span class="k">return</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nx">on</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">off</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span>
          <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span><span class="p">,</span>
          <span class="nx">d</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">actions</span><span class="p">,</span>
          <span class="nx">e</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">_shifter</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;destroy&quot;</span><span class="p">),</span>
          <span class="nx">h</span><span class="p">,</span> <span class="nx">g</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">h</span> <span class="k">in</span> <span class="nx">d</span><span class="p">)</span> <span class="nx">d</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">g</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_action</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">),</span> <span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">processor</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">delegate</span> <span class="o">||</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">g</span><span class="p">.</span><span class="nx">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">g</span><span class="p">.</span><span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">)));</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">,</span> <span class="nx">f</span><span class="p">);</span>
        <span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">c</span><span class="p">.</span><span class="nx">unbind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span>
      <span class="p">}</span>
      <span class="s2">&quot;string&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">);</span>
      <span class="nx">e</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="kc">null</span><span class="p">);</span>
      <span class="s2">&quot;string&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">_shifter</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">e</span><span class="p">));</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span> <span class="o">?</span> <span class="nx">Ia</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="o">:</span> <span class="nx">F</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">));</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span><span class="p">.</span><span class="nx">length</span>
    <span class="p">},</span>
    <span class="nx">off</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">x</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span> <span class="o">||</span> <span class="p">[],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_bindings</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">},</span>
    <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span>
        <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">pluginName</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_fullName</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">off</span><span class="p">();</span>
      <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;can_control&quot;</span> <span class="o">!==</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;controls&quot;</span><span class="p">);</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="kc">null</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">ba</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">processors</span><span class="p">;</span>
  <span class="nx">aa</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">_shifter</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d</span> <span class="o">?</span> <span class="nx">Ia</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="o">:</span> <span class="nx">F</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">x</span><span class="p">(</span><span class="s2">&quot;change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave touchstart touchmove touchcancel touchend touchleave&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ba</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="nx">aa</span>
  <span class="p">});</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">processors</span><span class="p">.</span><span class="nx">route</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">h</span><span class="p">,</span> <span class="nx">g</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;route&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">batchNum</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">batchNum</span> <span class="o">!==</span> <span class="nx">h</span><span class="p">))</span> <span class="k">if</span> <span class="p">(</span><span class="nx">h</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">batchNum</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">attr</span><span class="p">(),</span> <span class="k">delete</span> <span class="nx">a</span><span class="p">.</span><span class="nx">route</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">e</span><span class="p">]))</span> <span class="nx">f</span><span class="p">[</span><span class="nx">e</span><span class="p">](</span><span class="nx">a</span><span class="p">);</span>
      <span class="k">else</span> <span class="nx">f</span><span class="p">[</span><span class="nx">f</span><span class="p">[</span><span class="nx">e</span><span class="p">]](</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">};</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="nx">g</span><span class="p">);</span>
    <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="nx">g</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">C</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">,</span>
    <span class="nx">nb</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">,</span>
    <span class="nx">Ja</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">l</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">view</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">C</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">?</span> <span class="nx">a</span> <span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isDeferred</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">frag</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
      <span class="p">})</span> <span class="o">:</span> <span class="nx">l</span><span class="p">.</span><span class="nx">frag</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">frag</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">hookup</span><span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">fragment</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">b</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">fragment</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">buildFragment</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">a</span>
    <span class="p">},</span>
    <span class="nx">toId</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\/|\./g</span><span class="p">),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="k">return</span> <span class="nx">a</span>
      <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">hookup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="nx">e</span><span class="p">,</span> <span class="nx">f</span><span class="p">;</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">childNodes</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">)</span> <span class="o">:</span> <span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="mi">1</span> <span class="o">===</span> <span class="nx">a</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))))</span>
      <span class="p">});</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;data-view-id&quot;</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">f</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">hookups</span><span class="p">[</span><span class="nx">e</span><span class="p">]))</span> <span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">e</span><span class="p">),</span> <span class="k">delete</span> <span class="nx">l</span><span class="p">.</span><span class="nx">hookups</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span> <span class="nx">a</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="s2">&quot;data-view-id&quot;</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">a</span>
    <span class="p">},</span>
    <span class="nx">hookups</span><span class="o">:</span> <span class="p">{},</span>
    <span class="nx">hook</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">l</span><span class="p">.</span><span class="nx">hookups</span><span class="p">[</span><span class="o">++</span><span class="nx">Ja</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="k">return</span> <span class="s2">&quot; data-view-id=&#39;&quot;</span> <span class="o">+</span> <span class="nx">Ja</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span>
    <span class="p">},</span>
    <span class="nx">cached</span><span class="o">:</span> <span class="p">{},</span>
    <span class="nx">cachedRenderers</span><span class="o">:</span> <span class="p">{},</span>
    <span class="nx">cache</span><span class="o">:</span> <span class="o">!</span><span class="mi">0</span><span class="p">,</span>
    <span class="nx">register</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">types</span><span class="p">[</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">suffix</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span>
    <span class="p">},</span>
    <span class="nx">types</span><span class="o">:</span> <span class="p">{},</span>
    <span class="nx">ext</span><span class="o">:</span> <span class="s2">&quot;.ejs&quot;</span><span class="p">,</span>
    <span class="nx">registerScript</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{},</span>
    <span class="nx">preload</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{},</span>
    <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">C</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">j</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">ob</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">;</span>
        <span class="nx">f</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">Ka</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="o">!</span><span class="mi">0</span><span class="p">));</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">when</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">f</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">nb</span><span class="p">(</span><span class="nx">arguments</span><span class="p">),</span>
            <span class="nx">g</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">isDeferred</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">La</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
          <span class="k">else</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isDeferred</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">La</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">shift</span><span class="p">()));</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">g</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
          <span class="nx">h</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span>
          <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">h</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">C</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span>
        <span class="nx">h</span> <span class="o">=</span> <span class="nx">Ka</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">f</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">h</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">(</span><span class="nx">b</span> <span class="o">?</span> <span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="o">:</span> <span class="nx">a</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;resolved&quot;</span> <span class="o">===</span> <span class="nx">h</span><span class="p">.</span><span class="nx">state</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">h</span><span class="p">.</span><span class="nx">__view_id</span><span class="p">)</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">cachedRenderers</span><span class="p">[</span><span class="nx">h</span><span class="p">.</span><span class="nx">__view_id</span><span class="p">],</span> <span class="nx">b</span> <span class="o">?</span> <span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="o">:</span> <span class="nx">a</span><span class="p">;</span>
        <span class="nx">h</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">g</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">?</span> <span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="o">:</span> <span class="nx">a</span>
        <span class="p">})</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">g</span>
    <span class="p">},</span>
    <span class="nx">registerView</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">b</span> <span class="o">=</span> <span class="p">(</span><span class="nx">d</span> <span class="o">||</span> <span class="nx">l</span><span class="p">.</span><span class="nx">types</span><span class="p">[</span><span class="nx">l</span><span class="p">.</span><span class="nx">ext</span><span class="p">]).</span><span class="nx">renderer</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
      <span class="nx">e</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">||</span> <span class="k">new</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">;</span>
      <span class="nx">l</span><span class="p">.</span><span class="nx">cache</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">cached</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">__view_id</span> <span class="o">=</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">cachedRenderers</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">Ma</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;can.view: No template or empty template:&quot;</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">},</span>
    <span class="nx">Ka</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\.[\w\d]+$/</span><span class="p">),</span>
        <span class="nx">e</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">h</span><span class="p">;</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^#/</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">f</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span> <span class="nx">d</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">f</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\/(x\-)?(.+)/</span><span class="p">)[</span><span class="mi">2</span><span class="p">];</span>
      <span class="o">!</span><span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">l</span><span class="p">.</span><span class="nx">cached</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span> <span class="o">+=</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">ext</span><span class="p">);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">h</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">toId</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\/\//</span><span class="p">))</span> <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="nx">a</span> <span class="o">=</span> <span class="o">!</span><span class="nx">o</span><span class="p">.</span><span class="nx">steal</span> <span class="o">?</span> <span class="nx">g</span> <span class="o">:</span> <span class="nx">steal</span><span class="p">.</span><span class="nx">config</span><span class="p">().</span><span class="nx">root</span><span class="p">.</span><span class="nx">mapJoin</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
      <span class="nx">e</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">types</span><span class="p">[</span><span class="nx">d</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">cached</span><span class="p">[</span><span class="nx">h</span><span class="p">])</span> <span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">cached</span><span class="p">[</span><span class="nx">h</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">registerView</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">;</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
        <span class="nx">async</span><span class="o">:</span> <span class="nx">b</span><span class="p">,</span>
        <span class="nx">url</span><span class="o">:</span> <span class="nx">a</span><span class="p">,</span>
        <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">Ma</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>
          <span class="nx">i</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">Ma</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>
          <span class="nx">l</span><span class="p">.</span><span class="nx">registerView</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">i</span>
    <span class="p">},</span>
    <span class="nx">ob</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">isDeferred</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span> <span class="k">return</span> <span class="p">[</span><span class="nx">a</span><span class="p">];</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isDeferred</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]);</span>
      <span class="k">return</span> <span class="nx">b</span>
    <span class="p">},</span>
    <span class="nx">La</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;success&quot;</span> <span class="o">===</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">a</span>
    <span class="p">};</span>
  <span class="nx">o</span><span class="p">.</span><span class="nx">steal</span> <span class="o">&amp;&amp;</span> <span class="nx">steal</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s2">&quot;view js&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">types</span><span class="p">[</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">type</span><span class="p">],</span>
      <span class="nx">e</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">toId</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;steal(&#39;&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">plugin</span> <span class="o">||</span> <span class="s2">&quot;can/view/&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;,function(can){return can.view.preload(&#39;&quot;</span> <span class="o">+</span> <span class="nx">e</span> <span class="o">+</span> <span class="s2">&quot;&#39;,&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">text</span> <span class="o">+</span> <span class="s2">&quot;);\n})&quot;</span><span class="p">;</span>
    <span class="nx">b</span><span class="p">()</span>
  <span class="p">});</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">register</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">types</span><span class="p">[</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">suffix</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">steal</span> <span class="o">&amp;&amp;</span> <span class="nx">steal</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">suffix</span> <span class="o">+</span> <span class="s2">&quot; view js&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">types</span><span class="p">[</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">type</span><span class="p">],</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">toId</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">script</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
        <span class="nx">c</span><span class="p">()</span>
      <span class="p">});</span>
      <span class="nx">l</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">suffix</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">l</span><span class="p">.</span><span class="nx">preload</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">renderer</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">))</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">registerScript</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;can.view.preload(&#39;&quot;</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="s2">&quot;&#39;,&quot;</span> <span class="o">+</span> <span class="nx">l</span><span class="p">.</span><span class="nx">types</span><span class="p">[</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">].</span><span class="nx">script</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;);&quot;</span>
    <span class="p">},</span>
    <span class="nx">preload</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">l</span><span class="p">.</span><span class="nx">cached</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">).</span><span class="nx">resolve</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">frag</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">))</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">pb</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">d</span><span class="p">;</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">__reading</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">__reading</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">obj</span><span class="o">:</span> <span class="nx">a</span><span class="p">,</span>
        <span class="nx">attr</span><span class="o">:</span> <span class="nx">b</span>
      <span class="p">})</span>
    <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">f</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">__reading</span> <span class="o">=</span> <span class="nx">d</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">value</span><span class="o">:</span> <span class="nx">f</span><span class="p">,</span>
      <span class="nx">observed</span><span class="o">:</span> <span class="nx">e</span>
    <span class="p">}</span>
  <span class="p">},</span>
    <span class="nx">Na</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">f</span> <span class="o">=</span> <span class="o">!</span><span class="mi">0</span><span class="p">,</span>
        <span class="nx">h</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">value</span><span class="o">:</span> <span class="nx">j</span><span class="p">,</span>
          <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">a</span> <span class="k">in</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">e</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
              <span class="nx">b</span><span class="p">.</span><span class="nx">observe</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">observe</span><span class="p">.</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
              <span class="k">delete</span> <span class="nx">e</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">g</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">batchNum</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">batchNum</span> <span class="o">!==</span> <span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">h</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
              <span class="nx">c</span> <span class="o">=</span> <span class="nx">k</span><span class="p">();</span>
            <span class="nx">h</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">c</span><span class="p">;</span>
            <span class="nx">c</span> <span class="o">!==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
            <span class="nx">g</span> <span class="o">=</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">batchNum</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">k</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">pb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">),</span>
            <span class="nx">g</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">observed</span><span class="p">,</span>
            <span class="nx">d</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="o">!</span><span class="nx">f</span><span class="p">;</span>
          <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">e</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">_cid</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">attr</span><span class="p">]</span> <span class="o">?</span> <span class="nx">e</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">_cid</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">attr</span><span class="p">].</span><span class="nx">matched</span> <span class="o">=</span> <span class="nx">f</span> <span class="o">:</span> <span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">_cid</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">attr</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">matched</span><span class="o">:</span> <span class="nx">f</span><span class="p">,</span>
              <span class="nx">observe</span><span class="o">:</span> <span class="nx">a</span>
            <span class="p">},</span> <span class="nx">a</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">i</span><span class="p">))</span>
          <span class="p">});</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">h</span> <span class="k">in</span> <span class="nx">e</span><span class="p">)</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">e</span><span class="p">[</span><span class="nx">h</span><span class="p">],</span> <span class="nx">g</span><span class="p">.</span><span class="nx">matched</span> <span class="o">!==</span> <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">observe</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">observe</span><span class="p">.</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="k">delete</span> <span class="nx">e</span><span class="p">[</span><span class="nx">h</span><span class="p">]);</span>
          <span class="k">return</span> <span class="nx">d</span>
        <span class="p">};</span>
      <span class="nx">h</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">k</span><span class="p">();</span>
      <span class="nx">h</span><span class="p">.</span><span class="nx">isListening</span> <span class="o">=</span> <span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">h</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">compute</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">isComputed</span><span class="p">)</span> <span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">f</span><span class="p">,</span> <span class="nx">h</span> <span class="o">=</span> <span class="o">!</span><span class="mi">0</span><span class="p">;</span>
    <span class="s2">&quot;function&quot;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">?</span> <span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">g</span> <span class="o">===</span> <span class="nx">j</span> <span class="o">?</span> <span class="nx">d</span> <span class="o">?</span> <span class="p">(</span><span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">__reading</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">__reading</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">),</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">b</span> <span class="o">||</span> <span class="k">this</span><span class="p">)</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">b</span> <span class="o">||</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>
    <span class="p">}</span> <span class="o">:</span> <span class="p">(</span><span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">===</span> <span class="nx">j</span><span class="p">)</span> <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">__reading</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">__reading</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">),</span> <span class="nx">a</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="nx">d</span> <span class="o">!==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">]);</span>
      <span class="k">return</span> <span class="nx">b</span>
    <span class="p">},</span> <span class="nx">h</span> <span class="o">=</span> <span class="o">!</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">isComputed</span> <span class="o">=</span> <span class="o">!</span><span class="mi">0</span><span class="p">;</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">bind</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="nx">e</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">h</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">Na</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">||</span> <span class="k">this</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">Observe</span><span class="p">.</span><span class="nx">triggerBatch</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">])</span>
      <span class="p">}));</span>
      <span class="nx">e</span><span class="o">++</span>
    <span class="p">};</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">unbind</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="nx">e</span><span class="o">--</span><span class="p">;</span>
      <span class="nx">e</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">h</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">teardown</span><span class="p">()</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">f</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">compute</span><span class="p">.</span><span class="nx">binder</span> <span class="o">=</span> <span class="nx">Na</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">qb</span> <span class="o">=</span> <span class="sr">/(\r|\n)+/g</span><span class="p">,</span>
    <span class="nx">ca</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">option</span><span class="o">:</span> <span class="s2">&quot;textContent&quot;</span><span class="p">,</span>
      <span class="nx">textarea</span><span class="o">:</span> <span class="s2">&quot;value&quot;</span>
    <span class="p">},</span>
    <span class="nx">Oa</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">tr</span><span class="o">:</span> <span class="s2">&quot;tbody&quot;</span><span class="p">,</span>
      <span class="nx">option</span><span class="o">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
      <span class="nx">td</span><span class="o">:</span> <span class="s2">&quot;tr&quot;</span><span class="p">,</span>
      <span class="nx">li</span><span class="o">:</span> <span class="s2">&quot;ul&quot;</span>
    <span class="p">},</span>
    <span class="nx">rb</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(;</span> <span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;&lt;&quot;</span> <span class="o">==</span> <span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">Oa</span><span class="p">[</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]])</span> <span class="k">return</span> <span class="nx">Oa</span><span class="p">[</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]];</span>
        <span class="nx">c</span><span class="o">++</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">sb</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">eval</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">tb</span> <span class="o">=</span> <span class="sr">/([^\s]+)[\s]*=[\s]*$/</span><span class="p">,</span>
    <span class="nx">A</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">da</span> <span class="o">=</span> <span class="nx">w</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">t</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">ea</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">w</span> <span class="o">?</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="nx">da</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">tb</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span> <span class="o">:</span> <span class="nx">A</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">Scanner</span> <span class="o">=</span> <span class="nx">Scanner</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">text</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">tokens</span><span class="o">:</span> <span class="p">[]</span>
    <span class="p">},</span> <span class="nx">a</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tokenReg</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tokenSimple</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s2">&quot;&lt;&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;&gt;&quot;</span><span class="o">:</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
      <span class="s1">&#39;&quot;&#39;</span><span class="o">:</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span>
      <span class="s2">&quot;&#39;&quot;</span><span class="o">:</span> <span class="s2">&quot;&#39;&quot;</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tokenComplex</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tokenMap</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">b</span><span class="p">;</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tokens</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span> <span class="nx">a</span><span class="o">++</span><span class="p">)</span> <span class="nx">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">?</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tokenReg</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="k">this</span><span class="p">.</span><span class="nx">tokenComplex</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
      <span class="nx">abbr</span><span class="o">:</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
      <span class="nx">re</span><span class="o">:</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
      <span class="nx">rescan</span><span class="o">:</span> <span class="nx">b</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="p">}))</span> <span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tokenReg</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="k">this</span><span class="p">.</span><span class="nx">tokenSimple</span><span class="p">[</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="k">this</span><span class="p">.</span><span class="nx">tokenMap</span><span class="p">[</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tokenReg</span> <span class="o">=</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tokenReg</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">concat</span><span class="p">([</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">]).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">Scanner</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">helpers</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="sr">/\s*\(([\$\w]+)\)\s*-&gt;([^\n]*)/</span><span class="p">,</span>
      <span class="nx">fn</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s*\(([\$\w]+)\)\s*-&gt;([^\n]*)/</span><span class="p">);</span>
        <span class="k">return</span> <span class="s2">&quot;function(__){var &quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;=can.$(__);&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;}&quot;</span>
      <span class="p">}</span>
    <span class="p">}],</span>
    <span class="nx">scan</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">f</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tokenSimple</span><span class="p">,</span>
        <span class="nx">h</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tokenComplex</span><span class="p">,</span>
        <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">qb</span><span class="p">,</span> <span class="s2">&quot;\n&quot;</span><span class="p">);</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tokenReg</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">];</span>
        <span class="nx">i</span> <span class="o">&gt;</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">i</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">b</span><span class="p">])</span> <span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">h</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">abbr</span><span class="p">);</span>
          <span class="nx">n</span><span class="p">.</span><span class="nx">rescan</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">rescan</span><span class="p">(</span><span class="nx">g</span><span class="p">));</span>
          <span class="k">break</span>
        <span class="p">}</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">g</span><span class="p">.</span><span class="nx">length</span>
      <span class="p">});</span>
      <span class="nx">e</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">e</span><span class="p">));</span>
      <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;var ___v1ew = [];&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">start</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">)],</span>
        <span class="nx">k</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;___v1ew.push(&quot;</span><span class="p">,</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;\\&quot;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\\\&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\n&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\\&quot;&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;\t&quot;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\t&quot;</span><span class="p">),</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">b</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;);&quot;</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="nx">l</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="nx">m</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="o">!</span><span class="mi">1</span><span class="p">,</span>
        <span class="nx">r</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nx">q</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="nx">I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">s</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tokenMap</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">A</span> <span class="o">=</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">da</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">(</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">c</span><span class="p">[</span><span class="nx">I</span><span class="o">++</span><span class="p">])</span> <span class="o">!==</span> <span class="nx">j</span><span class="p">;)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">===</span> <span class="nx">y</span><span class="p">)</span> <span class="k">switch</span> <span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">left</span><span class="o">:</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">escapeLeft</span><span class="o">:</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">returnLeft</span><span class="o">:</span>
          <span class="nx">o</span> <span class="o">=</span> <span class="nx">A</span> <span class="o">&amp;&amp;</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">commentLeft</span><span class="o">:</span>
          <span class="nx">y</span> <span class="o">=</span> <span class="nx">s</span><span class="p">;</span>
          <span class="nx">g</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
          <span class="nx">g</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">escapeFull</span><span class="o">:</span>
          <span class="nx">o</span> <span class="o">=</span> <span class="nx">A</span> <span class="o">&amp;&amp;</span> <span class="mi">1</span><span class="p">;</span>
          <span class="nx">t</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
          <span class="nx">y</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">escapeLeft</span><span class="p">;</span>
          <span class="nx">g</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
          <span class="nx">t</span> <span class="o">=</span> <span class="nx">c</span><span class="p">[</span><span class="nx">I</span><span class="o">++</span><span class="p">];</span>
          <span class="nx">g</span> <span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">content</span> <span class="o">||</span> <span class="nx">t</span><span class="p">;</span>
          <span class="nx">t</span><span class="p">.</span><span class="nx">before</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">before</span><span class="p">);</span>
          <span class="nx">c</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">I</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span><span class="p">.</span><span class="nx">right</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">commentFull</span><span class="o">:</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">templateLeft</span><span class="o">:</span>
          <span class="nx">g</span> <span class="o">+=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">&quot;&lt;&quot;</span><span class="o">:</span>
          <span class="mi">0</span> <span class="o">!==</span> <span class="nx">c</span><span class="p">[</span><span class="nx">I</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;!--&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">A</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">o</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
          <span class="nx">g</span> <span class="o">+=</span> <span class="nx">s</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">&quot;&gt;&quot;</span><span class="o">:</span>
          <span class="nx">A</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">m</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span> <span class="o">==</span> <span class="nx">g</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
          <span class="nx">o</span> <span class="o">||</span> <span class="nx">ca</span><span class="p">[</span><span class="nx">q</span><span class="p">[</span><span class="nx">q</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]]</span> <span class="o">?</span> <span class="p">(</span><span class="nx">m</span> <span class="o">?</span> <span class="nx">k</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">g</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;,can.view.pending(),&quot;/&gt;&quot;&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="nx">k</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="s1">&#39;,can.view.pending(),&quot;&gt;&quot;&#39;</span><span class="p">),</span> <span class="nx">g</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="nx">g</span> <span class="o">+=</span> <span class="nx">s</span><span class="p">;</span>
          <span class="nx">m</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">q</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">q</span><span class="p">[</span><span class="nx">q</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">&quot;&#39;&quot;</span><span class="o">:</span>
        <span class="k">case</span> <span class="s1">&#39;&quot;&#39;</span><span class="o">:</span>
          <span class="nx">A</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">w</span> <span class="o">&amp;&amp;</span> <span class="nx">w</span> <span class="o">===</span> <span class="nx">s</span> <span class="o">?</span> <span class="nx">w</span> <span class="o">=</span> <span class="kc">null</span> <span class="o">:</span> <span class="kc">null</span> <span class="o">===</span> <span class="nx">w</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">w</span> <span class="o">=</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">da</span> <span class="o">=</span> <span class="nx">m</span><span class="p">));</span>
        <span class="k">default</span><span class="o">:</span>
          <span class="s2">&quot;&lt;&quot;</span> <span class="o">===</span> <span class="nx">m</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">r</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s/</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span> <span class="o">===</span> <span class="nx">r</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">q</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">===</span> <span class="nx">r</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">q</span><span class="p">[</span><span class="nx">q</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">q</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">)),</span> <span class="nx">g</span> <span class="o">+=</span> <span class="nx">s</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">switch</span> <span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">right</span><span class="o">:</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">returnRight</span><span class="o">:</span>
          <span class="k">switch</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">left</span><span class="o">:</span>
            <span class="nx">m</span> <span class="o">=</span> <span class="o">--</span><span class="nx">g</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;{&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">-</span> <span class="o">--</span><span class="nx">g</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
            <span class="mi">1</span> <span class="o">==</span> <span class="nx">m</span> <span class="o">?</span> <span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;___v1ew.push(&quot;</span><span class="p">,</span> <span class="s2">&quot;can.view.txt(0,&#39;&quot;</span> <span class="o">+</span> <span class="nx">rb</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">I</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;,&quot;</span> <span class="o">+</span> <span class="nx">ea</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;,this,function(){&quot;</span><span class="p">,</span> <span class="s2">&quot;var ___v1ew = [];&quot;</span><span class="p">,</span> <span class="nx">g</span><span class="p">),</span> <span class="nx">l</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
              <span class="nx">before</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="nx">after</span><span class="o">:</span> <span class="s2">&quot;return ___v1ew.join(&#39;&#39;)}));\n&quot;</span>
            <span class="p">}))</span> <span class="o">:</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">l</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">==</span> <span class="nx">m</span> <span class="o">?</span> <span class="nx">l</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">:</span> <span class="p">{</span>
              <span class="nx">after</span><span class="o">:</span> <span class="s2">&quot;;&quot;</span>
            <span class="p">},</span> <span class="nx">e</span><span class="p">.</span><span class="nx">before</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">before</span><span class="p">),</span> <span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">after</span><span class="p">));</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">escapeLeft</span><span class="o">:</span>
          <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">returnLeft</span><span class="o">:</span>
            <span class="p">(</span><span class="nx">m</span> <span class="o">=</span> <span class="o">--</span><span class="nx">g</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;{&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">-</span> <span class="o">--</span><span class="nx">g</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">l</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
              <span class="nx">before</span><span class="o">:</span> <span class="s2">&quot;return ___v1ew.join(&#39;&#39;)&quot;</span><span class="p">,</span>
              <span class="nx">after</span><span class="o">:</span> <span class="s2">&quot;}));&quot;</span>
            <span class="p">});</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">===</span> <span class="nx">n</span><span class="p">.</span><span class="nx">escapeLeft</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">ub</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">insert</span><span class="o">:</span> <span class="s2">&quot;___v1ew.push(&quot;</span><span class="p">,</span>
              <span class="nx">tagName</span><span class="o">:</span> <span class="nx">r</span><span class="p">,</span>
              <span class="nx">status</span><span class="o">:</span> <span class="nx">ea</span><span class="p">()</span>
            <span class="p">},</span> <span class="nx">fa</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">fa</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">helpers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">fa</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">helpers</span><span class="p">[</span><span class="nx">fa</span><span class="p">];</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">g</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">g</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="nx">ub</span><span class="p">);</span>
                <span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">source</span> <span class="o">==</span> <span class="sr">/^&gt;[\s|\w]\w*/</span><span class="p">.</span><span class="nx">source</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
                <span class="k">break</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="s2">&quot;object&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">g</span> <span class="o">?</span> <span class="nx">g</span><span class="p">.</span><span class="nx">raw</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">raw</span><span class="p">)</span> <span class="o">:</span> <span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;___v1ew.push(&quot;</span><span class="p">,</span> <span class="s2">&quot;can.view.txt(&quot;</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;,&#39;&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;&#39;,&quot;</span> <span class="o">+</span> <span class="nx">ea</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;,this,function(){ &quot;</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">escape</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;return &quot;</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">m</span> <span class="o">?</span> <span class="s2">&quot;var ___v1ew = [];&quot;</span> <span class="o">:</span> <span class="s2">&quot;}));&quot;</span><span class="p">);</span>
            <span class="nx">t</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">after</span> <span class="o">&amp;&amp;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">after</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">k</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">after</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span> <span class="nx">t</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span>
          <span class="p">}</span>
          <span class="nx">y</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="nx">g</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">n</span><span class="p">.</span><span class="nx">templateLeft</span><span class="o">:</span>
          <span class="nx">g</span> <span class="o">+=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
          <span class="nx">g</span> <span class="o">+=</span> <span class="nx">s</span>
        <span class="p">}</span>
        <span class="nx">m</span> <span class="o">=</span> <span class="nx">s</span>
      <span class="p">}</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
      <span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">);</span>
      <span class="nx">g</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">out</span><span class="o">:</span> <span class="s2">&quot;with(_VIEW) { with (_CONTEXT) {&quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; return ___v1ew.join(&#39;&#39;)}}&quot;</span>
      <span class="p">};</span>
      <span class="nx">sb</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="s2">&quot;this.fn = (function(_CONTEXT,_VIEW){&quot;</span> <span class="o">+</span> <span class="nx">g</span><span class="p">.</span><span class="nx">out</span> <span class="o">+</span> <span class="s2">&quot;});\r\n//@ sourceURL=&quot;</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="s2">&quot;.js&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">g</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">ga</span> <span class="o">=</span> <span class="o">!</span><span class="mi">0</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">().</span><span class="nx">_</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">yb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ga</span> <span class="o">=</span> <span class="o">!</span><span class="mi">1</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">J</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;className&quot;</span><span class="p">,</span>
    <span class="nx">value</span><span class="o">:</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span>
    <span class="nx">textContent</span><span class="o">:</span> <span class="s2">&quot;textContent&quot;</span>
  <span class="p">},</span>
    <span class="nx">vb</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s2">&quot;&quot;</span><span class="o">:</span> <span class="s2">&quot;span&quot;</span><span class="p">,</span>
      <span class="nx">table</span><span class="o">:</span> <span class="s2">&quot;tr&quot;</span><span class="p">,</span>
      <span class="nx">tr</span><span class="o">:</span> <span class="s2">&quot;td&quot;</span><span class="p">,</span>
      <span class="nx">ol</span><span class="o">:</span> <span class="s2">&quot;li&quot;</span><span class="p">,</span>
      <span class="nx">ul</span><span class="o">:</span> <span class="s2">&quot;li&quot;</span><span class="p">,</span>
      <span class="nx">tbody</span><span class="o">:</span> <span class="s2">&quot;tr&quot;</span><span class="p">,</span>
      <span class="nx">thead</span><span class="o">:</span> <span class="s2">&quot;tr&quot;</span><span class="p">,</span>
      <span class="nx">tfoot</span><span class="o">:</span> <span class="s2">&quot;tr&quot;</span><span class="p">,</span>
      <span class="nx">select</span><span class="o">:</span> <span class="s2">&quot;option&quot;</span><span class="p">,</span>
      <span class="nx">optgroup</span><span class="o">:</span> <span class="s2">&quot;option&quot;</span>
    <span class="p">},</span>
    <span class="nx">wb</span> <span class="o">=</span> <span class="sr">/__!!__/g</span><span class="p">,</span>
    <span class="nx">ca</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">option</span><span class="o">:</span> <span class="s2">&quot;textContent&quot;</span><span class="p">,</span>
      <span class="nx">textarea</span><span class="o">:</span> <span class="s2">&quot;value&quot;</span>
    <span class="p">},</span>
    <span class="nx">Pa</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span><span class="s2">&quot;checked&quot;</span><span class="p">,</span> <span class="s2">&quot;disabled&quot;</span><span class="p">,</span> <span class="s2">&quot;readonly&quot;</span><span class="p">,</span> <span class="s2">&quot;required&quot;</span><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">J</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span>
    <span class="p">}),</span>
    <span class="nx">ha</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">J</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="nx">J</span><span class="p">[</span><span class="nx">b</span><span class="p">]]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">Pa</span><span class="p">)</span> <span class="o">?</span> <span class="o">!</span><span class="mi">0</span> <span class="o">:</span> <span class="nx">d</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">K</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">ia</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;string&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">a</span><span class="p">)</span> <span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">!==</span> <span class="nx">a</span><span class="p">)</span> <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">hookup</span> <span class="o">&amp;&amp;</span>
      <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">hookup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
      <span class="p">}</span> <span class="o">||</span> <span class="s2">&quot;function&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">b</span> <span class="o">?</span> <span class="p">(</span><span class="nx">K</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">a</span>
    <span class="p">},</span>
    <span class="nx">xb</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;string&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">||</span> <span class="s2">&quot;number&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">esc</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">:</span> <span class="nx">ia</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">D</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">O</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">P</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">ja</span> <span class="o">=</span> <span class="s2">&quot;ejs_&quot;</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">(),</span>
    <span class="nx">ka</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">B</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">ga</span> <span class="o">||</span> <span class="mi">3</span> <span class="o">!==</span> <span class="nx">a</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">)</span> <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="nx">ja</span><span class="p">]</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="nx">ja</span><span class="p">]</span> <span class="o">:</span> <span class="nx">a</span><span class="p">[</span><span class="nx">ja</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">?</span> <span class="s2">&quot;element_&quot;</span> <span class="o">:</span> <span class="s2">&quot;obj_&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="o">++</span><span class="nx">ka</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">b</span> <span class="k">in</span> <span class="nx">O</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">O</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">===</span> <span class="nx">a</span><span class="p">)</span> <span class="k">return</span> <span class="nx">b</span><span class="p">;</span>
      <span class="nx">O</span><span class="p">[</span><span class="s2">&quot;text_&quot;</span> <span class="o">+</span> <span class="o">++</span><span class="nx">ka</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="k">return</span> <span class="s2">&quot;text_&quot;</span> <span class="o">+</span> <span class="nx">ka</span>
    <span class="p">},</span>
    <span class="nx">Qa</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">D</span><span class="p">[</span><span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">)];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
        <span class="mi">0</span> <span class="o">&lt;=</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="k">delete</span> <span class="nx">D</span><span class="p">[</span><span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">)]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">Ra</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">D</span><span class="p">[</span><span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">)];</span>
      <span class="nx">c</span> <span class="o">||</span> <span class="p">(</span><span class="nx">c</span> <span class="o">=</span> <span class="nx">D</span><span class="p">[</span><span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">pending</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">K</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
      <span class="nx">lastHookups</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="nx">K</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">hook</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
        <span class="p">})</span>
      <span class="p">})</span>
    <span class="p">},</span>
    <span class="nx">registerNode</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">P</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Ra</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
      <span class="p">})</span>
    <span class="p">},</span>
    <span class="nx">unregisterNode</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Qa</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">delete</span> <span class="nx">P</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nx">txt</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">compute</span><span class="p">.</span><span class="nx">binder</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">h</span><span class="p">.</span><span class="nx">isListening</span><span class="p">)</span> <span class="k">return</span> <span class="p">(</span><span class="nx">a</span> <span class="o">||</span> <span class="mi">0</span> <span class="o">!==</span> <span class="nx">d</span> <span class="o">?</span> <span class="nx">xb</span> <span class="o">:</span> <span class="nx">ia</span><span class="p">)(</span><span class="nx">h</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">k</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">h</span><span class="p">.</span><span class="nx">teardown</span><span class="p">();</span>
        <span class="nx">i</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">unregisterNode</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
      <span class="p">},</span>
        <span class="nx">l</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">c</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">,</span> <span class="nx">k</span><span class="p">);</span>
          <span class="nx">g</span> <span class="o">=</span> <span class="nx">a</span>
        <span class="p">},</span>
        <span class="nx">m</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">a</span> <span class="o">||</span> <span class="p">(</span><span class="nx">k</span><span class="p">(),</span> <span class="nx">c</span><span class="p">.</span><span class="nx">unbind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span> <span class="s2">&quot;destroyed&quot;</span><span class="p">,</span> <span class="nx">k</span><span class="p">))</span>
        <span class="p">},</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="nx">vb</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;span&quot;</span><span class="p">,</span>
        <span class="nx">o</span><span class="p">,</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">ca</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">===</span> <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">p</span><span class="p">)</span> <span class="k">return</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="nx">e</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">hook</span><span class="p">(</span><span class="nx">a</span> <span class="o">?</span>
      <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d</span><span class="p">.</span><span class="nx">nodeValue</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">a</span><span class="p">;</span>
          <span class="nx">m</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span>
        <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="mi">11</span> <span class="o">===</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">b</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
          <span class="nx">d</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
        <span class="nx">l</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
      <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
          <span class="nx">m</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span><span class="p">)</span>
        <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="mi">11</span> <span class="o">===</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">b</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
          <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">frag</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">b</span><span class="p">),</span>
              <span class="nx">f</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">),</span>
              <span class="nx">g</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">?</span> <span class="nx">d</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">a</span><span class="p">;</span>
            <span class="nx">g</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="o">?</span> <span class="nx">g</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">g</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)</span> <span class="o">:</span> <span class="nx">g</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
            <span class="nx">d</span> <span class="o">?</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="nx">d</span><span class="p">)),</span> <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">f</span><span class="p">))</span> <span class="o">:</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">)),</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">registerNode</span><span class="p">(</span><span class="nx">d</span><span class="p">))</span>
          <span class="p">};</span>
        <span class="nx">e</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="p">[</span><span class="nx">a</span><span class="p">]);</span>
        <span class="nx">l</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
      <span class="p">})</span> <span class="o">+</span> <span class="s2">&quot;&gt;@@!!@@&lt;/&quot;</span> <span class="o">+</span> <span class="nx">e</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="mi">1</span> <span class="o">===</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">h</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[&#39;&quot;]/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">K</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">o</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">(</span><span class="nx">b</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[&#39;&quot;]/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">),</span>
              <span class="nx">d</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">d</span> <span class="o">!=</span> <span class="nx">r</span> <span class="o">&amp;&amp;</span> <span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">Pa</span><span class="p">)</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span> <span class="o">=</span> <span class="o">!</span><span class="mi">1</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ha</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">d</span><span class="p">)</span>
          <span class="p">};</span>
          <span class="nx">l</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">h</span><span class="p">.</span><span class="nx">value</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">q</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">===</span> <span class="nx">d</span> <span class="o">?</span> <span class="nx">p</span> <span class="o">:</span> <span class="nx">d</span><span class="p">;</span>
      <span class="p">(</span><span class="mi">0</span> <span class="o">===</span> <span class="nx">d</span> <span class="o">?</span> <span class="nx">lastHookups</span> <span class="o">:</span> <span class="nx">K</span><span class="p">).</span><span class="nx">push</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
          <span class="nx">ha</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">q</span><span class="p">,</span> <span class="nx">g</span><span class="p">.</span><span class="nx">render</span><span class="p">(),</span> <span class="nx">p</span><span class="p">)</span>
        <span class="p">};</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
          <span class="nx">d</span><span class="p">;</span>
        <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="s2">&quot;hooks&quot;</span><span class="p">))</span> <span class="o">||</span> <span class="nx">c</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="s2">&quot;hooks&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="p">{});</span>
        <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="p">(</span><span class="nx">J</span><span class="p">[</span><span class="nx">q</span><span class="p">]</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="nx">J</span><span class="p">[</span><span class="nx">q</span><span class="p">]]</span> <span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="nx">q</span><span class="p">))</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nx">b</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;__!!__&quot;</span><span class="p">),</span>
          <span class="nx">f</span> <span class="o">=</span> <span class="p">[],</span>
          <span class="nx">g</span><span class="p">;</span>
        <span class="nx">f</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">b</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;__!!__&quot;</span><span class="p">));</span>
        <span class="nx">d</span><span class="p">[</span><span class="nx">q</span><span class="p">]</span> <span class="o">?</span> <span class="nx">d</span><span class="p">[</span><span class="nx">q</span><span class="p">].</span><span class="nx">bindings</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d</span><span class="p">[</span><span class="nx">q</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">wb</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">ia</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">bindings</span><span class="p">[</span><span class="nx">a</span><span class="o">++</span><span class="p">].</span><span class="nx">value</span><span class="p">)</span>
            <span class="p">})</span>
          <span class="p">},</span>
          <span class="nx">bindings</span><span class="o">:</span> <span class="p">[</span><span class="nx">h</span><span class="p">],</span>
          <span class="nx">batchNum</span><span class="o">:</span> <span class="nx">j</span>
        <span class="p">};</span>
        <span class="nx">g</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="nx">q</span><span class="p">];</span>
        <span class="nx">f</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="nx">ha</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">q</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="nx">p</span><span class="p">);</span>
        <span class="nx">l</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="s2">&quot;__!!__&quot;</span>
    <span class="p">},</span>
    <span class="nx">replace</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">D</span><span class="p">[</span><span class="nx">B</span><span class="p">(</span><span class="nx">d</span><span class="p">)]),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">P</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span>
            <span class="nx">h</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">f</span><span class="p">),</span>
            <span class="nx">g</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">f</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="nx">h</span> <span class="o">&amp;&amp;</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">h</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">g</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">Qa</span><span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">e</span><span class="p">);</span>
            <span class="nx">f</span><span class="p">.</span><span class="nx">splice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="p">[</span><span class="nx">h</span><span class="p">,</span> <span class="nx">g</span> <span class="o">-</span> <span class="nx">h</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">));</span>
            <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">Ra</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span>
            <span class="p">})</span>
          <span class="p">}</span> <span class="k">else</span> <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">unregisterNode</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
        <span class="p">})</span>
      <span class="p">})</span>
    <span class="p">},</span>
    <span class="nx">canExpando</span><span class="o">:</span> <span class="nx">ga</span><span class="p">,</span>
    <span class="nx">textNodeMap</span><span class="o">:</span> <span class="nx">O</span><span class="p">,</span>
    <span class="nx">nodeMap</span><span class="o">:</span> <span class="nx">D</span><span class="p">,</span>
    <span class="nx">nodeListMap</span><span class="o">:</span> <span class="nx">P</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="p">,</span>
    <span class="nx">v</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!=</span> <span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">v</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
        <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="s2">&quot;function&quot;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">fn</span><span class="o">:</span> <span class="nx">a</span>
      <span class="p">}</span> <span class="o">:</span> <span class="p">(</span><span class="nx">p</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">scanner</span><span class="p">.</span><span class="nx">scan</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">))</span>
    <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">EJS</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
  <span class="nx">v</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="k">new</span> <span class="nx">v</span><span class="p">.</span><span class="nx">Helpers</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">||</span> <span class="p">{}))</span>
  <span class="p">};</span>
  <span class="nx">p</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">scanner</span><span class="o">:</span> <span class="k">new</span> <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">Scanner</span><span class="p">({</span>
      <span class="nx">tokens</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;templateLeft&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;%%&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;templateRight&quot;</span><span class="p">,</span> <span class="s2">&quot;%&gt;&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;returnLeft&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;%==&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;escapeLeft&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;%=&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;commentLeft&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;%#&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;%&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="s2">&quot;%&gt;&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;returnRight&quot;</span><span class="p">,</span> <span class="s2">&quot;%&gt;&quot;</span><span class="p">]</span>
      <span class="p">]</span>
    <span class="p">})</span>
  <span class="p">});</span>
  <span class="nx">v</span><span class="p">.</span><span class="nx">Helpers</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_data</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_extras</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="nx">v</span><span class="p">.</span><span class="nx">Helpers</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">list</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">b</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
      <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">register</span><span class="p">({</span>
    <span class="nx">suffix</span><span class="o">:</span> <span class="s2">&quot;ejs&quot;</span><span class="p">,</span>
    <span class="nx">script</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;can.EJS(function(_CONTEXT,_VIEW) { &quot;</span> <span class="o">+</span> <span class="p">(</span><span class="k">new</span> <span class="nx">v</span><span class="p">({</span>
        <span class="nx">text</span><span class="o">:</span> <span class="nx">b</span><span class="p">,</span>
        <span class="nx">name</span><span class="o">:</span> <span class="nx">a</span>
      <span class="p">})).</span><span class="nx">template</span><span class="p">.</span><span class="nx">out</span> <span class="o">+</span> <span class="s2">&quot; })&quot;</span>
    <span class="p">},</span>
    <span class="nx">renderer</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">v</span><span class="p">({</span>
        <span class="nx">text</span><span class="o">:</span> <span class="nx">b</span><span class="p">,</span>
        <span class="nx">name</span><span class="o">:</span> <span class="nx">a</span>
      <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})(</span><span class="nb">window</span><span class="p">);</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 