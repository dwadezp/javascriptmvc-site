(function(c,h,i){var e=function(a,b,d){d||(d=b,b={});b=b||{};a=c.makeArray(a);if(!b.testIf||b.testIf.call(this)){var g=this;c.each(a,function(a,c){g.validations[c]||(g.validations[c]=[]);g.validations[c].push(function(a){a=d.call(this,a);return a===i?i:b.message||a})})}},h=c.Observe.prototype,l=h.__set;h.__set=function(a,b,d,g,j){var f=this,e=f.constructor.validations,k=function(b){j&&j.call(f,b);c.trigger(f,"error",[a,b],!0)};l.call(f,a,b,d,g,k);e&&e[a]&&(b=f.errors(a))&&k(b);return this};c.extend(c.Observe,
{validations:{},validate:e,validationMessages:{format:"is invalid",inclusion:"is not a valid option (perhaps out of range)",lengthShort:"is too short",lengthLong:"is too long",presence:"can't be empty",range:"is out of range"},validateFormatOf:function(a,b,d){e.call(this,a,d,function(a){if("undefined"!=typeof a&&""!=a&&null==(""+a).match(b))return this.constructor.validationMessages.format})},validateInclusionOf:function(a,b,d){e.call(this,a,d,function(a){if("undefined"!=typeof a&&0==c.grep(b,function(b){return b==
a}).length)return this.constructor.validationMessages.inclusion})},validateLengthOf:function(a,b,d,c){e.call(this,a,c,function(a){if("undefined"==typeof a&&0<b||a.length<b)return this.constructor.validationMessages.lengthShort+" (min="+b+")";if("undefined"!=typeof a&&a.length>d)return this.constructor.validationMessages.lengthLong+" (max="+d+")"})},validatePresenceOf:function(a,b){e.call(this,a,b,function(a){if("undefined"==typeof a||""==a||null===a)return this.constructor.validationMessages.presence})},
validateRangeOf:function(a,b,d,c){e.call(this,a,c,function(a){if("undefined"!=typeof a&&a<b||a>d)return this.constructor.validationMessages.range+" ["+b+","+d+"]"})}});c.extend(c.Observe.prototype,{errors:function(a,b){a&&(a=c.isArray(a)?a:[a]);var d={},g=this,e=function(a,e){c.each(e,function(c,e){var f=e.call(g,h?g.__convert?g.__convert(a,b):b:g[a]);f&&(d[a]||(d[a]=[]),d[a].push(f))})},f=this.constructor.validations,h=a&&1===a.length&&2===arguments.length;c.each(a||f||{},function(a,b){"number"==
typeof a&&(a=b,b=f[a]);e(a,b||[])});return c.isEmptyObject(d)?null:h?d[a[0]]:d}})})(can={},this);
