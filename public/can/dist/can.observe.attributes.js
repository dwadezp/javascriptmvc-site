(function(d,i,j){d.each([d.Observe,d.Model],function(g,c){if(c!==j){d.extend(c,{attributes:{},convert:{date:function(a){var b=typeof a;return"string"===b?isNaN(Date.parse(a))?null:Date.parse(a):"number"===b?new Date(a):a},number:function(a){return parseFloat(a)},"boolean":function(a){return Boolean("false"===a?0:a)},"default":function(a,b,c){var b=d.getObject(c),e=i;0<=c.indexOf(".")&&(c=c.substring(0,c.lastIndexOf(".")),e=d.getObject(c));return"function"==typeof b?b.call(e,a):a}},serialize:{"default":function(a){return isObject(a)&&
a.serialize?a.serialize():a},date:function(a){return a&&a.getTime()}}});var f=c.setup;c.setup=function(a,c,g){var e=this;f.call(e,a,c,g);d.each(["attributes","validations"],function(c,b){if(!e[b]||a[b]===e[b])e[b]={}});d.each(["convert","serialize"],function(c,b){a[b]!=e[b]&&(e[b]=d.extend({},a[b],e[b]))})}}});d.Observe.prototype.__convert=function(d,c){var f=this.constructor,a,b;f.attributes&&(a=f.attributes[d],b=f.convert[a]||f.convert["default"]);return null===c||!a?c:b.call(f,c,function(){},a)};
d.Observe.prototype.serialize=function(){var d={},c=this.constructor,f=c.attributes;this.each(function(a,b){var h=f[a],e=c.serialize[h];d[a]=b&&"function"==typeof b.serialize?b.serialize():e?e(b,h):b});return d}})(can={},this);
