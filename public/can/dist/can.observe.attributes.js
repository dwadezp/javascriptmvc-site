(function(f,m){var g=f.Observe,h=f.each,i=f.getObject,j=f.extend;j(g,{attributes:{},convert:{date:function(a){var c=typeof a;return"string"===c?isNaN(Date.parse(a))?null:Date.parse(a):"number"===c?new Date(a):a},number:function(a){return parseFloat(a)},"boolean":function(a){return Boolean("false"===a?0:a)},"default":function(a,c,b){var c=i(b),d=m;0<=b.indexOf(".")&&(b=b.substring(0,b.lastIndexOf(".")),d=i(b));return"function"==typeof c?c.call(d,a):a}},serialize:{"default":function(a){return isObject(a)&&
a.serialize?a.serialize():a},date:function(a){return a&&a.getTime()}}});var k=g.prototype,n=g.setup;k.__convert=function(a,c){var b=this.constructor,d,e;b.attributes&&(d=b.attributes[a],e=b.convert[d]||b.convert["default"]);return null===c||!d?c:e.call(b,c,function(){},d)};k.serialize=function(){var a={},c=this.constructor,b=c.attributes;this.each(function(d,e){var l=b[d],f=c.serialize[l];a[d]=e&&"function"==typeof e.serialize?e.serialize():f?f(e,l):e});return a};g.setup=function(a,c,b){var d=this;
n.call(d,a,c,b);h(["attributes","validations"],function(b,c){if(!d[c]||a[c]===d[c])d[c]={}});h(["convert","serialize"],function(c,b){a[b]!=d[b]&&(d[b]=j({},a[b],d[b]))})}})(can={},this);
