(function(d,j,i){d.each([d.Observe,d.Model],function(h,e){if(e!==i){d.extend(e,{attributes:{},convert:{date:function(a){var c=typeof a;return"string"===c?isNaN(Date.parse(a))?null:Date.parse(a):"number"===c?new Date(a):a},number:function(a){return parseFloat(a)},"boolean":function(a){return Boolean("false"===a?0:a)},"default":function(a,c,b){var c=d.getObject(b),f=j;0<=b.indexOf(".")&&(b=b.substring(0,b.lastIndexOf(".")),f=d.getObject(b));return"function"==typeof c?c.call(f,a):a}},serialize:{"default":function(a){return isObject(a)&&
a.serialize?a.serialize():a},date:function(a){return a&&a.getTime()}}});var g=e.setup;e.setup=function(a,c,b){var f=this;g.call(f,a,c,b);d.each(["attributes"],function(c,b){if(!f[b]||a[b]===f[b])f[b]={}});d.each(["convert","serialize"],function(b,c){a[c]!=f[c]&&(f[c]=d.extend({},a[c],f[c]))})}}});d.Observe.prototype.__convert=function(d,e){var g=this.constructor,a,c;g.attributes&&(a=g.attributes[d],c=g.convert[a]||g.convert["default"]);return null===e||!a?e:c.call(g,e,function(){},a)};d.Observe.prototype.serialize=
function(h){var e={},g=this.constructor,a={};h!=i?a[h]=this[h]:a=this.__get();d.each(a,function(a,b){var d=g.attributes[a],h=g.serialize[d];e[a]=b&&"function"==typeof b.serialize?b.serialize():h?h(b,d):b});return e}})(can={},this);
