(function(){$.extend(can,jQuery,{trigger:function(a,b,c){a.trigger?a.trigger(b,c):$.event.trigger(b,c,a,true)},addEvent:function(a,b){$([this]).bind(a,b);return this},removeEvent:function(a,b){$([this]).unbind(a,b);return this},$:jQuery});$.each(["bind","unbind","undelegate","delegate"],function(a,b){can[b]=function(){var c=this[b]?this:$([this]);c[b].apply(c,arguments);return this}});$.each(["append","filter","addClass","remove","data","get"],function(a,b){can[b]=function(c){return c[b].apply(c,
can.makeArray(arguments).slice(1))}});var r={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./,quote:/"/g,singleQuote:/'/g},U=function(a,b,c){return a[b]!==undefined?a[b]:c&&(a[b]={})},I=function(a){return/^f|o/.test(typeof a)},V;can.String=can.extend({esc:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(r.quote,"&#34;").replace(r.singleQuote,"&#39;")},getObject:V=
function(a,b,c){a=a?a.split(r.dot):[];var d=a.length,e,f,g,h=0;b=can.isArray(b)?b:[b||window];if(d==0)return b[0];for(;e=b[h++];){for(g=0;g<d-1&&I(e);g++)e=U(e,a[g],c);if(I(e)){f=U(e,a[g],c);if(f!==undefined){c===false&&delete e[a[g]];return f}}}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},underscore:function(a){return a.replace(r.colons,"/").replace(r.words,"$1_$2").replace(r.lowUp,"$1_$2").replace(r.dash,"_").toLowerCase()},sub:function(a,b,c){var d=[];c=typeof c=="boolean"?
!c:c;d.push(a.replace(r.replacer,function(e,f){e=V(f,b,c);if(I(e)){d.push(e);return""}else return""+e}));return d.length<=1?d[0]:d},_regs:r});var J=false;can.Construct=function(){if(arguments.length)return can.Construct.extend.apply(can.Construct,arguments)};can.extend(can.Construct,{newInstance:function(){var a=this.instance(),b;if(a.setup)b=a.setup.apply(a,arguments);if(a.init)a.init.apply(a,can.isArray(b)?b:arguments);return a},_inherit:function(a,b,c){can.extend(c||a,a||{})},setup:function(a){this.defaults=
can.extend(true,{},a.defaults,this.defaults)},instance:function(){J=true;var a=new this;J=false;return a},extend:function(a,b,c){function d(){if(!J)return this.constructor!==d&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.constructor.newInstance.apply(this.constructor,arguments)}if(typeof a!="string"){c=b;b=a;a=null}if(!c){c=b;b=null}c=c||{};var e=this,f=this.prototype,g,h,i,j;j=this.instance();this._inherit(c,f,j);for(g in this)if(this.hasOwnProperty(g))d[g]=this[g];
this._inherit(b,this,d);if(a){i=a.split(/\./);h=i.pop();i=f=can.String.getObject(i.join("."),window,true);var k=can.String.underscore(a.replace(/\./g,"_")),l=can.String.underscore(h);f[h]=d}can.extend(d,{prototype:j,namespace:i,shortName:h,_shortName:l,_fullName:k,constructor:d,fullName:a});d.prototype.constructor=d;h=d.setup.apply(d,[e].concat(can.makeArray(arguments)));if(d.init)d.init.apply(d,h||[e].concat(can.makeArray(arguments)));return d}});var s=function(a){return typeof a==="object"&&a!==
null&&a&&!(a instanceof Date)},K=function(a,b){return can.each(a,function(c,d){d&&d.unbind&&d.unbind("change"+b)})},L=function(a,b,c){if(a instanceof w)K([a],c._namespace);else a=can.isArray(a)?new w.List(a):new w(a);a.bind("change"+c._namespace,function(d){var e=can.makeArray(arguments);d=e.shift();e[0]=b==="*"?c.indexOf(a)+"."+e[0]:b+"."+e[0];can.trigger(c,d,e)});return a},W=0,x=null,X=function(){if(!x){x=[];return true}},m=function(a,b,c){if(!a._init)if(x)x.push([a,{type:b,batchNum:Y},c]);else return can.trigger(a,
b,c)},Y=1,Z=function(){var a=x.slice(0);x=null;Y++;can.each(a,function(b,c){can.trigger.apply(can,c)})},E=function(a,b,c){a.each(function(d,e){c[d]=s(e)&&can.isFunction(e[b])?e[b]():e});return c},y=function(a){return function(){return can[a].apply(this,arguments)}},F=y("addEvent");y=y("removeEvent");var M=function(a){return can.isArray(a)?a:(""+a).split(".")},w=can.Construct("can.Observe",{setup:function(){can.Construct.setup.apply(this,arguments)},bind:F,unbind:y},{setup:function(a){this._data={};
this._namespace=".observe"+ ++W;this._init=1;this.attr(a);delete this._init},attr:function(a,b){var c=typeof a;if(c!="string"&&c!="number")return this._attrs(a,b);else if(b===undefined){w.__reading&&w.__reading(this,a);return this._get(a)}else{this._set(a,b);return this}},each:function(){return can.each.apply(null,[this.__get()].concat(can.makeArray(arguments)))},removeAttr:function(a){a=M(a);var b=a.shift(),c=this._data[b];if(a.length)return c.removeAttr(a);else{delete this._data[b];b in this.constructor.prototype||
delete this[b];m(this,"change",[b,"remove",undefined,c]);m(this,b,undefined,c);return c}},_get:function(a){a=M(a);var b=this.__get(a.shift());return a.length?b?b._get(a):undefined:b},__get:function(a){return a?this._data[a]:this._data},_set:function(a,b){a=M(a);var c=a.shift(),d=this.__get(c);if(s(d)&&a.length)d._set(a,b);else if(a.length)throw"can.Observe: set a property on an object that does not exist";else this.__set(c,b,d)},__set:function(a,b,c){if(b!==c){var d=this.__get().hasOwnProperty(a)?
"set":"add";this.___set(a,s(b)?L(b,a,this):b);m(this,"change",[a,d,b,c]);m(this,a,b,c);c&&K([c],this._namespace)}},___set:function(a,b){this._data[a]=b;a in this.constructor.prototype||(this[a]=b)},bind:F,unbind:y,serialize:function(){return E(this,"serialize",{})},_attrs:function(a,b){if(a===undefined)return E(this,"attr",{});a=can.extend(true,{},a);var c,d=X(),e=this;this.each(function(f,g){var h=a[f];if(h===undefined)b&&e.removeAttr(f);else{if(s(g)&&s(h))g.attr(h,b);else g!=h&&e._set(f,h);delete a[f]}});
for(c in a){newVal=a[c];this._set(c,newVal)}d&&Z();return this}}),ua=[].splice,N=w("can.Observe.List",{setup:function(a,b){this.length=0;this._namespace=".list"+ ++W;this._init=1;this.bind("change",can.proxy(this._changes,this));this.push.apply(this,can.makeArray(a||[]));can.extend(this,b);delete this._init},_changes:function(a,b,c,d,e){if(!~b.indexOf("."))if(c==="add"){m(this,c,[d,+b]);m(this,"length",[this.length])}else if(c==="remove"){m(this,c,[e,+b]);m(this,"length",[this.length])}else m(this,
c,[d,+b])},__get:function(a){return a?this[a]:this},___set:function(a,b){this[a]=b},serialize:function(){return E(this,"serialize",[])},splice:function(a,b){var c=can.makeArray(arguments),d;for(d=2;d<c.length;d++){var e=c[d];if(s(e))c[d]=L(e,"*",this)}if(b===undefined)b=c[1]=this.length-a;d=ua.apply(this,c);if(b>0){m(this,"change",[""+a,"remove",undefined,d]);K(d,this._namespace)}c.length>2&&m(this,"change",[""+a,"add",c.slice(2),d]);return d},_attrs:function(a,b){if(a===undefined)return E(this,"attr",
[]);a=a.slice(0);for(var c=Math.min(a.length,this.length),d=X(),e=0;e<c;e++){var f=this[e],g=a[e];if(s(f)&&s(g))f.attr(g,b);else f!=g&&this._set(e,g)}if(a.length>this.length)this.push(a.slice(this.length));else a.length<this.length&&b&&this.splice(a.length);d&&Z()}}),aa=function(a){return a[0]&&can.isArray(a[0])?a[0]:can.makeArray(a)};can.each({push:"length",unshift:0},function(a,b){N.prototype[a]=function(){for(var c=aa(arguments),d=b?this.length:0,e=0;e<c.length;e++){var f=c[e];if(s(f))c[e]=L(f,
"*",this)}if(c.length==1&&this.comparator){this.splice(this.sortedIndex(c[0]),0,c[0]);return this.length}e=[][a].apply(this,c);if(this.comparator&&c.length>1){this.sort(null,true);m(this,"reset",[c])}else m(this,"change",[""+d,"add",c,undefined]);return e}});can.each({pop:"length",shift:0},function(a,b){N.prototype[a]=function(){var c=aa(arguments),d=b&&this.length?this.length-1:0;c=[][a].apply(this,c);m(this,"change",[""+d,"remove",undefined,[c]]);c&&c.unbind&&c.unbind("change"+this._namespace);
return c}});N.prototype.indexOf=[].indexOf||function(a){return can.inArray(a,this)};var va=/^\d+$/,wa=/([^\[\]]+)|(\[\])/g,xa=/([^?#]*)(#.*)?$/,ba=function(a){return decodeURIComponent(a.replace(/\+/g," "))};can.extend(can.String,{deparam:function(a){var b={};if(a&&xa.test(a)){a=a.split("&");can.each(a,function(c,d){c=d.split("=");var e=ba(c.shift());d=ba(c.join("="));current=b;c=e.match(wa);e=0;for(var f=c.length-1;e<f;e++){current[c[e]]||(current[c[e]]=va.test(c[e+1])||c[e+1]=="[]"?[]:{});current=
current[c[e]]}lastPart=c.pop();if(lastPart=="[]")current.push(d);else current[lastPart]=d})}return b}});var ya=$.cleanData;$.cleanData=function(a){for(var b=0,c;(c=a[b])!==undefined;b++)$(c).triggerHandler("destroyed");ya(a)};var ca=/\:([\w\.]+)/g,da=/^(?:&[^=]+=[^&]*)+/,za=function(a){return can.map(a,function(b,c){return(c==="className"?"class":c)+'="'+can.String.esc(b)+'"'}).join(" ")},Aa=function(a,b){for(var c=0,d=0;d<a.names.length;d++){if(!b.hasOwnProperty(a.names[d]))return-1;c++}return c},
ea=true,z=window.location,u=can.each,n=can.extend;can.route=function(a,b){var c=[],d=a.replace(ca,function(e,f){c.push(f);return"([^\\/\\&]*)"});can.route.routes[a]={test:new RegExp("^"+d+"($|&)"),route:a,names:c,defaults:b||{},length:a.split("/").length};return can.route};n(can.route,{param:function(a){delete a.route;var b,c=0,d,e=a.route;delete a.route;e&&(b=can.route.routes[e])||u(can.route.routes,function(h,i){d=Aa(i,a);if(d>c){b=i;c=d}});if(b){var f=n({},a);e=b.route.replace(ca,function(h,i){delete f[i];
return a[i]===b.defaults[i]?"":encodeURIComponent(a[i])});var g;u(b.defaults,function(h,i){f[h]===i&&delete f[h]});g=can.param(f);return e+(g?"&"+g:"")}return can.isEmptyObject(a)?"":"&"+can.param(a)},deparam:function(a){var b={length:-1};u(can.route.routes,function(f,g){if(g.test.test(a)&&g.length>b.length)b=g});if(b.length>-1){var c=a.match(b.test),d=c.shift(),e=(d=a.substr(d.length-(c[c.length-1]==="&"?1:0)))&&da.test(d)?can.String.deparam(d.slice(1)):{};e=n(true,{},b.defaults,e);u(c,function(f,
g){if(g&&g!=="&")e[b.names[f]]=decodeURIComponent(g)});e.route=b.route;return e}if(a.charAt(0)!=="&")a="&"+a;return da.test(a)?can.String.deparam(a.slice(1)):{}},data:new can.Observe({}),routes:{},ready:function(a){if(a===false)ea=a;if(a===true||ea===true)fa();return can.route},url:function(a,b){if(b)a=n({},O,a);return"#!"+can.route.param(a)},link:function(a,b,c,d){return"<a "+za(n({href:can.route.url(b,d)},c))+">"+a+"</a>"},current:function(a){return z.hash=="#!"+can.route.param(a)}});u(["bind",
"unbind","delegate","undelegate","attr","removeAttr"],function(a,b){can.route[b]=function(){return can.route.data[b].apply(can.route.data,arguments)}});var ga,O,fa=function(){var a=z.hash.substr(1,1)==="!"?z.hash.slice(2):z.hash.slice(1);O=can.route.deparam(a);can.route.attr(O,true)};can.bind.call(window,"hashchange",fa);can.route.bind("change",function(){clearTimeout(ga);ga=setTimeout(function(){z.hash="#!"+can.route.param(can.route.data.serialize())},1)});can.bind.call(document,"ready",can.route.ready);
F=function(a,b,c){can.bind.call(a,b,c);return function(){can.unbind.call(a,b,c)}};var Ba=can.isFunction;n=can.extend;u=can.each;var Ca=[].slice,Da=$.event&&$.event.special||{},Ea=function(a,b,c,d){can.delegate.call(a,b,c,d);return function(){can.undelegate.call(a,b,c,d)}},ha=function(a,b,c,d){return d?Ea(a,can.trim(d),b,c):F(a,b,c)},P=function(a,b){var c=typeof b=="string"?a[b]:b;return function(){a.called=b;return c.apply(a,[this.nodeName?can.$(this):this].concat(Ca.call(arguments,0)))}},Fa=/[^\w]/,
ia=/\{([^\}]+)\}/g,Ga=/^(?:(.*?)\s)?([\w\.\:>]+)$/,Q;can.Construct("can.Control",{setup:function(){can.Construct.setup.apply(this,arguments);if(this!==can.Control){var a=this.pluginName||this._fullName,b;a!=="can_control"&&this.plugin(a);this.actions={};for(b in this.prototype)if(!(b=="constructor"||!Ba(this.prototype[b])))if(this._isAction(b))this.actions[b]=this._action(b)}},_isAction:function(a){return Fa.test(a)||Da[a]||R[a]},plugin:function(){},_action:function(a,b){ia.lastIndex=0;if(!b&&ia.test(a))return null;
a=b?can.String.sub(a,[b,window]):a;b=can.isArray(a);var c=(b?a[1]:a).match(Ga);return{processor:R[c[2]]||Q,parts:c,delegate:b?a[0]:undefined}},processors:{},defaults:{}},{setup:function(a,b){var c=this.constructor;a=can.get(can.$(a),0);var d=c.pluginName||c._fullName;this.element=can.$(a);d&&d!=="can_control"&&this.element.addClass(d);(a=can.data(this.element,"controls"))||can.data(this.element,"controls",a=[]);a.push(this);this.options=n(n({},c.defaults),b);this.on();return[this.element,this.options]},
on:function(a,b,c,d){if(a===undefined){this.off();a=this.constructor;b=this._bindings;c=a.actions;d=this.element;for(funcName in c)if(c.hasOwnProperty(funcName)){ready=c[funcName]||a._action(funcName,this.options);b.push(ready.processor(ready.delegate||d,ready.parts[2],ready.parts[1],funcName,this))}var e=P(this,"destroy");can.bind.call(d,"destroyed",e);b.push(function(f){can.unbind.call(f,"destroyed",e)});return b.length}if(typeof a=="string"){d=c;c=b;b=a;a=this.element}if(typeof d=="string")d=P(this,
d);this._bindings.push(ha(a,c,d,b));return this._bindings.length},off:function(){var a=can.get(this.element,0);u(this._bindings||[],function(b,c){c(a)});this._bindings=[]},update:function(a){n(this.options,a);this.on()},destroy:function(){var a=this.constructor;a=a.pluginName||a._fullName;this.off();a&&a!=="can_control"&&this.element.removeClass(a);a=can.data(this.element,"controls");a.splice(can.inArray(this,a),1);can.trigger(this,"destroyed");this.element=null}});var R=can.Control.processors;Q=
function(a,b,c,d,e){return ha(a,b,P(e,d),c)};u("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){R[b]=Q});var Ha=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},S=can.makeArray,Ia=1,o=can.view=function(a,b,c,d){a=can.render(a,b,c,d);if(can.isDeferred(a))return a.pipe(function(e){return can.view.frag(e)});return can.view.frag(a)};
can.extend(can.view,{frag:function(a){a=can.buildFragment([a],[document.body]).fragment;a.childNodes.length||a.appendChild(document.createTextNode(""));return can.view.hookup(a)},hookup:function(a){var b=[],c,d,e,f=0;for(can.each(a.childNodes?S(a.childNodes):a,function(g,h){if(h.nodeType!=3){b.push(h);b.push.apply(b,S(h.getElementsByTagName("*")))}});e=b[f++];)if(e.getAttribute&&(c=e.getAttribute("data-view-id"))&&(d=o.hookups[c])){d(e,c);delete o.hookups[c];e.removeAttribute("data-view-id")}return a},
hookups:{},hook:function(a){var b=++Ia;o.hookups[b]=a;return b},cached:{},cache:true,register:function(a){this.types["."+a.suffix]=a},types:{},ext:".ejs",registerScript:function(){},preload:function(){}});can.render=function(a,b,c,d){if(typeof c==="function"){d=c;c=undefined}var e=Ja(b);if(e.length){var f=new can.Deferred;e.push(ja(a,true));can.when.apply(can,e).then(function(h){var i=S(arguments),j=i.pop();if(can.isDeferred(b))b=ka(h);else for(var k in b)if(can.isDeferred(b[k]))b[k]=ka(i.shift());
i=j(b,c);f.resolve(i);d&&d(i)});return f}else{var g;e=typeof d==="function";f=ja(a,e);if(e){g=f;f.then(function(h){d(h(b,c))})}else f.then(function(h){g=h(b,c)});return g}};can.isDeferred=function(a){return a&&can.isFunction(a.then)&&can.isFunction(a.pipe)};var la=function(a,b){if(!a.match(/[^\s]/))throw"can.view ERROR: There is no template or an empty template at "+b;},ja=function(a,b){var c=a.match(/\.[\w\d]+$/),d,e,f,g=function(j){j=d.renderer(f,j);var k=new can.Deferred;k.resolve(j);if(o.cache)o.cached[f]=
k;return k};if(e=document.getElementById(a))c="."+e.type.match(/\/(x\-)?(.+)/)[2];if(!c){c=o.ext;a+=o.ext}if(can.isArray(c))c=c[0];f=Ha(a);if(a.match(/^\/\//)){var h=a.substr(2);a=typeof steal==="undefined"?(a="/"+h):steal.root.mapJoin(h)}d=o.types[c];if(o.cached[f])return o.cached[f];else if(e)return g(e.innerHTML);else{var i=new can.Deferred;can.ajax({async:b,url:a,dataType:"text",error:function(j){la("",a);i.reject(j)},success:function(j){la(j,a);i.resolve(d.renderer(f,j));if(o.cache)o.cached[f]=
i}});return i}},Ja=function(a){var b=[];if(can.isDeferred(a))return[a];else for(var c in a)can.isDeferred(a[c])&&b.push(a[c]);return b},ka=function(a){return can.isArray(a)&&a.length===3&&a[1]==="success"?a[0]:a},ma=function(a,b,c){var d=new can.Deferred;a.then(function(){arguments[0]=b[c](arguments[0]);d.resolve.apply(d,arguments)},function(){d.resolveWith.apply(this,arguments)});return d},Ka=0,A=function(a){return a[a.constructor.id]},B=function(a,b,c,d,e,f){if(typeof a=="string"){a=a.split(" ");
a={url:a.pop(),type:a.pop()}}a.data=typeof b=="object"&&!can.isArray(b)?can.extend(a.data||{},b):b;a.url=can.String.sub(a.url,a.data,true);return can.ajax(can.extend({type:c||"post",dataType:d||"json",success:e,error:f},a))},na=function(a,b,c,d,e){var f;f=[a.serialize()];var g=a.constructor,h;b=="destroy"&&f.shift();b!=="create"&&f.unshift(A(a));h=g[b].apply(g,f);f=h.pipe(function(i){a[e||b+"d"](i,h);return a});if(h.abort)f.abort=function(){h.abort()};f.then(c,d);return f};ajaxMethods={create:function(a){return function(b){return B(a||
this._shortName,b)}},update:function(a){return function(b,c){c=c||{};var d=this.id;if(c[d]&&c[d]!==b){c["new"+can.String.capitalize(b)]=c[d];delete c[d]}c[d]=b;return B(a||this._url,c,"put")}},destroy:function(a){return function(b){var c={};c[this.id]=b;return B(a||this._url,c,"delete")}},findAll:function(a){return function(b,c,d){return ma(B(a||this._shortName,b,"get","json"),this,"models").then(c,d)}},findOne:function(a){return function(b,c,d){return ma(B(a||this._url,b,"get","json"),this,"model").then(c,
d)}}};can.Observe("can.Model",{setup:function(){can.Observe.apply(this,arguments);if(this!==can.Model){var a=this;can.each(ajaxMethods,function(d,e){var f=a[d];if(typeof f!=="function")a[d]=e(f)});if(a.fullName=="can.Model")a.fullName="Model"+ ++Ka;if(window.jQuery){var b={},c="* "+a.fullName+".model";b[c+"s"]=can.proxy(a.models,a);b[c]=can.proxy(a.model,a);$.ajaxSetup({converters:b})}this.store={};this._url=this._shortName+"/{"+this.id+"}"}},id:"id",models:function(a){if(!a)return null;var b=new (this.List||
oa),c=can.isArray(a),d=a instanceof oa;d=c?a:d?a.serialize():a.data;for(var e=d.length,f=0;f<e;f++)b.push(this.model(d[f]));c||can.each(a,function(g,h){if(g!=="data")b[g]=h});return b},model:function(a){if(!a)return null;if(a instanceof this)a=a.serialize();return this.store[a.id]||new this(a)}},{isNew:function(){var a=A(this);return!(a||a===0)},save:function(a,b){return na(this,this.isNew()?"create":"update",a,b)},destroy:function(a,b){return na(this,"destroy",a,b,"destroyed")},bind:function(){if(!this._bindings){this.constructor.store[A(this)]=
this;this._bindings=0}this._bindings++;return can.Observe.prototype.bind.apply(this,arguments)},unbind:function(){this._bindings--;this._bindings||delete this.constructor.store[A(this)];return can.Observe.prototype.unbind.apply(this,arguments)},___set:function(a,b){can.Observe.prototype.___set.call(this,a,b);if(a===this.constructor.id&&this._bindings)this.constructor.store[A(this)]=this}});can.each(["created","updated","destroyed"],function(a,b){can.Model.prototype[b]=function(c){var d=this.constructor;
c&&typeof c=="object"&&this.attr(c.attr?c.attr():c);can.trigger(this,b);can.trigger(this,"change",b);can.trigger(d,b,this)}});var oa=can.Observe.List("can.Model.List",{setup:function(){can.Observe.List.prototype.setup.apply(this,arguments);var a=this;this.bind("change",function(b,c){/\w+\.destroyed/.test(c)&&a.splice(a.indexOf(b.target),1)})}});can.Control.processors.route=function(a,b,c,d,e){can.route(c||"");var f,g=function(h){if(can.route.attr("route")===(c||"")&&(h.batchNum===undefined||h.batchNum!==
f)){f=h.batchNum;h=can.route.attr();delete h.route;e[d](h)}};can.route.bind("change",g);return function(){can.route.unbind("change",g)}};var La=function(a){eval(a)};n=can.extend;var Ma=/\r\n/g,Na=/\r/g,Oa=/\n/g,Pa=/\\/g,Qa=/\t/g,Ra=/\{/g,Sa=/\}/g,pa=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,Ta=/([^\s]+)=$/,Ua=/__!!__/g,Va={"":"span",table:"tr",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr"},Wa=function(a){return a.replace(Pa,"\\\\").replace(Oa,"\\n").replace(/"/g,'\\"').replace(Qa,"\\t")},qa=function(a){var b=
a.match(Ra);a=a.match(Sa);return(b?b.length:0)-(a?a.length:0)},G=function(a,b,c){can.each(a,function(d,e){e.obj.bind(e.attr,c)});can.bind.call(b,"destroyed",function(){can.each(a,function(d,e){e.obj.unbind(e.attr,e.cb)})})},sa=function(a){return typeof a=="string"||typeof a=="number"?can.String.esc(""+a):ra(a)},ra=function(a){if(typeof a=="string")return a;if(a===null||a===undefined)return"";var b=a.hookup&&function(c,d){a.hookup.call(a,c,d)}||typeof a=="function"&&a;if(b)return"data-view-id='"+can.view.hook(b)+
"'";return""+a},p=function(a){if(this.constructor!=p){var b=new p(a);return function(c,d){return b.render(c,d)}}if(typeof a=="function")this.template={fn:a};else{n(this,a);this.template=Xa(this.text,this.name)}};can.EJS=p;p.prototype.render=function(a,b){a=a||{};return this.template.fn.call(a,a,new p.Helpers(a,b||{}))};n(p,{txt:function(a,b,c,d,e){if(can.Observe)can.Observe.__reading=function(i,j){f.push({obj:i,attr:j})};var f=[],g=d.call(c);can.Observe&&delete can.Observe.__reading;if(!f.length)return(e||
b!==0?sa:ra)(g);a=Va[a]||"span";if(b==0)return"<"+a+" data-view-id='"+can.view.hook(e?function(i){var j=i.parentNode,k=document.createTextNode(g);j.insertBefore(k,i);j.removeChild(i);G(f,j,function(){k.nodeValue=d.call(c)})}:function(i){var j=function(l,q){l=can.view.frag(l);var t=can.$(can.map(l.childNodes,function(Ya){return Ya})),H=q[q.length-1];H.nextSibling?H.parentNode.insertBefore(l,H.nextSibling):H.parentNode.appendChild(l);can.remove(can.$(q));return t},k=j(g,[i]);G(f,i.parentNode,function(){k=
j(d.call(c),k)})})+"'></"+a+">";else if(b===1){var h=d.call(c).replace(/['"]/g,"").split("=")[0];C.push(function(i){G(f,i,function(){var j=(d.call(c)||"").replace(/['"]/g,"").split("=");newAttrName=j[0];newAttrName!=h&&h&&i.removeAttribute(h);newAttrName&&i.setAttribute(newAttrName,j[1])})});return g}else{C.push(function(i){var j=can.$(i),k;(k=can.data(j,"hooks"))||can.data(j,"hooks",k={});var l=i.getAttribute(b);j=l.split("__!!__");var q;if(k[b])k[b].funcs.push(d);else k[b]={render:function(){var t=
0;return l.replace(Ua,function(){return sa(q.funcs[t++].call(c))})},funcs:[d],batchNum:undefined};q=k[b];j.splice(1,0,g);i.setAttribute(b,j.join(""));G(f,i,function(t){if(t.batchNum===undefined||t.batchNum!==q.batchNum){q.batchNum=t.batchNum;i.setAttribute(b,q.render())}})});return"__!!__"}},esc:function(a,b,c,d){return p.txt(a,b,c,d,true)},pending:function(){if(C.length){var a=C.slice(0);C=[];return" data-view-id='"+can.view.hook(function(b){can.each(a,function(c,d){d(b)})})+"'"}else return""}});
var Za=/(<%%|%%>|<%==|<%=|<%#|<%|%>|<|>|"|')/,D=null,v=null,T=null,ta=function(){return v?"'"+T.match(Ta)[1]+"'":D?1:0},C=[],Xa=function(a,b){a=a.replace(Ma,"\n").replace(Na,"\n").split(Za);var c="",d=["var ___v1ew = [];"],e=function(q,t){d.push("___v1ew.push(",'"',Wa(q),'"'+(t||"")+");")},f=[],g,h=null,i=false,j="",k=0,l;for(D=v=T=null;(l=a[k++])!==undefined;){if(h===null)switch(l){case "<%":case "<%=":case "<%==":i=1;case "<%#":h=l;c.length>0&&e(c);c="";break;case "<%%":c+="<%";break;case "<":D=
1;c+=l;i=0;break;case ">":D=0;if(i){e(c,',can.EJS.pending(),">"');c=""}else c+=l;break;case "'":case '"':if(D)if(v&&v===l)v=null;else if(v===null){v=l;T=g}default:if(g==="<")j=l.split(" ")[0];c+=l;break}else switch(l){case "%>":switch(h){case "<%":g=qa(c);if(g==1){d.push("___v1ew.push(","can.EJS.txt('"+j+"',"+ta()+",this,function(){","var ___v1ew = [];",c);f.push({before:"",after:"return ___v1ew.join('')}));"})}else{h=f.length&&g==-1?f.pop():{after:";"};h.before&&d.push(h.before);d.push(c,";",h.after)}break;
case "<%=":case "<%==":(g=qa(c))&&f.push({before:"return ___v1ew.join('')",after:"}));"});if(pa.test(c)){c=c.match(pa);c="function(__){var "+c[1]+"=can.$(__);"+c[2]+"}"}d.push("___v1ew.push(","can.EJS."+(h==="<%="?"esc":"txt")+"('"+j+"',"+ta()+",this,function(){ return ",c,g?"var ___v1ew = [];":"}));");break}h=null;c="";break;case "<%%":c+="<%";break;default:c+=l;break}g=l}c.length>0&&e(c);d.push(";");a={out:"with(_VIEW) { with (_CONTEXT) {"+d.join("")+" return ___v1ew.join('')}}"};La.call(a,"this.fn = (function(_CONTEXT,_VIEW){"+
a.out+"});\r\n//@ sourceURL="+b+".js");return a};p.Helpers=function(a,b){this._data=a;this._extras=b;n(this,b)};p.Helpers.prototype={view:function(a,b,c){return $View(a,b||this._data,c||this._extras)},list:function(a,b){a.attr("length");for(var c=0,d=a.length;c<d;c++)b(a[c],c,a)}};can.view.register({suffix:"ejs",script:function(a,b){return"can.EJS(function(_CONTEXT,_VIEW) { "+(new p({text:b,name:a})).template.out+" })"},renderer:function(a,b){return p({text:b,name:a})}})})(can={});
