(function(j){var o={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},x=function(e,r,h){return e[r]!==undefined?e[r]:h&&(e[r]={})},i=function(e){return(e=typeof e)&&(e=="function"||e=="object")},s=function(e,r,h){e=e?e.split(o.dot):[];var t=e.length;r=j.isArray(r)?r:[r||window];var p,u,w,b=0;if(t==0)return r[0];for(;p=r[b++];){for(w=0;w<t-1&&i(p);w++)p=x(p,e[w],h);if(i(p)){u=x(p,e[w],h);if(u!==undefined){h===
false&&delete p[e[w]];return u}}}},v=j.String=j.extend(j.String||{},{getObject:s,capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){e=v.classize(e);return e.charAt(0).toLowerCase()+e.substr(1)},classize:function(e,r){e=e.split(o.undHash);for(var h=0;h<e.length;h++)e[h]=v.capitalize(e[h]);return e.join(r||"")},niceName:function(e){return v.classize(e," ")},underscore:function(e){return e.replace(o.colons,"/").replace(o.words,"$1_$2").replace(o.lowUp,"$1_$2").replace(o.dash,
"_").toLowerCase()},sub:function(e,r,h){var t=[];t.push(e.replace(o.replacer,function(p,u){p=s(u,r,typeof h=="boolean"?!h:h);u=typeof p;if((u==="object"||u==="function")&&u!==null){t.push(p);return""}else return""+p}));return t.length<=1?t[0]:t},_regs:o})})(jQuery);
(function(j){var o=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},x=1,i,s,v,e=function(a){return a&&j.isFunction(a.always)},r=function(a){var c=[];if(e(a))return[a];else for(var d in a)e(a[d])&&c.push(a[d]);return c},h=function(a){return j.isArray(a)&&a.length===3&&a[1]==="success"?a[0]:a};i=j.View=function(a,c,d,l){if(typeof d==="function"){l=d;d=undefined}var n=r(c);if(n.length){var k=j.Deferred();n.push(v(a,true));j.when.apply(j,n).then(function(y){var z=j.makeArray(arguments),
A=z.pop()[0];if(e(c))c=h(y);else for(var B in c)if(e(c[B]))c[B]=h(z.shift());z=A(c,d);k.resolve(z);l&&l(z)});return k.promise()}else{var q;n=typeof l==="function";k=v(a,n);if(n){q=k;k.done(function(y){l(y(c,d))})}else k.done(function(y){q=y(c,d)});return q}};s=function(a,c){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+c;};v=function(a,c){return j.ajax({url:a,dataType:"view",async:c})};j.ajaxTransport("view",function(a,c){a=c.url;var d=a.match(/\.[\w\d]+$/),
l,n,k,q=a,y,z=function(A){A=l.renderer(k,A);if(i.cache)i.cached[k]=A;return{view:A}};if(n=document.getElementById(a))d=n.type.match(/\/[\d\w]+$/)[0].replace(/^\//,".");if(!d){d=i.ext;q+=i.ext}k=o(q);if(q.match(/^\/\//))q=typeof steal==="undefined"?"/"+q.substr(2):steal.root.mapJoin(q.substr(2));l=i.types[d];return{send:function(A,B){if(i.cached[k])return B(200,"success",{view:i.cached[k]});else if(n)B(200,"success",z(n.innerHTML));else y=j.ajax({async:c.async,url:q,dataType:"text",error:function(){s("",
q);B(404)},success:function(C){s(C,q);B(200,"success",z(C))}})},abort:function(){y&&y.abort()}}});j.extend(i,{hookups:{},hookup:function(a){var c=++x;i.hookups[c]=a;return c},cached:{},cache:true,register:function(a){this.types["."+a.suffix]=a;window.steal&&steal.type(a.suffix+" view js",function(c,d,l){d=i.types["."+c.type];var n=o(c.rootSrc);c.text=d.script(n,c.text);l()})},types:{},ext:".ejs",registerScript:function(a,c,d){return"$.View.preload('"+c+"',"+i.types["."+a].script(c,d)+");"},preload:function(a,
c){i.cached[a]=function(d,l){return c.call(d,d,l)}}});window.steal&&steal.type("view js",function(a,c,d){c=i.types["."+a.type];var l=o(a.rootSrc);a.text="steal('"+(c.plugin||"jquery/view/"+a.type)+"').then(function($){$.View.preload('"+l+"',"+a.text+");\n})";d()});var t,p,u,w,b,f,g;t=function(a){var c=j.fn[a];j.fn[a]=function(){var d=j.makeArray(arguments),l,n,k=this;if(e(d[0])){d[0].done(function(q){p.call(k,[q],c)});return this}else if(u(d)){if(l=b(d)){n=d[l];d[l]=function(q){p.call(k,[q],c);n.call(k,
q)};i.apply(i,d);return this}d=i.apply(i,d);if(e(d)){d.done(function(q){p.call(k,[q],c)});return this}else d=[d]}return p.call(this,d,c)}};p=function(a,c){var d;for(var l in i.hookups)break;if(l&&a[0]&&w(a[0])){d=i.hookups;i.hookups={};a[0]=j(a[0])}c=c.apply(this,a);d&&f(a[0],d);return c};u=function(a){var c=typeof a[1];return typeof a[0]=="string"&&(c=="object"||c=="function")&&!a[1].nodeType&&!a[1].jquery};w=function(a){if(a.jquery||a.nodeType===1)return true;else if(typeof a==="string"){a=j.trim(a);
return a.substr(0,1)==="<"&&a.substr(a.length-1,1)===">"&&a.length>=3}else return false};b=function(a){return typeof a[3]==="function"?3:typeof a[2]==="function"&&2};f=function(a,c){var d,l=0,n,k;a=a.filter(function(){return this.nodeType!=3});a=a.add("[data-view-id]",a);for(d=a.length;l<d;l++)if(a[l].getAttribute&&(n=a[l].getAttribute("data-view-id"))&&(k=c[n])){k(a[l],n);delete c[n];a[l].removeAttribute("data-view-id")}j.extend(i.hookups,c)};j.fn.hookup=function(){var a=i.hookups;i.hookups={};f(this,
a);return this};g=["prepend","append","after","before","text","html","replaceWith","val"];for(var m=0;m<g.length;m++)t(g[m])})(jQuery);(function(j){j.String.rsplit=function(o,x){for(var i=x.exec(o),s=[],v;i!==null;){v=i.index;if(v!==0){s.push(o.substring(0,v));o=o.slice(v)}s.push(i[0]);o=o.slice(i[0].length);i=x.exec(o)}o!==""&&s.push(o);return s}})(jQuery);
(function(j){var o=function(b){eval(b)},x=function(b){return b.substr(0,b.length-1)},i=j.String.rsplit,s=j.extend,v=j.isArray,e=function(b){return b.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/\t/g,"\\t")},r=function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")},h=function(b){if(this.constructor!=h){var f=new h(b);return function(g,m){return f.render(g,m)}}if(typeof b=="function"){this.template=
{};this.template.process=b}else{s(this,h.options,b);this.template=w(this.text,this.type,this.name)}};j.EJS=h;h.prototype={constructor:h,render:function(b,f){b=b||{};this._extra_helpers=f;f=new h.Helpers(b,f||{});return this.template.process.call(b,b,f)}};h.text=function(b){if(typeof b=="string")return b;if(b===null||b===undefined)return"";var f=b.hookup&&function(g,m){b.hookup.call(b,g,m)}||typeof b=="function"&&b||v(b)&&function(g,m){for(var a=0;a<b.length;a++)b[a].hookup?b[a].hookup(g,m):b[a](g,
m)};if(f)return"data-view-id='"+j.View.hookup(f)+"'";return b.toString?b.toString():""};h.clean=function(b){return typeof b=="string"?r(b):typeof b=="number"?b:h.text(b)};var t=function(b,f,g){f=i(f,/\n/);for(var m=0;m<f.length;m++)p(b,f[m],g)},p=function(b,f,g){b.lines++;f=i(f,b.splitter);for(var m,a=0;a<f.length;a++){m=f[a];m!==null&&g(m,b)}},u=function(b,f){var g={};s(g,{left:b+"%",right:"%"+f,dLeft:b+"%%",dRight:"%%"+f,eeLeft:b+"%==",eLeft:b+"%=",cmnt:b+"%#",scan:t,lines:0});g.splitter=new RegExp("("+
[g.dLeft,g.dRight,g.eeLeft,g.eLeft,g.cmnt,g.left,g.right+"\n",g.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return g},w=function(b,f,g){b=b.replace(/\r\n/g,"\n").replace(/\r/g,"\n");f=f||"<";var m=new h.Buffer(["var ___v1ew = [];"],[]),a="",c=function(n){m.push("___v1ew.push(",'"',e(n),'");')},d=null,l=function(){a=""};t(u(f,f==="["?"]":">"),b||"",function(n,k){if(d===null)switch(n){case "\n":a+="\n";c(a);m.cr();l();break;case k.left:case k.eLeft:case k.eeLeft:case k.cmnt:d=
n;a.length>0&&c(a);l();break;case k.dLeft:a+=k.left;break;default:a+=n;break}else switch(n){case k.right:switch(d){case k.left:if(a[a.length-1]=="\n"){a=x(a);m.push(a,";");m.cr()}else m.push(a,";");break;case k.eLeft:m.push("___v1ew.push(","(jQuery.EJS.clean(",a,")));");break;case k.eeLeft:m.push("___v1ew.push(","(jQuery.EJS.text(",a,")));");break}d=null;l();break;case k.dRight:a+=k.right;break;default:a+=n;break}});a.length>0&&m.push("___v1ew.push(",'"',e(a)+'");');b={out:"try { with(_VIEW) { with (_CONTEXT) {"+
m.close()+" return ___v1ew.join('');}}}catch(e){e.lineNumber=null;throw e;}"};o.call(b,"this.process = (function(_CONTEXT,_VIEW){"+b.out+"});\r\n//@ sourceURL="+g+".js");return b};h.Buffer=function(b,f){this.line=[];this.script=[];this.post=f;this.push.apply(this,b)};h.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=[]},close:function(){if(this.line.length>0){this.script.push(this.line.join(""));this.line=
[]}this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};h.options={type:"<",ext:".ejs"};h.Helpers=function(b,f){this._data=b;this._extras=f;s(this,f)};h.Helpers.prototype={plugin:function(){var b=j.makeArray(arguments),f=b.shift();return function(g){g=j(g);g[f].apply(g,b)}},view:function(b,f,g){g=g||this._extras;f=f||this._data;return j.View(b,f,g)}};j.View.register({suffix:"ejs",script:function(b,f){return"jQuery.EJS(function(_CONTEXT,_VIEW) { "+(new h({text:f,
name:b})).template.out+" })"},renderer:function(b,f){var g=new h({text:f,name:b});return function(m,a){return g.render.call(g,m,a)}}})})(jQuery);
