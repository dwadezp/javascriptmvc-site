(function(){var j=$.isArray,g=function(a){return typeof a==="object"&&a!==null&&a},k=$.makeArray,n=$.each,o=function(a,c,b){a=j(a)?new $.Observe.List(a):new $.Observe(a);a.bind("change"+b._namespace,function(d){var e=$.makeArray(arguments);d=e.shift();e[0]=c+(e[0]!="*"?"."+e[0]:"");$([b]).trigger(d,e)});return a},p=function(a,c){for(var b,d=0;d<a.length;d++)(b=a[d])&&b.unbind&&b.unbind("change"+c)},q=0,h=null,r=function(){if(!h){h=[];return true}},i=function(a,c,b){a=$([a]);if(h)h.push({t:a,ev:c,
args:b});else return a.trigger(c,b)},s=function(){var a=h.length,c=h.slice(0),b;h=null;for(var d=0;d<a;d++){b=c[d];$(b.t).trigger(b.ev,b.args)}},l=function(a,c,b){a.each(function(d,e){b[d]=g(e)&&typeof e[c]=="function"?e[c]():e});return b};$.Class("jQuery.Observe",{init:function(a){this._data={};this._namespace=".observe"+ ++q;this.attrs(a)},attr:function(a,c){if(c===undefined)return this._get(a);else{this._set(a,c);return this}},each:function(){return n.apply(null,[this.__get()].concat(k(arguments)))},
removeAttr:function(a){a=j(a)?a:a.split(".");var c=a.shift(),b=this._data[c];if(a.length)return b.removeAttr(a);else{delete this._data[c];i(this,"change",[c,"remove",undefined,b]);return b}},_get:function(a){a=j(a)?a:(""+a).split(".");var c=this.__get(a.shift());return a.length?c?c._get(a):undefined:c},__get:function(a){return a?this._data[a]:this._data},_set:function(a,c){var b=j(a)?a:(""+a).split(".");a=b.shift();var d=this.__get(a);if(g(d)&&b.length)d._set(b,c);else if(b.length)throw"jQuery.Observe: set a property on an object that does not exist";
else if(c!==d){b=this.__get().hasOwnProperty(a)?"set":"add";this.__set(a,g(c)?o(c,a,this):c);i(this,"change",[a,b,c,d]);d&&p([d],this._namespace)}},__set:function(a,c){this._data[a]=c;a in this.constructor.prototype||(this[a]=c)},bind:function(){$.fn.bind.apply($([this]),arguments);return this},unbind:function(){$.fn.unbind.apply($([this]),arguments);return this},serialize:function(){return l(this,"serialize",{})},attrs:function(a,c){if(a===undefined)return l(this,"attrs",{});a=$.extend(true,{},a);
var b,d=r();for(b in this._data){var e=this._data[b],f=a[b];if(f===undefined)c&&this.removeAttr(b);else{if(g(e)&&g(f))e.attrs(f,c);else e!=f&&this._set(b,f);delete a[b]}}for(b in a){f=a[b];this._set(b,f)}d&&s()}});var t=jQuery.Observe("jQuery.Observe.List",{init:function(a){this.length=0;this._namespace=".list"+ ++q;this.push.apply(this,k(a||[]))},__get:function(a){return a?this[a]:this},__set:function(a,c){this[a]=c},serialize:function(){return l(this,"serialize",[])},splice:function(a,c){var b=
k(arguments),d;for(d=0;d<b.length;d++){var e=b[d];if(g(e))b[d]=o(e,a+d,this)}if(c===undefined)c=b[1]=this.length-a;d=[].splice.apply(this,b);if(c>0){i(this,"change",["*","remove",undefined,d,a]);p(d,this._namespace)}b.length>2&&i(this,"change",["*","add",b.slice(2),d,a]);return d},attrs:function(a,c){if(a===undefined)return l(this,"attrs",[]);a=a.slice(0);for(var b=Math.min(a.length,this.length),d=r(),e=0;e<b;e++){var f=this[e],m=a[e];if(g(f)&&g(m))f.attrs(m,c);else f!=m&&this._set(e,m)}if(a.length>
this.length)this.push(a.slice(this.length));else a.length<this.length&&c&&this.splice(a.length);d&&s()}}),u=function(a){return a[0]&&$.isArray(a[0])?a[0]:k(a)};n({push:"length",unshift:0},function(a,c){t.prototype[a]=function(){for(var b=u(arguments),d=c?this.length:0,e=0;e<b.length;e++){var f=b[e];if(g(f))b[e]=o(f,e,this)}e=[][a].apply(this,b);i(this,"change",["*","add",b,undefined,d]);return e}});n({pop:"length",shift:0},function(a,c){t.prototype[a]=function(){var b=u(arguments),d=c&&this.length?
this.length-1:0;b=[][a].apply(this,b);i(this,"change",["*","remove",undefined,[b],d]);b&&b.unbind&&b.unbind("change"+this._namespace);return b}})})(jQuery);
