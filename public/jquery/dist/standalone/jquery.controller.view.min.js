(function(){jQuery.Controller.getFolder=function(){return jQuery.String.underscore(this.fullName.replace(/\./g,"/")).replace("/Controllers","")};jQuery.Controller._calculatePosition=function(b,a,c){var d=b.fullName.split("."),e=d.slice(0);e.splice(0,2);e.join("/");d=(b=d.length>2&&d[1]=="Controllers")?jQuery.String.underscore(d[0]):jQuery.String.underscore(d.join("/"));e=jQuery.String.underscore(e.join("/")).toLowerCase();var f=typeof a=="string"&&/\.[\w\d]+$/.test(a)?"":jQuery.View.ext;if(typeof a==
"string"){if(a.substr(0,2)!="//")a="//"+(new steal.File("views/"+(a.indexOf("/")!==-1?a:(b?e+"/":"")+a))).joinFrom(d)+f}else a||(a="//"+(new steal.File("views/"+(b?e+"/":"")+c.replace(/\.|#/g,"").replace(/ /g,"_"))).joinFrom(d)+f);return a};var g=function(b){var a={};if(b)if(jQuery.isArray(b))for(var c=0;c<b.length;c++)jQuery.extend(a,b[c]);else jQuery.extend(a,b);else{if(this._default_helpers)a=this._default_helpers;b=window;c=this.constructor.fullName.split(/\./);for(var d=0;d<c.length;d++){typeof b.Helpers==
"object"&&jQuery.extend(a,b.Helpers);b=b[c[d]]}typeof b.Helpers=="object"&&jQuery.extend(a,b.Helpers);this._default_helpers=a}return a};jQuery.Controller.prototype.view=function(b,a,c){if(typeof b!="string"&&!c){c=a;a=b;b=null}b=jQuery.Controller._calculatePosition(this.Class,b,this.called);a=a||this;c=g.call(this,c);return jQuery.View(b,a,c)}})(jQuery);
