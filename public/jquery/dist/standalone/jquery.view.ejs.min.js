(function(i){var u=function(a){eval(a)},p=i.String.rsplit,k=i.extend,v=i.isArray,w=/\r\n/g,x=/\r/g,y=/\n/g,z=/\n/,A=/\\/g,q=/"/g,B=/'/g,C=/\t/g,D=/\{/g,E=/\}/g,r=function(a){return a.replace(A,"\\\\").replace(y,"\\n").replace(q,'\\"').replace(C,"\\t")},F=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(q,"&#34;").replace(B,"&#39;")},m=i.View,n=function(a){var b=a.match(D);a=a.match(E);return(b?b.length:0)-(a?a.length:0)},f=function(a){if(this.constructor!=
f){var b=new f(a);return function(c,e){return b.render(c,e)}}if(typeof a=="function")this.template={fn:a};else{k(this,f.options,a);this.template=G(this.text,this.type,this.name)}};window.jQuery&&(jQuery.EJS=f);f.prototype.render=function(a,b){a=a||{};this._extra_helpers=b;b=new f.Helpers(a,b||{});return this.template.fn.call(a,a,b)};k(f,{text:function(a){if(typeof a=="string")return a;if(a===null||a===undefined)return"";var b=a.hookup&&function(c,e){a.hookup.call(a,c,e)}||typeof a=="function"&&a||
v(a)&&function(c,e){for(var d=0;d<a.length;d++)a[d].hookup?a[d].hookup(c,e):a[d](c,e)};if(b)return"data-view-id='"+m.hookup(b)+"'";return a.toString?a.toString():""},clean:function(a){return typeof a=="string"?F(a):typeof a=="number"?a:f.text(a)},options:{type:"<",ext:".ejs"}});var s=function(a,b,c){b=p(b,z);for(var e=0;e<b.length;e++)H(a,b[e],c)},H=function(a,b,c){a.lines++;b=p(b,a.splitter);for(var e,d=0;d<b.length;d++){e=b[d];e!==null&&c(e,a)}},I=function(a,b){var c={};k(c,{left:a+"%",right:"%"+
b,dLeft:a+"%%",dRight:"%%"+b,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",scan:s,lines:0});c.splitter=new RegExp("("+[c.dLeft,c.dRight,c.eeLeft,c.eLeft,c.cmnt,c.left,c.right+"\n",c.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return c},G=function(a,b,c){a=a.replace(w,"\n").replace(x,"\n");b=b||"<";var e=new f.Buffer(["var ___v1ew = [];"],[]),d="",t=function(h){e.push("___v1ew.push(",'"',r(h),'");')},l=null,o=function(){d=""},j=[];s(I(b,b==="["?"]":">"),a||"",function(h,g){if(l===
null)switch(h){case "\n":d+="\n";t(d);e.cr();o();break;case g.left:case g.eLeft:case g.eeLeft:case g.cmnt:l=h;d.length>0&&t(d);o();break;case g.dLeft:d+=g.left;break;default:d+=h;break}else switch(h){case g.right:switch(l){case g.left:h=n(d);g=j.length&&h==-1?j.pop():";";g==="));"&&e.push("return ___v1ew.join('')");e.push(d,g);h===1&&j.push(";");break;case g.eLeft:(h=n(d))&&j.push("));");e.push("___v1ew.push(","jQuery.EJS.clean(",d,h?"var ___v1ew = [];":"));");break;case g.eeLeft:(h=n(d))&&j.push("));");
e.push("___v1ew.push(","jQuery.EJS.text(",d,h?"var ___v1ew = [];":"));");break}l=null;o();break;case g.dRight:d+=g.right;break;default:d+=h;break}});d.length>0&&e.push("___v1ew.push(",'"',r(d)+'");');a={out:"try { with(_VIEW) { with (_CONTEXT) {"+e.close()+" return ___v1ew.join('')}}}catch(e){e.lineNumber=null;throw e;}"};u.call(a,"this.fn = (function(_CONTEXT,_VIEW){"+a.out+"});\r\n//@ sourceURL="+c+".js");return a};f.Buffer=function(a,b){this.line=[];this.script=[];this.post=b;this.push.apply(this,
a)};f.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=[]},close:function(){if(this.line.length>0){this.script.push(this.line.join(""));this.line=[]}this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};f.Helpers=function(a,b){this._data=a;this._extras=b;k(this,b)};f.Helpers.prototype={plugin:function(){var a=i.makeArray(arguments),b=a.shift();return function(c){c=
i(c);c[b].apply(c,a)}},view:function(a,b,c){c=c||this._extras;b=b||this._data;return m(a,b,c)}};m.register({suffix:"ejs",script:function(a,b){return"jQuery.EJS(function(_CONTEXT,_VIEW) { "+(new f({text:b,name:a})).template.out+" })"},renderer:function(a,b){return f({text:b,name:a})}})})(jQuery);
