(function(e){e.Controller("jQuery.Tie",{setup:function(b){this._super(b,{});return e.makeArray(arguments)},init:function(b,c,a,d){if(!d){b=this.element.data("controllers")||{};for(var f in b)if(typeof b[f].val=="function"){d=f;break}}this.type=d;this.attr=a;this.inst=c;this.bind(c,a,"attrChanged");this.bind(c,"destroyed","modelDestroyed");this.lastValue=c=c.attr(a);if(d){this.bind(this.element.data("controllers")[d],"destroyed","destroy");this.element[d]("val",c)}else this.element.val(c)},attrChanged:function(b,
c,a){if(a!==this.lastValue){this.setVal(a);this.lastValue=a}},modelDestroyed:function(){this.destroy()},setVal:function(b){this.type?this.element[this.type]("val",b):this.element.val(b)},change:function(b,c,a){if(!this.type&&a===undefined)a=this.element.val();this.inst.attr(this.attr,a,null,this.proxy("setBack"))},setBack:function(){this.setVal(this.lastValue)},destroy:function(){this.inst=null;this._destroyed||this._super()}})})(jQuery);
