(function(e){var k={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},q=function(c,g,h){return c[g]!==undefined?c[g]:h&&(c[g]={})},p=function(c){var g=typeof c;return c&&(g=="function"||g=="object")},o,n=e.String=e.extend(e.String||{},{getObject:o=function(c,g,h){c=c?c.split(k.dot):[];var a=c.length,b,d,f,i=0;g=e.isArray(g)?g:[g||window];if(a==0)return g[0];for(;b=g[i++];){for(f=0;f<a-1&&p(b);f++)b=q(b,c[f],
h);if(p(b)){d=q(b,c[f],h);if(d!==undefined){h===false&&delete b[c[f]];return d}}}},capitalize:function(c){return c.charAt(0).toUpperCase()+c.substr(1)},camelize:function(c){c=n.classize(c);return c.charAt(0).toLowerCase()+c.substr(1)},classize:function(c,g){c=c.split(k.undHash);for(var h=0;h<c.length;h++)c[h]=n.capitalize(c[h]);return c.join(g||"")},niceName:function(c){return n.classize(c," ")},underscore:function(c){return c.replace(k.colons,"/").replace(k.words,"$1_$2").replace(k.lowUp,"$1_$2").replace(k.dash,
"_").toLowerCase()},sub:function(c,g,h){var a=[];h=typeof h=="boolean"?!h:h;a.push(c.replace(k.replacer,function(b,d){b=o(d,g,h);if(p(b)){a.push(b);return""}else return""+b}));return a.length<=1?a[0]:a},_regs:k})})(jQuery);
(function(e){var k=function(a){return a[0]&&e.isArray(a[0])?a[0]:a[0]instanceof e.Model.List?e.makeArray(a[0]):e.makeArray(a)},q=0,p=function(a){return a[a.constructor.id]},o=jQuery.expando,n=e.each,c=e.Model._ajax,g={update:function(a){return function(b,d,f,i){return c(a,{ids:b,attrs:d},f,i,"-updateAll","put")}},destroy:function(a){return function(b,d,f){return c(a,b,d,f,"-destroyAll","post")}}};e.Class("jQuery.Model.List",{setup:function(){for(var a in g)if(typeof this[a]!=="function")this[a]=g[a](this[a])}},
{init:function(a){this.length=0;this._data={};this._namespace=".list"+ ++q;this.push.apply(this,e.makeArray(a||[]))},slice:function(){return new this.Class(Array.prototype.slice.apply(this,arguments))},match:function(a,b){return this.grep(function(d){return d[a]==b})},grep:function(a,b){return new this.Class(e.grep(this,a,b))},_makeData:function(){var a=this._data={};this.each(function(b,d){a[d[d.constructor.id]]=d})},get:function(){if(!this.length)return new this.Class([]);this._changed&&this._makeData();
var a=[],b=this[0].constructor,d=b.id;b=new RegExp(b._fullName+"_([^ ]+)");for(var f,i,j=k(arguments),l=0;l<j.length;l++)(i=j[l].nodeName&&(f=j[l].className.match(b))?this._data[f[1]]:this._data[typeof j[l]=="string"||typeof j[l]=="number"?j[l]:j[l][d]])&&a.push(i);return new this.Class(a)},remove:function(a){if(!this.length)return[];var b=[],d=this[0].constructor,f=d.id;d=new RegExp(d._fullName+"_([^ ]+)");var i;a=k(arguments);for(var j=0;j<this.length;){for(var l=this[j],r=false,m=0;m<a.length;m++){var s=
a[m].nodeName&&(i=a[m].className.match(d))&&i[1]||(typeof a[m]=="string"||typeof a[m]=="number"?a[m]:a[m][f]);if(l[f]==s){b.push.apply(b,this.splice(j,1));a.splice(m,1);r=true;break}}r||j++}b=new this.Class(b);b.length&&e([this]).trigger("remove",[b]);return b},elements:function(a){return e(this.map(function(b){return"."+b.identity()}).join(","),a)},model:function(){return this.constructor.namespace},findAll:function(a,b,d){var f=this;this.model().findAll(a,function(i){f.push(i);b&&b(f)},d)},destroy:function(a,
b){var d=this.map(p),f=this.slice(0,this.length);if(d.length)this.constructor.destroy(d,function(){n(f,function(){this.destroyed()});a&&a(f)},b);else a&&a(this);return this},update:function(a,b,d){var f=this.map(p),i=this.slice(0,this.length);if(f.length)this.constructor.update(f,a,function(j){var l=e.extend(a,j||{});n(i,function(){this.updated(l)});b&&b(i)},d);else b&&b(this);return this},bind:function(){this[o]===undefined&&this.bindings(this);e.fn.bind.apply(e([this]),arguments);return this},unbind:function(){e.fn.unbind.apply(e([this]),
arguments);this[o]===undefined&&e(this).unbind(this._namespace);return this},bindings:function(a){var b=this;e(a).bind("destroyed"+this._namespace,function(){b.remove(this)}).bind("updated"+this._namespace,function(){e([b]).trigger("updated",this)})},push:function(){var a=k(arguments);this[o]!==undefined&&this.bindings(a);this._changed=true;var b=h.apply(this,a);this[o]&&a.length&&e([this]).trigger("add",[a]);return b},serialize:function(){return this.map(function(a){return a.serialize()})}});var h=
[].push;n({pop:[].pop,shift:[].shift,unshift:[].unshift,splice:[].splice,sort:[].sort},function(a,b){e.Model.List.prototype[a]=function(){this._changed=true;return b.apply(this,arguments)}});n(["each","map"],function(a,b){e.Model.List.prototype[b]=function(d,f){return e[b](this,d,f)}})})(jQuery);
