(function(f){var j=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},l=1,d,q,s,p=function(a){return a&&f.isFunction(a.always)},C=function(a){var b=[];if(p(a))return[a];else for(var c in a)p(a[c])&&b.push(a[c]);return b},w=function(a){return f.isArray(a)&&a.length===3&&a[1]==="success"?a[0]:a};d=f.View=function(a,b,c,e){if(typeof c==="function"){e=c;c=undefined}var g=C(b);if(g.length){var h=f.Deferred();g.push(s(a,true));f.when.apply(f,g).then(function(k){var m=f.makeArray(arguments),
n=m.pop()[0];if(p(b))b=w(k);else for(var o in b)if(p(b[o]))b[o]=w(m.shift());m=n(b,c);h.resolve(m);e&&e(m)});return h.promise()}else{var i;g=typeof e==="function";h=s(a,g);if(g){i=h;h.done(function(k){e(k(b,c))})}else h.done(function(k){i=k(b,c)});return i}};q=function(a,b){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+b;};s=function(a,b){return f.ajax({url:a,dataType:"view",async:b})};f.ajaxTransport("view",function(a,b){a=b.url;var c=a.match(/\.[\w\d]+$/),
e,g,h,i=a,k,m=function(n){n=e.renderer(h,n);if(d.cache)d.cached[h]=n;return{view:n}};if(g=document.getElementById(a))c=g.type.match(/\/[\d\w]+$/)[0].replace(/^\//,".");if(!c){c=d.ext;i+=d.ext}h=j(i);if(i.match(/^\/\//))i=typeof steal==="undefined"?"/"+i.substr(2):steal.root.mapJoin(i.substr(2));e=d.types[c];return{send:function(n,o){if(d.cached[h])return o(200,"success",{view:d.cached[h]});else if(g)o(200,"success",m(g.innerHTML));else k=f.ajax({async:b.async,url:i,dataType:"text",error:function(){q("",
i);o(404)},success:function(x){q(x,i);o(200,"success",m(x))}})},abort:function(){k&&k.abort()}}});f.extend(d,{hookups:{},hookup:function(a){var b=++l;d.hookups[b]=a;return b},cached:{},cache:true,register:function(a){this.types["."+a.suffix]=a;window.steal&&steal.type(a.suffix+" view js",function(b,c,e){c=d.types["."+b.type];var g=j(b.rootSrc);b.text=c.script(g,b.text);e()})},types:{},ext:".ejs",registerScript:function(a,b,c){return"$.View.preload('"+b+"',"+d.types["."+a].script(b,c)+");"},preload:function(a,
b){d.cached[a]=function(c,e){return b.call(c,c,e)}}});window.steal&&steal.type("view js",function(a,b,c){b=d.types["."+a.type];var e=j(a.rootSrc);a.text="steal('"+(b.plugin||"jquery/view/"+a.type)+"').then(function($){$.View.preload('"+e+"',"+a.text+");\n})";c()});var y,r,z,A,B,t,u;y=function(a){var b=f.fn[a];f.fn[a]=function(){var c=f.makeArray(arguments),e,g,h=this;if(p(c[0])){c[0].done(function(i){r.call(h,[i],b)});return this}else if(z(c)){if(e=B(c)){g=c[e];c[e]=function(i){r.call(h,[i],b);g.call(h,
i)};d.apply(d,c);return this}c=d.apply(d,c);if(p(c)){c.done(function(i){r.call(h,[i],b)});return this}else c=[c]}return r.call(this,c,b)}};r=function(a,b){var c;for(var e in d.hookups)break;if(e&&a[0]&&A(a[0])){c=d.hookups;d.hookups={};a[0]=f(a[0])}b=b.apply(this,a);c&&t(a[0],c);return b};z=function(a){var b=typeof a[1];return typeof a[0]=="string"&&(b=="object"||b=="function")&&!a[1].nodeType&&!a[1].jquery};A=function(a){if(a.jquery||a.nodeType===1)return true;else if(typeof a==="string"){a=f.trim(a);
return a.substr(0,1)==="<"&&a.substr(a.length-1,1)===">"&&a.length>=3}else return false};B=function(a){return typeof a[3]==="function"?3:typeof a[2]==="function"&&2};t=function(a,b){var c,e=0,g,h;a=a.filter(function(){return this.nodeType!=3});a=a.add("[data-view-id]",a);for(c=a.length;e<c;e++)if(a[e].getAttribute&&(g=a[e].getAttribute("data-view-id"))&&(h=b[g])){h(a[e],g);delete b[g];a[e].removeAttribute("data-view-id")}f.extend(d.hookups,b)};f.fn.hookup=function(){var a=d.hookups;d.hookups={};t(this,
a);return this};u=["prepend","append","after","before","text","html","replaceWith","val"];for(var v=0;v<u.length;v++)y(u[v])})(jQuery);
(function(){function f(j,l){j="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+j.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%})/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/{%=(.+?)%}/g,"',$1,'").split("{%").join("');").split("%}").join("p.push('")+"');}return p.join('');";var d=new Function("obj",j);d.body=j;return l?d(l):d}$.View.register({suffix:"micro",renderer:function(j,l){var d=f(l);return function(q){return d(q)}},script:function(j,l){return"function(obj){"+
f(l).body+"}"}});jQuery.View.ext=".micro"})(jQuery);
