(function(f){var m={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},s=function(e,k,n){return e[k]!==undefined?e[k]:n&&(e[k]={})},v=function(e){return(e=typeof e)&&(e=="function"||e=="object")},o=function(e,k,n){e=e?e.split(m.dot):[];var r=e.length;k=f.isArray(k)?k:[k||window];var d,h,j,g=0;if(r==0)return k[0];for(;d=k[g++];){for(j=0;j<r-1&&v(d);j++)d=s(d,e[j],n);if(v(d)){h=s(d,e[j],n);if(h!==undefined){n===
false&&delete d[e[j]];return h}}}},t=f.String=f.extend(f.String||{},{getObject:o,capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){e=t.classize(e);return e.charAt(0).toLowerCase()+e.substr(1)},classize:function(e,k){e=e.split(m.undHash);for(var n=0;n<e.length;n++)e[n]=t.capitalize(e[n]);return e.join(k||"")},niceName:function(e){return t.classize(e," ")},underscore:function(e){return e.replace(m.colons,"/").replace(m.words,"$1_$2").replace(m.lowUp,"$1_$2").replace(m.dash,
"_").toLowerCase()},sub:function(e,k,n){var r=[];r.push(e.replace(m.replacer,function(d,h){d=o(h,k,typeof n=="boolean"?!n:n);h=typeof d;if((h==="object"||h==="function")&&h!==null){r.push(d);return""}else return""+d}));return r.length<=1?r[0]:r},_regs:m})})(jQuery);
(function(f){var m=false,s=f.makeArray,v=f.isFunction,o=f.isArray,t=f.extend,e=f.String.getObject,k=function(d,h){return d.concat(s(h))},n=/xyz/.test(function(){})?/\b_super\b/:/.*/,r=function(d,h,j){j=j||d;for(var g in d)j[g]=v(d[g])&&v(h[g])&&n.test(d[g])?function(u,w){return function(){var p=this._super,q;this._super=h[u];q=w.apply(this,arguments);this._super=p;return q}}(g,d[g]):d[g]};clss=f.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)};t(clss,{proxy:function(d){var h=
s(arguments),j;d=h.shift();o(d)||(d=[d]);j=this;return function(){for(var g=k(h,arguments),u,w=d.length,p=0,q;p<w;p++)if(q=d[p]){if((u=typeof q=="string")&&j._set_called)j.called=q;g=(u?j[q]:q).apply(j,g||[]);if(p<w-1)g=!o(g)||g._use_call?[g]:g}return g}},newInstance:function(){var d=this.rawInstance(),h;if(d.setup)h=d.setup.apply(d,arguments);if(d.init)d.init.apply(d,o(h)?h:arguments);return d},setup:function(d){this.defaults=t(true,{},d.defaults,this.defaults);return arguments},rawInstance:function(){m=
true;var d=new this;m=false;return d},extend:function(d,h,j){function g(){if(!m)return this.constructor!==g&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}if(typeof d!="string"){j=h;h=d;d=null}if(!j){j=h;h=null}j=j||{};var u=this,w=this.prototype,p,q,x,y;m=true;y=new this;m=false;r(j,w,y);for(p in this)if(this.hasOwnProperty(p))g[p]=this[p];r(h,this,g);if(d){x=d.split(/\./);q=x.pop();x=w=e(x.join("."),window,true);w[q]=
g}t(g,{prototype:y,namespace:x,shortName:q,constructor:g,fullName:d});g.prototype.Class=g.prototype.constructor=g;u=g.setup.apply(g,k([u],arguments));if(g.init)g.init.apply(g,u||[]);return g}});clss.callback=clss.prototype.callback=clss.prototype.proxy=clss.proxy})(jQuery);(function(f){var m=jQuery.cleanData;f.cleanData=function(s){for(var v=0,o;(o=s[v])!==undefined;v++)f(o).triggerHandler("destroyed");m(s)}})(jQuery);
(function(f){var m=function(a,b,c){var i,l=a.bind&&a.unbind?a:f(o(a)?[a]:a);if(b.indexOf(">")===0){b=b.substr(1);i=function(B){B.target===a&&c.apply(this,arguments)}}l.bind(b,i||c);return function(){l.unbind(b,i||c);a=b=c=i=null}},s=f.makeArray,v=f.isArray,o=f.isFunction,t=f.extend,e=f.String,k=f.each,n=Array.prototype.slice,r=function(a,b,c,i){var l=a.delegate&&a.undelegate?a:f(o(a)?[a]:a);l.delegate(b,c,i);return function(){l.undelegate(b,c,i);l=a=c=i=b=null}},d=function(a,b,c,i){return i?r(a,i,
b,c):m(a,b,c)},h=function(a,b){var c=typeof b=="string"?a[b]:b;return function(){a.called=b;return c.apply(a,[this.nodeName?f(this):this].concat(n.call(arguments,0)))}},j=/\./g,g=/_?controllers?/ig,u=function(a){return e.underscore(a.replace("jQuery.","").replace(j,"_").replace(g,""))},w=/[^\w]/,p=/\{([^\}]+)\}/g,q=/^(?:(.*?)\s)?([\w\.\:>]+)$/,x,y=function(a,b){return f.data(a,"controllers",b)};f.Class("jQuery.Controller",{setup:function(){this._super.apply(this,arguments);if(!(!this.shortName||this.fullName==
"jQuery.Controller")){this._fullName=u(this.fullName);this._shortName=u(this.shortName);var a=this,b=this.pluginName||this._fullName,c;f.fn[b]||(f.fn[b]=function(i){var l=s(arguments),B=typeof i=="string"&&o(a.prototype[i]),D=l[0];return this.each(function(){var z=y(this);if(z=z&&z[b])B?z[D].apply(z,l.slice(1)):z.update.apply(z,l);else a.newInstance.apply(a,[this].concat(l))})});this.actions={};for(c in this.prototype)if(!(c=="constructor"||!o(this.prototype[c])))if(this._isAction(c))this.actions[c]=
this._action(c)}},hookup:function(a){return new this(a)},_isAction:function(a){return w.test(a)?true:f.inArray(a,this.listensTo)>-1||f.event.special[a]||C[a]},_action:function(a,b){p.lastIndex=0;if(!b&&p.test(a))return null;a=b?e.sub(a,[b,window]):a;b=v(a);var c=(b?a[1]:a).match(q);return{processor:C[c[2]]||x,parts:c,delegate:b?a[0]:undefined}},processors:{},listensTo:[],defaults:{}},{setup:function(a,b){var c=this.constructor;a=a.jquery?a[0]:a;var i=c.pluginName||c._fullName;this.element=f(a).addClass(i);
(y(a)||y(a,{}))[i]=this;this.options=t(t(true,{},c.defaults),b);this.called="init";this.bind();return this.element},bind:function(a,b,c){if(a===undefined){this._bindings=[];a=this.constructor;b=this._bindings;c=a.actions;var i=this.element;for(funcName in c)if(c.hasOwnProperty(funcName)){ready=c[funcName]||a._action(funcName,this.options);b.push(ready.processor(ready.delegate||i,ready.parts[2],ready.parts[1],funcName,this))}var l=h(this,"destroy");i.bind("destroyed",l);b.push(function(B){f(B).unbind("destroyed",
l)});return b.length}if(typeof a=="string"){c=b;b=a;a=this.element}return this._binder(a,b,c)},_binder:function(a,b,c,i){if(typeof c=="string")c=h(this,c);this._bindings.push(d(a,b,c,i));return this._bindings.length},_unbind:function(){var a=this.element[0];k(this._bindings,function(b,c){c(a)});this._bindings=[]},delegate:function(a,b,c,i){if(typeof a=="string"){i=c;c=b;b=a;a=this.element}return this._binder(a,c,i,b)},update:function(a){t(this.options,a);this._unbind();this.bind()},destroy:function(){if(this._destroyed)throw this.constructor.shortName+
" controller already deleted";var a=this.constructor.pluginName||this.constructor._fullName;this._destroyed=true;this.element.removeClass(a);this._unbind();delete this._actions;delete this.element.data("controllers")[a];f(this).triggerHandler("destroyed");this.element=null},find:function(a){return this.element.find(a)},_set_called:true});var C=f.Controller.processors;x=function(a,b,c,i,l){return d(a,b,h(l,i),c)};k("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),
function(a,b){C[b]=x});var A,E=function(a,b){for(A=0;A<b.length;A++)if(typeof b[A]=="string"?a.constructor._shortName==b[A]:a instanceof b[A])return true;return false};f.fn.extend({controllers:function(){var a=s(arguments),b=[],c,i,l;this.each(function(){c=f.data(this,"controllers");for(l in c)if(c.hasOwnProperty(l)){i=c[l];if(!a.length||E(i,a))b.push(i)}});return b},controller:function(){return this.controllers.apply(this,arguments)[0]}})})(jQuery);
