(function(f){var n={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},s=function(e,k,l){return e[k]!==undefined?e[k]:l&&(e[k]={})},t=function(e){var k=typeof e;return e&&(k=="function"||k=="object")},p,u=f.String=f.extend(f.String||{},{getObject:p=function(e,k,l){e=e?e.split(n.dot):[];var r=e.length,d,i,j,g=0;k=f.isArray(k)?k:[k||window];if(r==0)return k[0];for(;d=k[g++];){for(j=0;j<r-1&&t(d);j++)d=s(d,e[j],
l);if(t(d)){i=s(d,e[j],l);if(i!==undefined){l===false&&delete d[e[j]];return i}}}},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){e=u.classize(e);return e.charAt(0).toLowerCase()+e.substr(1)},classize:function(e,k){e=e.split(n.undHash);for(var l=0;l<e.length;l++)e[l]=u.capitalize(e[l]);return e.join(k||"")},niceName:function(e){return u.classize(e," ")},underscore:function(e){return e.replace(n.colons,"/").replace(n.words,"$1_$2").replace(n.lowUp,"$1_$2").replace(n.dash,
"_").toLowerCase()},sub:function(e,k,l){var r=[];l=typeof l=="boolean"?!l:l;r.push(e.replace(n.replacer,function(d,i){d=p(i,k,l);if(t(d)){r.push(d);return""}else return""+d}));return r.length<=1?r[0]:r},_regs:n})})(jQuery);
(function(f){var n=false,s=f.makeArray,t=f.isFunction,p=f.isArray,u=f.extend,e=f.String.getObject,k=function(d,i){return d.concat(s(i))},l=/xyz/.test(function(){})?/\b_super\b/:/.*/,r=function(d,i,j){j=j||d;for(var g in d)j[g]=t(d[g])&&t(i[g])&&l.test(d[g])?function(v,w){return function(){var q=this._super,o;this._super=i[v];o=w.apply(this,arguments);this._super=q;return o}}(g,d[g]):d[g]};clss=f.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)};u(clss,{proxy:function(d){var i=
s(arguments),j;d=i.shift();p(d)||(d=[d]);j=this;return function(){for(var g=k(i,arguments),v,w=d.length,q=0,o;q<w;q++)if(o=d[q]){if((v=typeof o=="string")&&j._set_called)j.called=o;g=(v?j[o]:o).apply(j,g||[]);if(q<w-1)g=!p(g)||g._use_call?[g]:g}return g}},newInstance:function(){var d=this.rawInstance(),i;if(d.setup)i=d.setup.apply(d,arguments);if(d.init)d.init.apply(d,p(i)?i:arguments);return d},setup:function(d){this.defaults=u(true,{},d.defaults,this.defaults);return arguments},rawInstance:function(){n=
true;var d=new this;n=false;return d},extend:function(d,i,j){function g(){if(!n)return this.constructor!==g&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}if(typeof d!="string"){j=i;i=d;d=null}if(!j){j=i;i=null}j=j||{};var v=this,w=this.prototype,q,o,x,y;n=true;y=new this;n=false;r(j,w,y);for(q in this)if(this.hasOwnProperty(q))g[q]=this[q];r(i,this,g);if(d){x=d.split(/\./);o=x.pop();x=w=e(x.join("."),window,true);w[o]=
g}u(g,{prototype:y,namespace:x,shortName:o,constructor:g,fullName:d});g.prototype.Class=g.prototype.constructor=g;o=g.setup.apply(g,k([v],arguments));if(g.init)g.init.apply(g,o||k([v],arguments));return g}});clss.callback=clss.prototype.callback=clss.prototype.proxy=clss.proxy})(jQuery);(function(f){var n=jQuery.cleanData;f.cleanData=function(s){for(var t=0,p;(p=s[t])!==undefined;t++)f(p).triggerHandler("destroyed");n(s)}})(jQuery);
(function(f){var n=function(a,b,c){var h,m=a.bind&&a.unbind?a:f(p(a)?[a]:a);if(b.indexOf(">")===0){b=b.substr(1);h=function(B){B.target===a&&c.apply(this,arguments)}}m.bind(b,h||c);return function(){m.unbind(b,h||c);a=b=c=h=null}},s=f.makeArray,t=f.isArray,p=f.isFunction,u=f.extend,e=f.String,k=f.each,l=Array.prototype.slice,r=function(a,b,c,h){var m=a.delegate&&a.undelegate?a:f(p(a)?[a]:a);m.delegate(b,c,h);return function(){m.undelegate(b,c,h);m=a=c=h=b=null}},d=function(a,b,c,h){return h?r(a,h,
b,c):n(a,b,c)},i=function(a,b){var c=typeof b=="string"?a[b]:b;return function(){a.called=b;return c.apply(a,[this.nodeName?f(this):this].concat(l.call(arguments,0)))}},j=/\./g,g=/_?controllers?/ig,v=function(a){return e.underscore(a.replace("jQuery.","").replace(j,"_").replace(g,""))},w=/[^\w]/,q=/\{([^\}]+)\}/g,o=/^(?:(.*?)\s)?([\w\.\:>]+)$/,x,y=function(a,b){return f.data(a,"controllers",b)};f.Class("jQuery.Controller",{setup:function(){this._super.apply(this,arguments);if(!(!this.shortName||this.fullName==
"jQuery.Controller")){this._fullName=v(this.fullName);this._shortName=v(this.shortName);var a=this,b=this.pluginName||this._fullName,c;f.fn[b]||(f.fn[b]=function(h){var m=s(arguments),B=typeof h=="string"&&p(a.prototype[h]),D=m[0];return this.each(function(){var z=y(this);if(z=z&&z[b])B?z[D].apply(z,m.slice(1)):z.update.apply(z,m);else a.newInstance.apply(a,[this].concat(m))})});this.actions={};for(c in this.prototype)if(!(c=="constructor"||!p(this.prototype[c])))if(this._isAction(c))this.actions[c]=
this._action(c)}},hookup:function(a){return new this(a)},_isAction:function(a){return w.test(a)?true:f.inArray(a,this.listensTo)>-1||f.event.special[a]||C[a]},_action:function(a,b){q.lastIndex=0;if(!b&&q.test(a))return null;a=b?e.sub(a,[b,window]):a;b=t(a);var c=(b?a[1]:a).match(o);return{processor:C[c[2]]||x,parts:c,delegate:b?a[0]:undefined}},processors:{},listensTo:[],defaults:{}},{setup:function(a,b){var c=this.constructor;a=(typeof a=="string"?f(a):a.jquery?a:[a])[0];var h=c.pluginName||c._fullName;
this.element=f(a).addClass(h);(y(a)||y(a,{}))[h]=this;this.options=u(u(true,{},c.defaults),b);this.called="init";this.bind();return[this.element,this.options].concat(s(arguments).slice(2))},bind:function(a,b,c){if(a===undefined){this._bindings=[];a=this.constructor;b=this._bindings;c=a.actions;var h=this.element;for(funcName in c)if(c.hasOwnProperty(funcName)){ready=c[funcName]||a._action(funcName,this.options);b.push(ready.processor(ready.delegate||h,ready.parts[2],ready.parts[1],funcName,this))}var m=
i(this,"destroy");h.bind("destroyed",m);b.push(function(B){f(B).unbind("destroyed",m)});return b.length}if(typeof a=="string"){c=b;b=a;a=this.element}return this._binder(a,b,c)},_binder:function(a,b,c,h){if(typeof c=="string")c=i(this,c);this._bindings.push(d(a,b,c,h));return this._bindings.length},_unbind:function(){var a=this.element[0];k(this._bindings,function(b,c){c(a)});this._bindings=[]},delegate:function(a,b,c,h){if(typeof a=="string"){h=c;c=b;b=a;a=this.element}return this._binder(a,c,h,
b)},update:function(a){u(this.options,a);this._unbind();this.bind()},destroy:function(){if(this._destroyed)throw this.constructor.shortName+" controller already deleted";var a=this.constructor.pluginName||this.constructor._fullName;this._destroyed=true;this.element.removeClass(a);this._unbind();delete this._actions;delete this.element.data("controllers")[a];f(this).triggerHandler("destroyed");this.element=null},find:function(a){return this.element.find(a)},_set_called:true});var C=f.Controller.processors;
x=function(a,b,c,h,m){return d(a,b,i(m,h),c)};k("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){C[b]=x});var A,E=function(a,b){for(A=0;A<b.length;A++)if(typeof b[A]=="string"?a.constructor._shortName==b[A]:a instanceof b[A])return true;return false};f.fn.extend({controllers:function(){var a=s(arguments),b=[],c,h,m;this.each(function(){c=f.data(this,
"controllers");for(m in c)if(c.hasOwnProperty(m)){h=c[m];if(!a.length||E(h,a))b.push(h)}});return b},controller:function(){return this.controllers.apply(this,arguments)[0]}})})(jQuery);
